{"version":3,"sources":["webpack:///core.js","webpack:///webpack/bootstrap 7882b5c02e7a58804056","webpack:///./src/core/node.js","webpack:///./src/core.js","webpack:///./src/shell/init-editor.js","webpack:///./src/core/rxeditor.js","webpack:///./src/core/canvas.js","webpack:///./src/core/node-view.js","webpack:///./src/core/node-state.js","webpack:///./src/core/canvas-state.js","webpack:///./src/core/commands.js","webpack:///./src/core/node-label.js","webpack:///./src/core/node-toolbar.js","webpack:///./src/core/rx-cursor.js","webpack:///./src/core/mouse-follower.js","webpack:///./src/core/mini-editbar.js","webpack:///./src/core/node-parser.js","webpack:///./src/core/nodes/class-node.js","webpack:///./src/core/nodes/char-node.js","webpack:///./src/core/nodes/tag-node.js","webpack:///./src/core/rules/index.js","webpack:///./src/core/rules/container.js","webpack:///./src/core/rules/row.js","webpack:///./src/core/rules/col.js","webpack:///./src/core/rules/heading.js","webpack:///./src/basic/rxarray.js","webpack:///./src/basic/object-state.js","webpack:///./src/core/rxeditor-command-proxy.js","webpack:///./src/core/nodes/rxnode.js","webpack:///./src/core/nodes/text-node.js","webpack:///./src/basic/rxcomponent.js","webpack:///./src/core/rules/common-rule.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","13","__webpack_exports__","_classCallCheck","instance","Constructor","TypeError","Node","__WEBPACK_IMPORTED_MODULE_0__node_view__","__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__","__WEBPACK_IMPORTED_MODULE_2__node_state__","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","this","seedId","children","view","NodeView","meta","tag","classList","styles","attributes","defaultMeta","initStates","mouseFollower","offsetX","offsetY","begindrag","event","stopPropagation","state","onBegindrag","begindragLabel","$dom","begindragIcon","clientWidth","mousemove","onMousemove","rxEditor","canvasMouseMove","mouseover","onMouseover","mouseout","onMouseout","onclick","onClick","duplicate","changeToState","commandManager","render","up","parent","delete","deleteNode","stateChanged","oldState","newState","leave","enter","nodeStateChanged","idSeed","id","normalState","NormalState","activeState","ActiveState","focusState","FocusState","dragoverState","DragoverState","draggedState","DraggedState","disableState","DisableState","editState","EditState","previewState","PreviewState","concat","assign","stateName","refreshState","toViewModel","getParentViewDomElement","forEach","child","parentDomElement","dom","renderHtml","toHtmlModel","appendChild","clearDraggedoverStates","clearActiveStates","clearFocusAndEditStates","allToNormalState","draggedToFoused","first","after","before","targetParent","removeFromParent","unshiftChild","last","pushChild","brother","insertBefore","insertAfter","remove","unshift","add","copy","make","rule","JSON","parse","stringify","ruleName","clone","acceptedChildren","containsInAccepted","containsInExcept","childRuleName","rejectChildren","model","stateModel","on","onmousemove","onmouseover","onmouseout","label","getStateName","childView","toTreeViewNode","push","node","changeNode","nodeChanged","focusNode","clearCharNodes","getNodeById","preview","344","window","creatEditorCore","pageId","initEditor","345","RXEditor","RXEditorCommandProxy","346","getDefaultLang","lang","navigator","language","userLanguage","substr","getLocal","local","zhLocal","enLocal","__WEBPACK_IMPORTED_MODULE_0__canvas__","__WEBPACK_IMPORTED_MODULE_1__canvas_state__","__WEBPACK_IMPORTED_MODULE_2__basic_rxarray__","__WEBPACK_IMPORTED_MODULE_3__commands__","__WEBPACK_IMPORTED_MODULE_4__node_label__","__WEBPACK_IMPORTED_MODULE_5__node_toolbar__","__WEBPACK_IMPORTED_MODULE_6__rx_cursor__","__WEBPACK_IMPORTED_MODULE_7__mouse_follower__","__WEBPACK_IMPORTED_MODULE_8__mini_editbar__","__WEBPACK_IMPORTED_MODULE_9__rxeditor_command_proxy__","__WEBPACK_IMPORTED_MODULE_10__node_parser__","$t","CanvasState","CommadManager","onCommandsChanged","canUndo","canRedo","commandSchema","parentId","canvas","oldParentId","commandProxy","commandExcuted","optionClasses","activedLabel","NodeLabel","focusedLabel","cssClass","domOn","focusedNode","toolbar","NodeToolbar","cursor","RxCursor","MouseFollower","miniEditbar","MiniEditbar","nodeParser","NodeParser","workspace","document","getElementById","Canvas","serveForRXEditor","rxeditorReady","addEventListener","dropElement","watch","tongleOnCondition","showOutline","refreshPosition","item","movingCommand","draggedNode","parseNode","startNew","beginFollowMouse","responsive","screenWidth","code","replace","doDrop","finishMoving","endFollowMouse","position","command","adoptFromToolbox","moveInTop","finish","moveIn","moveBefore","moveAfter","isActived","followMouse","takeOverDraggingByWorkspace","active","hide","htmlCode","getNodeHtml","unFocusNode","div","createElement","innerHTML","showMarginX","showMarginY","showLabel","undo","redo","clearCanvas","generateHTML","html","loadNodeHtml","loadCanvasHtml","file","codeId","element","fileType","style","type","rel","createTextNode","getElementsByTagName","script","body","347","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","setPrototypeOf","__proto__","__WEBPACK_IMPORTED_MODULE_0__node__","_get","receiver","Function","desc","getOwnPropertyDescriptor","undefined","getPrototypeOf","parentViewDomElement","padding","dropInMargin","width","rootDiv","jsonArray","toJson","viewNodes","348","parentDoment","oldDom","doRender","contains","replaceChild","previewDom","renderStylesAndClasses","showAttributes","domElement","bindEvents","styleName","className","attributeName","setAttribute","eventName","removeChild","349","NodeState","apply","addtionToModel","editMarginStyle","empertyMargin","paddingX","paddingY","for","draggable","isCharNode","judgeCharNodePostion","margin","srcElement","clientHeight","ratioY","ratioX","canAccept","inTop","inLeft","CanDropState","doDragover","judgePosition","show","changeTextnodeToCharNode","preventDefault","startMove","contenteditable","startEditText","finishEditText","350","__WEBPACK_IMPORTED_MODULE_0__basic_object_state__","__screenWidth","__preview","__showMarginX","__showMarginY","__showOutline","__showLabel","distributeEvent","ObjectState","351","CommandMovable","oldParent","oldnNextSbiling","nextSbiling","storeNewInfo","newParent","newNextSbiling","makeExcuteSchema","makeUndoSchema","CommandNew","_CommandMovable","nextSblilingId","nodeId","CommandMove","_CommandMovable2","CommandDelete","CommandClone","CommandChangeNode","newMeta","oldMeta","CommandTextEdit","oldChildren","chilid","newChildren","CommandLoadCanvasHtml","newHtml","nodes","CommandClearCanvas","CommandLoadNodeHtml","newNode","undoCommands","redoCommands","cmd","startCommand","excute","finished","newNodeData","textCommand","submitChanged","pop","352","__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__","domAttr","followElement","offset","rect","getBoundingClientRect","left","x","y","top","height","RXComponent","353","SvgButton","title","svg","callback","_RXComponent","svgArrowUp","svgMove","svgEdit","svgClone","svgRemove","duplicateBtn","editButton","el","getSelection","collapse","focus","editable","354","classClasses","inRight","inBottom","outTop","outRight","outBottom","outLeft","charLeft","charRight","right","bottom","355","text","clientX","clientY","356","__WEBPACK_IMPORTED_MODULE_1__basic_object_state__","EditorState","__bold","__italic","__underline","__strikeThrough","__isLink","_ObjectState","set","bold","italic","underline","strikeThrough","isLink","BarButton","toString","selection","rangeCount","getRangeAt","startContainer","parentNode","tagName","endContainer","boldBtn","execCommand","updateButtonsState","setInnerHTML","italicBtn","underlineBtn","strikeBtn","linkBtn","onpaste","plainText","clipboardData","getData","keyCode","watchOne","btn","removeCssClass","removeEventListener","isShow","queryCommandState","357","__WEBPACK_IMPORTED_MODULE_0__nodes_class_node_js__","__WEBPACK_IMPORTED_MODULE_1__nodes_tag_node_js__","__WEBPACK_IMPORTED_MODULE_2__nodes_text_node_js__","__WEBPACK_IMPORTED_MODULE_3__rules__","__WEBPACK_IMPORTED_MODULE_4__rules_common_rule__","childNodes","paraseNode","nodeType","textContent","TextNode","ClassNode","clssNode","parseClassNode","parseTagNode","copyClassList","childNode","parseAttributes","markDefaultMeta","attrs","attrName","attrValue","toLowerCase","rules","classRules","classes","setLabel","elTag","tagRules","tags","TagNode","commonRule","from","to","indexOf","358","__WEBPACK_IMPORTED_MODULE_0__rxnode_js__","RXNode","359","CharNode","__WEBPACK_IMPORTED_MODULE_0__node_js__","char","360","labelToCapitalize","361","container","row","col","heading","362","363","acceptChildren","364","365","4","array","refence","splice","condition","76","__WEBPACK_IMPORTED_MODULE_0__rxarray__","envetHandlers","attribute","callbackFunction","console","assert","distributeEventWithoutGlobal","handlers","handler","77","data","handleMessage","sendMessage","optionsSchema","screenX","screenY","json","message","loadedData","assembleWithTheme","theme","toolbox","treeViewNodes","dragFromToolbox","endDragFromToolbox","rxNameId","changeCanvasState","changeTheme","focusNodeFromShell","duplicateNodeFromShell","removeNodeFromShell","requestHtmlCode","loadHtml","setInlineFile","canvasHeight","scrollHeight","postMessage","78","__WEBPACK_IMPORTED_MODULE_1__text_node__","toUpperCase","baseMetaToModel","setField","isTextNode","charNodes","isCharState","textNode","prev","previousSbiling","changeCharNodeToTextNode","79","__WEBPACK_IMPORTED_MODULE_0__char_node__","parentDom","8","elementName","domOns","parentElement","destory","RXArray","display","80"],"mappings":"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","file":"core.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 344);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 13:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Node; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node_view__ = __webpack_require__(348);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__basic_rxarray__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__node_state__ = __webpack_require__(349);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\nfunction insterAfterDom(newElement, targetElement) {\n  var parent = targetElement.parentNode;\n  if (parent.lastChild == targetElement) {\n    parent.appendChild(newElement);\n  } else {\n    parent.insertBefore(newElement, targetElement.nextSibling);\n  }\n}\n\nvar Node = function () {\n  function Node() {\n    var _this = this;\n\n    _classCallCheck(this, Node);\n\n    this.seedId();\n    //this.mouseFollowerWidth =  '200px'\n    this.children = [];\n    this.view = new __WEBPACK_IMPORTED_MODULE_0__node_view__[\"a\" /* NodeView */]();\n\n    //基础数据，持久化也是这部分数据\n    this.meta = {\n      tag: 'div',\n      classList: [],\n      styles: {},\n      attributes: {}\n    };\n\n    this.defaultMeta = {\n      tag: 'div',\n      classList: [],\n      styles: {},\n      attributes: {}\n    };\n\n    this.initStates();\n\n    this.mouseFollower = {\n      offsetX: 10,\n      offsetY: 0\n    };\n\n    this.begindrag = function (event) {\n      event.stopPropagation();\n      _this.state.onBegindrag(event);\n    };\n\n    this.begindragLabel = function (event) {\n      if (_this.view.$dom) {\n        _this.mouseFollower.offsetX = event.offsetX;\n        _this.mouseFollower.offsetY = -18 + event.offsetY;\n      }\n      _this.begindrag(event);\n    };\n\n    this.begindragIcon = function (event) {\n      if (_this.view.$dom) {\n        _this.mouseFollower.offsetX = _this.view.$dom.clientWidth - 96 + event.offsetX;\n        _this.mouseFollower.offsetY = -24 + event.offsetY;\n      }\n      _this.begindrag(event);\n    };\n\n    this.mousemove = function (event) {\n      event.stopPropagation();\n      _this.state.onMousemove(event);\n      rxEditor.canvasMouseMove(event);\n    };\n    this.mouseover = function (event) {\n      event.stopPropagation();\n      _this.state.onMouseover(event);\n    };\n    this.mouseout = function (event) {\n      event.stopPropagation();\n      _this.state.onMouseout(event);\n    };\n\n    this.onclick = function (event) {\n      event.stopPropagation();\n      _this.state.onClick(event);\n    };\n\n    this.duplicate = function () {\n      _this.changeToState('normalState');\n      rxEditor.commandManager.duplicate(_this);\n      rxEditor.render();\n    };\n\n    this.up = function (event) {\n      if (_this.parent) {\n        _this.changeToState('normalState');\n        _this.parent.changeToState('focusState');\n        event.stopPropagation();\n      }\n    };\n\n    this.delete = function () {\n      //if(confirm(\"Are you sure to delete?\")){\n      _this.changeToState('normalState');\n      rxEditor.commandManager.deleteNode(_this);\n      rxEditor.render();\n      //}\n    };\n\n    this.stateChanged = function (oldState, newState) {\n      oldState.leave();\n      newState.enter();\n      rxEditor.nodeStateChanged(_this, oldState, newState);\n    };\n  }\n\n  _createClass(Node, [{\n    key: \"seedId\",\n    value: function seedId() {\n      if (!Node.idSeed) Node.idSeed = 1;\n      Node.idSeed++;\n      this.id = Node.idSeed;\n    }\n  }, {\n    key: \"initStates\",\n    value: function initStates() {\n      this.normalState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"g\" /* NormalState */](this);\n      this.activeState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"a\" /* ActiveState */](this);\n      this.focusState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"f\" /* FocusState */](this);\n      this.dragoverState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"d\" /* DragoverState */](this);\n      this.draggedState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"c\" /* DraggedState */](this);\n      this.disableState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"b\" /* DisableState */](this);\n      this.editState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"e\" /* EditState */](this);\n      this.previewState = new __WEBPACK_IMPORTED_MODULE_2__node_state__[\"h\" /* PreviewState */](this);\n      this.state = this.normalState;\n    }\n  }, {\n    key: \"markDefaultMeta\",\n    value: function markDefaultMeta() {\n      this.defaultMeta.tag = this.meta.tag;\n      this.defaultMeta.classList = this.meta.classList.concat();\n      this.defaultMeta.attributes = Object.assign({}, this.meta.attributes);\n      this.defaultMeta.styles = Object.assign({}, this.meta.styles);\n    }\n  }, {\n    key: \"changeToState\",\n    value: function changeToState(stateName) {\n      if (this.state === this[stateName]) return;\n      var oldState = this.state;\n      this.state = this[stateName];\n      this.refreshState();\n      this.stateChanged(oldState, this[stateName]);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.view.render(this.toViewModel(), this.getParentViewDomElement());\n      this.children.forEach(function (child) {\n        child.render();\n      });\n    }\n  }, {\n    key: \"renderHtml\",\n    value: function renderHtml(parentDomElement) {\n      var dom = this.view.renderHtml(this.toHtmlModel(), parentDomElement);\n      this.children.forEach(function (child) {\n        child.renderHtml(dom);\n      });\n\n      parentDomElement.appendChild(dom);\n      return dom;\n    }\n  }, {\n    key: \"refreshState\",\n    value: function refreshState() {\n      this.view.refreshState(this.toViewModel());\n      this.children.forEach(function (child) {\n        child.refreshState();\n      });\n    }\n  }, {\n    key: \"clearDraggedoverStates\",\n    value: function clearDraggedoverStates() {\n      if (this.state === this.dragoverState) {\n        this.changeToState('normalState');\n      }\n      this.children.forEach(function (child) {\n        child.clearDraggedoverStates();\n      });\n    }\n  }, {\n    key: \"clearActiveStates\",\n    value: function clearActiveStates() {\n      if (this.state === this.activeState) {\n        this.changeToState('normalState');\n      }\n      this.children.forEach(function (child) {\n        child.clearActiveStates();\n      });\n    }\n  }, {\n    key: \"clearFocusAndEditStates\",\n    value: function clearFocusAndEditStates() {\n      if (this.state === this.focusState || this.state === this.editState) {\n        this.changeToState('normalState');\n      }\n      this.children.forEach(function (child) {\n        child.clearFocusAndEditStates();\n      });\n    }\n  }, {\n    key: \"allToNormalState\",\n    value: function allToNormalState() {\n      this.changeToState('normalState');\n      this.children.forEach(function (child) {\n        child.allToNormalState();\n      });\n    }\n  }, {\n    key: \"draggedToFoused\",\n    value: function draggedToFoused() {\n      if (this.state === this.draggedState) {\n        this.changeToState('focusState');\n      }\n      this.children.forEach(function (child) {\n        child.draggedToFoused();\n      });\n    }\n  }, {\n    key: \"getParentViewDomElement\",\n    value: function getParentViewDomElement() {\n      return this.parent.view.$dom;\n    }\n  }, {\n    key: \"firstChild\",\n    value: function firstChild() {\n      return Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"e\" /* first */])(this.children);\n    }\n  }, {\n    key: \"nextSbiling\",\n    value: function nextSbiling() {\n      if (this.parent) {\n        return Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"b\" /* after */])(this, this.parent.children);\n      }\n    }\n  }, {\n    key: \"previousSbiling\",\n    value: function previousSbiling() {\n      if (this.parent) {\n        return Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"c\" /* before */])(this, this.parent.children);\n      }\n    }\n  }, {\n    key: \"moveInTop\",\n    value: function moveInTop(targetParent) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"e\" /* first */])(targetParent.children) !== this) {\n        this.removeFromParent();\n        targetParent.unshiftChild(this);\n        targetParent.render();\n      }\n    }\n  }, {\n    key: \"moveIn\",\n    value: function moveIn(targetParent) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"h\" /* last */])(targetParent.children) !== this) {\n        this.removeFromParent();\n        targetParent.pushChild(this);\n        targetParent.render();\n      }\n    }\n  }, {\n    key: \"moveBefore\",\n    value: function moveBefore(brother) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"c\" /* before */])(brother, this.children) !== this) {\n        this.removeFromParent();\n        this.parent = brother.parent;\n        Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"g\" /* insertBefore */])(this, brother, brother.parent.children);\n        this.parent.render();\n      }\n    }\n  }, {\n    key: \"moveAfter\",\n    value: function moveAfter(brother) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"b\" /* after */])(brother, this.children) !== this) {\n        this.removeFromParent();\n        this.parent = brother.parent;\n        Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"f\" /* insertAfter */])(this, brother, brother.parent.children);\n        this.parent.render();\n      }\n    }\n  }, {\n    key: \"removeFromParent\",\n    value: function removeFromParent() {\n      if (this.parent) {\n        Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"i\" /* remove */])(this, this.parent.children);\n        this.parent.render();\n      }\n    }\n  }, {\n    key: \"unshiftChild\",\n    value: function unshiftChild(child) {\n      child.parent = this;\n      this.children.unshift(child);\n      return this;\n    }\n  }, {\n    key: \"pushChild\",\n    value: function pushChild(child) {\n      child.parent = this;\n      Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"a\" /* add */])(child, this.children);\n      return this;\n    }\n  }, {\n    key: \"insertAfterSelf\",\n    value: function insertAfterSelf(brother) {\n      brother.parent = this.parent;\n      Object(__WEBPACK_IMPORTED_MODULE_1__basic_rxarray__[\"f\" /* insertAfter */])(brother, this, this.parent.children);\n      return this;\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var copy = this.make();\n      // /console.log(copy)\n      copy.rule = JSON.parse(JSON.stringify(this.rule));\n      copy.ruleName = this.ruleName;\n      this.children.forEach(function (child) {\n        copy.pushChild(child.clone());\n      });\n      return copy;\n    }\n  }, {\n    key: \"canAccept\",\n    value: function canAccept(child) {\n      var acceptedChildren = this.rule ? this.rule.acceptedChildren : '';\n      if (acceptedChildren && acceptedChildren.length == 0) {\n        return false;\n      }\n\n      if (acceptedChildren && !this.containsInAccepted(child)) {\n        return false;\n      }\n\n      if (!acceptedChildren && this.containsInExcept(child)) {\n        return false;\n      }\n      return true;\n    }\n  }, {\n    key: \"containsInAccepted\",\n    value: function containsInAccepted(child) {\n      var childRuleName = child.ruleName;\n      var acceptedChildren = this.rule ? this.rule.acceptedChildren : '';\n      for (var i = 0; i < acceptedChildren.length; i++) {\n        if (acceptedChildren[i] === childRuleName) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"containsInExcept\",\n    value: function containsInExcept(child) {\n      var childRuleName = child.ruleName;\n      var rejectChildren = this.rule ? this.rule.rejectChildren : '';\n      if (rejectChildren) {\n        for (var i = 0; i < rejectChildren.length; i++) {\n          if (rejectChildren[i] === childRuleName) {\n            return true;\n          }\n        }\n      }\n\n      return false;\n    }\n  }, {\n    key: \"toViewModel\",\n    value: function toViewModel() {\n      var model = this.state.stateModel();\n\n      model.on = {\n        onmousemove: this.mousemove,\n        onmouseover: this.mouseover,\n        onmouseout: this.mouseout,\n        //onmouseup:this.mouseup,\n        onclick: this.onclick\n      };\n\n      return model;\n    }\n  }, {\n    key: \"toHtmlModel\",\n    value: function toHtmlModel() {\n      return {\n        styles: {},\n        classList: [], //new RXArray,\n        attributes: {}\n      };\n    }\n  }, {\n    key: \"toTreeViewNode\",\n    value: function toTreeViewNode() {\n      var view = {\n        label: this.label,\n        tag: this.meta.tag,\n        id: this.id,\n        state: this.getStateName(),\n        children: []\n      };\n\n      this.children.forEach(function (child) {\n        var childView = child.toTreeViewNode();\n        if (childView) {\n          view.children.push(childView);\n        }\n      });\n\n      return view;\n    }\n  }, {\n    key: \"getStateName\",\n    value: function getStateName() {\n      if (this.state === this.normalState) {\n        return 'normalState';\n      }\n      if (this.state === this.activeState) {\n        return 'activeState';\n      }\n      if (this.state === this.focusState) {\n        return 'focusState';\n      }\n      if (this.state === this.dragoverState) {\n        return 'dragoverState';\n      }\n      if (this.state === this.draggedState) {\n        return 'draggedState';\n      }\n      if (this.state === this.disableState) {\n        return 'disableState';\n      }\n    }\n  }, {\n    key: \"nodeChanged\",\n    value: function nodeChanged(node) {\n      if (this.id === node.id) {\n        rxEditor.commandManager.changeNode(this, node);\n        return;\n      }\n\n      this.children.forEach(function (child) {\n        child.nodeChanged(node);\n      });\n    }\n  }, {\n    key: \"focusNode\",\n    value: function focusNode(node) {\n      if (node.id === this.id) {\n        this.changeToState('focusState');\n      } else {\n        this.changeToState('normalState');\n      }\n      this.children.forEach(function (child) {\n        child.focusNode(node);\n      });\n    }\n  }, {\n    key: \"clearCharNodes\",\n    value: function clearCharNodes() {\n      this.children.forEach(function (child) {\n        child.clearCharNodes();\n      });\n    }\n  }, {\n    key: \"getNodeById\",\n    value: function getNodeById(id) {\n      if (id === this.id) {\n        return this;\n      }\n\n      for (var i in this.children) {\n        var node = this.children[i].getNodeById(id);\n        if (node) {\n          return node;\n        }\n      }\n    }\n  }, {\n    key: \"preview\",\n    value: function preview() {\n      this.changeToState('previewState');\n      this.children.forEach(function (child) {\n        child.preview();\n      });\n    }\n  }]);\n\n  return Node;\n}();\n\n/***/ }),\n\n/***/ 344:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__shell_init_editor__ = __webpack_require__(345);\n\n\nwindow.creatEditorCore = function (pageId) {\n  Object(__WEBPACK_IMPORTED_MODULE_0__shell_init_editor__[\"a\" /* default */])(pageId);\n};\n\n/***/ }),\n\n/***/ 345:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = initEditor;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_rxeditor__ = __webpack_require__(346);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_rxeditor_command_proxy__ = __webpack_require__(77);\n\n\n//import loadElements from \"../elements/load-elements\"\n\nfunction initEditor(pageId) {\n  window.rxEditor = new __WEBPACK_IMPORTED_MODULE_0__core_rxeditor__[\"a\" /* RXEditor */](pageId);\n  window.RXEditorCommandProxy = __WEBPACK_IMPORTED_MODULE_1__core_rxeditor_command_proxy__[\"a\" /* RXEditorCommandProxy */];\n}\n\n/***/ }),\n\n/***/ 346:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RXEditor; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__canvas__ = __webpack_require__(347);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__canvas_state__ = __webpack_require__(350);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__basic_rxarray__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__commands__ = __webpack_require__(351);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__node_label__ = __webpack_require__(352);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__node_toolbar__ = __webpack_require__(353);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__rx_cursor__ = __webpack_require__(354);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__mouse_follower__ = __webpack_require__(355);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__mini_editbar__ = __webpack_require__(356);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__rxeditor_command_proxy__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__node_parser__ = __webpack_require__(357);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction getDefaultLang() {\n  var lang = navigator.language || navigator.userLanguage;\n  lang = lang.substr(0, 2);\n  //目前只实现两个语言版本\n  if (lang !== 'zh') {\n    lang = 'en';\n  }\n  return lang;\n}\n\nvar enLocal = {\n  \"focus-parent\": \"Focus Parent\",\n  \"move\": \"Move\",\n  \"edit\": \"Edit\",\n  \"duplicate\": \"Duplicate\",\n  \"delete\": \"Delete\",\n  \"can-be-draged\": \"Can be draged\"\n};\n\nvar zhLocal = {\n  \"focus-parent\": \"选中父节点\",\n  \"move\": \"拖动\",\n  \"edit\": \"编辑\",\n  \"duplicate\": \"克隆\",\n  \"delete\": \"删除\",\n  \"can-be-draged\": \"可以拖动\"\n};\n\nfunction getLocal(id) {\n  var local = getDefaultLang() === 'zh' ? zhLocal : enLocal;\n  return local[id] ? local[id] : id;\n}\n\nvar RXEditor = function () {\n  function RXEditor(pageId) {\n    var _this = this;\n\n    _classCallCheck(this, RXEditor);\n\n    this.pageId = pageId;\n    window.$t = getLocal;\n    this.state = new __WEBPACK_IMPORTED_MODULE_1__canvas_state__[\"a\" /* CanvasState */]();\n    this.commandManager = new __WEBPACK_IMPORTED_MODULE_3__commands__[\"a\" /* CommadManager */]();\n    this.commandManager.onCommandsChanged = function (canUndo, canRedo, commandSchema) {\n      if (!commandSchema) return;\n      if (commandSchema.parentId === _this.canvas.id) {\n        commandSchema.parentId = '';\n      }\n      if (commandSchema.oldParentId === _this.canvas.id) {\n        commandSchema.oldParentId = '';\n      }\n      _this.commandProxy.commandExcuted(canUndo, canRedo, commandSchema);\n    };\n    this.optionClasses = [];\n    Object(__WEBPACK_IMPORTED_MODULE_2__basic_rxarray__[\"a\" /* add */])('rx-_-show-outline', this.optionClasses);\n    //this.optionClasses.add('show-label')\n    this.activedLabel = new __WEBPACK_IMPORTED_MODULE_4__node_label__[\"a\" /* NodeLabel */]();\n    this.focusedLabel = new __WEBPACK_IMPORTED_MODULE_4__node_label__[\"a\" /* NodeLabel */]();\n    this.focusedLabel.cssClass('focused');\n    this.focusedLabel.domOn('mousedown', function (event) {\n      if (rxEditor.focusedNode) {\n        rxEditor.focusedNode.begindragLabel(event);\n      }\n    });\n\n    this.toolbar = new __WEBPACK_IMPORTED_MODULE_5__node_toolbar__[\"a\" /* NodeToolbar */]();\n    this.cursor = new __WEBPACK_IMPORTED_MODULE_6__rx_cursor__[\"a\" /* RxCursor */]();\n    this.mouseFollower = new __WEBPACK_IMPORTED_MODULE_7__mouse_follower__[\"a\" /* MouseFollower */]();\n    this.miniEditbar = new __WEBPACK_IMPORTED_MODULE_8__mini_editbar__[\"a\" /* MiniEditbar */]();\n    this.nodeParser = new __WEBPACK_IMPORTED_MODULE_10__node_parser__[\"a\" /* NodeParser */]();\n  }\n\n  _createClass(RXEditor, [{\n    key: \"hangOn\",\n    value: function hangOn(id) {\n      var _this2 = this;\n\n      var commandProxy = new __WEBPACK_IMPORTED_MODULE_9__rxeditor_command_proxy__[\"a\" /* RXEditorCommandProxy */](this.pageId);\n      this.workspace = document.getElementById(id);\n      this.activedLabel.render(this.workspace);\n      this.focusedLabel.render(this.workspace);\n      this.toolbar.render(this.workspace);\n      this.cursor.render(this.workspace);\n      this.mouseFollower.render(this.workspace);\n      this.miniEditbar.render(this.workspace);\n      this.canvas = new __WEBPACK_IMPORTED_MODULE_0__canvas__[\"a\" /* Canvas */](this.workspace);\n      //this.canvas.children = this.load()\n      this.canvas.render();\n      commandProxy.serveForRXEditor = this;\n      this.commandProxy = commandProxy;\n\n      this.commandProxy.rxeditorReady();\n      document.addEventListener('mouseup', function (event) {\n        _this2.dropElement(event);\n      });\n\n      this.state.watch('changed', function (state) {\n        //this.allToNormalState()\n      });\n      this.state.watch('showOutline', function (state) {\n        Object(__WEBPACK_IMPORTED_MODULE_2__basic_rxarray__[\"j\" /* tongleOnCondition */])(state.showOutline, 'rx-_-show-outline', _this2.optionClasses);\n        _this2.render();\n      });\n      this.state.watch('showMarginX', function (state) {\n        _this2.render();\n      });\n      this.state.watch('showMarginY', function (state) {\n        _this2.render();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      this.canvas.render();\n      this.toolbar.refreshPosition();\n      this.focusedLabel.refreshPosition();\n    }\n  }, {\n    key: \"clearDraggedoverStates\",\n    value: function clearDraggedoverStates() {\n      this.canvas.clearDraggedoverStates();\n    }\n  }, {\n    key: \"clearActiveStates\",\n    value: function clearActiveStates() {\n      this.canvas.clearActiveStates();\n    }\n  }, {\n    key: \"clearFocusAndEditStates\",\n    value: function clearFocusAndEditStates() {\n      this.canvas.clearFocusAndEditStates();\n    }\n  }, {\n    key: \"allToNormalState\",\n    value: function allToNormalState() {\n      this.canvas.allToNormalState();\n    }\n  }, {\n    key: \"dragFromToolbox\",\n    value: function dragFromToolbox(item) {\n      if (this.commandManager.movingCommand) return;\n      this.clearFocusAndEditStates();\n      var draggedNode = this.parseNode(item);\n      this.commandManager.startNew(draggedNode);\n      this.beginFollowMouse();\n      //this.clearFocusAndEditStates()\n    }\n  }, {\n    key: \"parseNode\",\n    value: function parseNode(item) {\n      var responsive = this.state.screenWidth;\n      return this.nodeParser.parse(item.code.replace('--responsive--', responsive == 'xs' ? '' : '-' + responsive))[0];\n      //return new BSContainer\n    }\n  }, {\n    key: \"dropElement\",\n    value: function dropElement(event) {\n      //this.clearDraggedoverStates()\n      this.doDrop(event);\n      this.commandManager.finishMoving();\n      this.endFollowMouse();\n      this.canvas.clearCharNodes();\n    }\n  }, {\n    key: \"doDrop\",\n    value: function doDrop(event) {\n      var position = this.cursor.position;\n      var node = this.cursor.node;\n      if (!node) {\n        this.canvas.draggedToFoused();\n        return;\n      }\n      this.canvas.clearFocusAndEditStates();\n      var command = this.commandManager.movingCommand;\n      if (command) {\n        if (position === 'in-left' || position === 'in-top') {\n          command.adoptFromToolbox(node);\n          command.moveInTop(node);\n          command.finish();\n        } else if (position === 'in-right' || position === 'in-bottom') {\n          command.adoptFromToolbox(node);\n          command.moveIn(node);\n          command.finish();\n        } else if (position === 'out-left' || position === 'out-top' || position === 'char-left') {\n          command.adoptFromToolbox(node);\n          command.moveBefore(node);\n          command.finish();\n        } else if (position === 'out-right' || position === 'out-bottom' || position === 'char-right') {\n          command.adoptFromToolbox(node);\n          command.moveAfter(node);\n          command.finish();\n        }\n      }\n    }\n  }, {\n    key: \"endDragFromToolbox\",\n    value: function endDragFromToolbox() {\n      this.commandManager.finishMoving();\n      this.endFollowMouse();\n    }\n  }, {\n    key: \"followMouse\",\n    value: function followMouse(event) {\n      var mouseFollower = this.mouseFollower;\n      if (mouseFollower.isActived) {\n        //mouseFollower.$dom.style.left =  this.followX(event)\n        //mouseFollower.$dom.style.top = this.followY(event)\n        this.mouseFollower.followMouse(event);\n        this.commandProxy.takeOverDraggingByWorkspace();\n      }\n    }\n  }, {\n    key: \"beginFollowMouse\",\n    value: function beginFollowMouse() {\n      if (this.commandManager.movingCommand) {\n        var draggedNode = this.commandManager.movingCommand.node;\n        this.mouseFollower.active(draggedNode.label);\n      }\n    }\n  }, {\n    key: \"endFollowMouse\",\n    value: function endFollowMouse() {\n      //if(this.mouseFollower && this.workspace.contains(this.mouseFollower.$dom)){\n      //  this.workspace.removeChild(this.mouseFollower.$dom)\n      //}\n      this.cursor.hide();\n      this.mouseFollower.hide();\n    }\n  }, {\n    key: \"nodeStateChanged\",\n    value: function nodeStateChanged(node, oldState, newState) {\n      if (newState === node.focusState && node.focusState !== node.normalState) {\n        node.htmlCode = this.getNodeHtml(node);\n        this.commandProxy.focusNode(node, this.pageId);\n      }\n      if (oldState === node.focusState && newState !== node.focusState) {\n        this.commandProxy.unFocusNode(node);\n      }\n    }\n  }, {\n    key: \"getNodeHtml\",\n    value: function getNodeHtml(node) {\n      var div = document.createElement('div');\n      node.renderHtml(div);\n      return div.innerHTML;\n    }\n  }, {\n    key: \"changeCanvasState\",\n    value: function changeCanvasState(state) {\n      this.state.screenWidth = state.screenWidth;\n      //this.state.preview = state.preview\n      //this.state.showEditMargin = state.showEditMargin\n      this.state.showMarginX = state.showMarginX;\n      this.state.showMarginY = state.showMarginY;\n      this.state.showOutline = state.showOutline;\n      this.state.showLabel = state.showLabel;\n    }\n  }, {\n    key: \"nodeChanged\",\n    value: function nodeChanged(node) {\n      //console.log(node)\n      this.canvas.nodeChanged(node);\n      this.render();\n    }\n  }, {\n    key: \"undo\",\n    value: function undo() {\n      this.allToNormalState();\n      this.commandManager.undo();\n      this.render();\n    }\n  }, {\n    key: \"redo\",\n    value: function redo() {\n      this.allToNormalState();\n      this.commandManager.redo();\n      this.render();\n    }\n\n    //download(){\n    //  let innerHTML = this.canvas.generateHTML()\n    //  let json = this.canvas.generateJson()\n    //  this.commandProxy.saveCodeFiles(innerHTML, json)\n    //  this.render()\n    //}\n\n  }, {\n    key: \"clearCanvas\",\n    value: function clearCanvas() {\n      this.commandManager.clearCanvas();\n      this.activedLabel.hide();\n      this.focusedLabel.hide();\n      this.toolbar.hide();\n      this.render();\n    }\n  }, {\n    key: \"focusNodeFromShell\",\n    value: function focusNodeFromShell(node) {\n      this.canvas.clearFocusAndEditStates();\n      this.canvas.focusNode(node);\n    }\n  }, {\n    key: \"duplicateNodeFromShell\",\n    value: function duplicateNodeFromShell(id) {\n      this.canvas.clearFocusAndEditStates();\n      var node = this.canvas.getNodeById(id);\n      this.commandManager.duplicate(node);\n    }\n  }, {\n    key: \"removeNodeFromShell\",\n    value: function removeNodeFromShell(id) {\n      this.canvas.clearFocusAndEditStates();\n      var node = this.canvas.getNodeById(id);\n      this.commandManager.deleteNode(node);\n    }\n  }, {\n    key: \"canvasMouseMove\",\n    value: function canvasMouseMove(event) {\n      this.commandProxy.canvasMouseMove(event);\n    }\n  }, {\n    key: \"requestHtmlCode\",\n    value: function requestHtmlCode() {\n      this.allToNormalState();\n      return this.canvas.generateHTML();\n    }\n  }, {\n    key: \"loadHtml\",\n    value: function loadHtml(html, id) {\n      var node = this.canvas.getNodeById(id);\n      if (node) {\n        this.commandManager.loadNodeHtml(node, html);\n      } else {\n        this.commandManager.loadCanvasHtml(html);\n      }\n\n      this.render();\n    }\n  }, {\n    key: \"setInlineFile\",\n    value: function setInlineFile(file) {\n      var codeId = file.name.replace('.', '-');\n      var element = document.getElementById(codeId);\n      if (element) {\n        element.innerHTML = file.code;\n        return;\n      }\n\n      if (file.fileType === 'style') {\n        var style = document.createElement('style');\n        style.type = 'text/css';\n        style.rel = 'stylesheet';\n        style.id = codeId;\n\n        style.appendChild(document.createTextNode(file.code));\n\n        var head = document.getElementsByTagName('head')[0];\n        head.appendChild(style);\n      }\n\n      if (file.fileType === 'javascript') {\n        var script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.id = codeId;\n        script.appendChild(document.createTextNode(file.code));\n        document.body.appendChild(script);\n      }\n    }\n  }]);\n\n  return RXEditor;\n}();\n\n/***/ }),\n\n/***/ 347:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Canvas; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node__ = __webpack_require__(13);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar Canvas = function (_Node) {\n  _inherits(Canvas, _Node);\n\n  function Canvas(workspace) {\n    _classCallCheck(this, Canvas);\n\n    var _this = _possibleConstructorReturn(this, (Canvas.__proto__ || Object.getPrototypeOf(Canvas)).call(this));\n\n    _this.activeState = _this.normalState;\n    _this.focusState = _this.normalState;\n    _this.parentViewDomElement = workspace;\n    _this.padding = '30px';\n\n    _this.stateChanged = function (oldState, newState) {};\n\n    _this.rule = { dropInMargin: 0 };\n    _this.rule.acceptedChildren = '';\n    _this.rule.rejectChildren = ['col', 'thead', 'tbody', 'th', 'tr', 'td'];\n    return _this;\n  }\n\n  _createClass(Canvas, [{\n    key: 'getParentViewDomElement',\n    value: function getParentViewDomElement() {\n      return this.parentViewDomElement;\n    }\n\n    /*preview(parentDomElement){\n      if(parentDomElement.contains(this.view.$dom)){\n        parentDomElement.removeChild(this.view.$dom)\n      }\n      return super.preview(parentDomElement)\n    }*/\n\n  }, {\n    key: 'toViewModel',\n    value: function toViewModel() {\n      var model = _get(Canvas.prototype.__proto__ || Object.getPrototypeOf(Canvas.prototype), 'toViewModel', this).call(this);\n      model.tag = 'div';\n      model.styles.width = \"100%\";\n      model.styles['min-height'] = \"calc(100vh)\";\n      model.styles.cursor = 'default';\n      model.styles['border'] = '0';\n      model.styles['padding'] = '10px';\n      model.classList.push('canvas');\n      model.toolbar = '';\n      model.label = '';\n      return model;\n    }\n  }, {\n    key: 'toPreviewModel',\n    value: function toPreviewModel() {\n      var model = _get(Canvas.prototype.__proto__ || Object.getPrototypeOf(Canvas.prototype), 'toPreviewModel', this).call(this);\n      model.tag = 'div';\n      return model;\n    }\n  }, {\n    key: 'generateHTML',\n    value: function generateHTML() {\n      var rootDiv = document.createElement('div');\n      this.children.forEach(function (child) {\n        child.renderHtml(rootDiv);\n      });\n      return rootDiv.innerHTML;\n    }\n  }, {\n    key: 'generateJson',\n    value: function generateJson() {\n      var jsonArray = [];\n      this.children.forEach(function (child) {\n        jsonArray.push(child.toJson());\n      });\n      return jsonArray;\n    }\n  }, {\n    key: 'generateTreeViewNodes',\n    value: function generateTreeViewNodes() {\n      var viewNodes = [];\n      this.children.forEach(function (child) {\n        viewNodes.push(child.toTreeViewNode());\n      });\n      return viewNodes;\n    }\n  }]);\n\n  return Canvas;\n}(__WEBPACK_IMPORTED_MODULE_0__node__[\"a\" /* Node */]);\n\n/***/ }),\n\n/***/ 348:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return NodeView; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NodeView = function () {\n  function NodeView() {\n    _classCallCheck(this, NodeView);\n  }\n\n  _createClass(NodeView, [{\n    key: 'render',\n    value: function render(model, parentDoment) {\n      this.parentDoment = parentDoment;\n      //this.putDown(parentDoment)//防止canvas内节点重复添加\n      var oldDom = this.$dom;\n\n      this.$dom = document.createElement(model.tag);\n      this.doRender(model, parentDoment, this.$dom);\n      if (parentDoment.contains(oldDom)) {\n        parentDoment.replaceChild(this.$dom, oldDom);\n      } else {\n        parentDoment.appendChild(this.$dom);\n      }\n    }\n  }, {\n    key: 'renderHtml',\n    value: function renderHtml(model, parentDoment) {\n      //this.putDown(parentDoment)//防止canvas内节点重复添加\n      var previewDom = document.createElement(model.tag);\n      this.doRender(model, parentDoment, previewDom);\n      return previewDom;\n    }\n  }, {\n    key: 'refreshState',\n    value: function refreshState(model) {\n      if (this.$dom) {\n        //let y = this.$dom.getBoundingClientRect().y\n        this.$dom.classList.remove('rx-_-mouse-overed', 'rx-_-focused', 'rx-_-dragged', 'rx-_-dragover', 'rx-_-editing');\n        this.renderStylesAndClasses(model, this.$dom);\n        this.showAttributes(model, this.$dom);\n      }\n    }\n  }, {\n    key: 'doRender',\n    value: function doRender(model, parentDoment, domElement) {\n      domElement.innerHTML = model.innerHTML ? model.innerHTML : '';\n      this.renderStylesAndClasses(model, domElement);\n      this.bindEvents(domElement, model.on);\n      this.showAttributes(model, domElement);\n      //parentDoment.appendChild(domElement);\n    }\n  }, {\n    key: 'renderStylesAndClasses',\n    value: function renderStylesAndClasses(model, domElement) {\n      if (domElement) {\n        if (model.styles) {\n          for (var styleName in model.styles) {\n            domElement.style[styleName] = model.styles[styleName];\n          }\n        }\n\n        model.classList.forEach(function (className) {\n          if (className) {\n            domElement.classList.add(className);\n          }\n        });\n      }\n    }\n  }, {\n    key: 'showAttributes',\n    value: function showAttributes(model, domElement) {\n      for (var attributeName in model.attributes) {\n        if (model.attributes[attributeName]) {\n          domElement.setAttribute(attributeName, model.attributes[attributeName]);\n        }\n      }\n    }\n  }, {\n    key: 'bindEvents',\n    value: function bindEvents(element, on) {\n      for (var eventName in on) {\n        //element.addEventListener(eventName, on[eventName])\n        element[eventName] = on[eventName];\n      }\n    }\n  }, {\n    key: 'putDown',\n    value: function putDown() {\n      if (this.$dom) {\n        if (this.parentDoment.contains(this.$dom)) {\n          this.parentDoment.removeChild(this.$dom);\n        }\n      }\n    }\n  }]);\n\n  return NodeView;\n}();\n\n/***/ }),\n\n/***/ 349:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export NodeState */\n/* unused harmony export CanDropState */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return NormalState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return DragoverState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ActiveState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return FocusState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return DisableState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return DraggedState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return EditState; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return PreviewState; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar NodeState = function () {\n  function NodeState(node) {\n    _classCallCheck(this, NodeState);\n\n    this.node = node;\n    this.classList = [];\n    this.styles = {};\n    this.attributes = {/*contenteditable:'false'*/};\n    this.onMousemove = function () {/*console.log('mouse move NodeState')*/};\n    this.onBegindrag = function () {};\n    this.onMouseover = function (event) {};\n    this.onMouseout = function () {};\n    //this.onMouseup = (event)=>{\n    //添加结束拖动代码\n    //}\n    this.onClick = function () {\n      rxEditor.clearFocusAndEditStates();\n    };\n    this.enter = function () {};\n    this.leave = function () {};\n  }\n\n  _createClass(NodeState, [{\n    key: 'stateModel',\n    value: function stateModel() {\n      var classList = [];\n      classList.push.apply(classList, this.classList);\n\n      var model = {\n        styles: Object.assign({}, this.styles),\n        classList: classList,\n        attributes: Object.assign({}, this.attributes)\n      };\n\n      this.addtionToModel(model);\n      return model;\n    }\n  }, {\n    key: 'addtionToModel',\n    value: function addtionToModel(model) {\n      model.classList.push.apply(model.classList, rxEditor.optionClasses);\n      var node = this.node;\n      if (rxEditor.state.showMarginX && node.rule.editMarginStyle || node.children.length === 0 && node.rule.empertyMargin) {\n        model.styles['padding-left'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingX : 0;\n        model.styles['padding-right'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingX : 0;\n      }\n      if (rxEditor.state.showMarginY && node.rule.editMarginStyle || node.children.length === 0 && node.rule.empertyMargin) {\n        model.styles['padding-top'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingY : 0;\n        model.styles['padding-bottom'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingY : 0;\n      }\n\n      //添加for后，编辑时无法选中\n      if (model.attributes.for) {\n        model.attributes.for = '';\n      }\n\n      model.attributes.draggable = \"false\";\n\n      return model;\n    }\n  }, {\n    key: 'judgePosition',\n    value: function judgePosition(event) {\n      var draggedNode = rxEditor.commandManager.movingCommand.node;\n      if (this.node.isCharNode) {\n        return this.judgeCharNodePostion(event);\n      }\n      var margin = this.node.rule.dropInMargin;\n      margin = margin ? margin : 0;\n\n      var clientWidth = event.srcElement.clientWidth;\n      var clientHeight = event.srcElement.clientHeight;\n      var offsetX = event.offsetX;\n      var offsetY = event.offsetY;\n      var ratioY = offsetY / clientHeight;\n      var ratioX = offsetX / clientWidth;\n\n      if (margin > 0 && (this.node.parent && this.node.parent.canAccept(draggedNode) || !this.node.parent)) {\n        //左上角小方块区域\n        if (offsetY < margin && offsetX < margin) {\n          return ratioY < ratioX ? 'out-top' : 'out-left';\n        }\n\n        //右上角小方块区域\n        if (offsetY < margin && clientWidth - offsetX < margin) {\n          return ratioY < 1 - ratioX ? 'out-top' : 'out-right';\n        }\n\n        //右下角小方块\n        if (clientHeight - offsetY < margin && clientWidth - offsetX < margin) {\n          return 1 - ratioY < 1 - ratioX ? 'out-bottom' : 'out-right';\n        }\n\n        //左下角小方块\n        if (clientHeight - offsetY < margin && offsetX < margin) {\n          return 1 - ratioY < ratioX ? 'out-bottom' : 'out-left';\n        }\n\n        if (offsetY < margin) {\n          return 'out-top';\n        }\n\n        if (offsetX < margin) {\n          return 'out-left';\n        }\n\n        if (clientHeight - offsetY < margin) {\n          return 'out-bottom';\n        }\n\n        if (clientWidth - offsetX < margin) {\n          return 'out-right';\n        }\n      }\n\n      if (this.node.canAccept(draggedNode)) {\n        if (this.inTop(event) && this.inLeft(event)) {\n          return ratioY < ratioX ? 'in-top' : 'in-left';\n        }\n        if (this.inTop(event) && !this.inLeft(event)) {\n          return ratioY < 1 - ratioX ? 'in-top' : 'in-right';\n        }\n        if (!this.inTop(event) && this.inLeft(event)) {\n          return 1 - ratioY < ratioX ? 'in-bottom' : 'in-left';\n        }\n        if (!this.inTop(event) && !this.inLeft(event)) {\n          return 1 - ratioY < 1 - ratioX ? 'in-bottom' : 'in-right';\n        }\n      }\n    }\n  }, {\n    key: 'judgeCharNodePostion',\n    value: function judgeCharNodePostion(event) {\n      return this.inLeft(event) ? 'char-left' : 'char-right';\n    }\n\n    //-dropInMargin 边界里面，算是拖入内部，外面算是拖入外部\n\n  }, {\n    key: 'inTop',\n    value: function inTop(event) {\n      //位于上半部\n      if (event.srcElement.clientHeight > event.offsetY * 2) {\n        return true;\n      }\n      return false;\n    }\n  }, {\n    key: 'inLeft',\n    value: function inLeft(event) {\n      //位于左半部部\n      if (event.srcElement.clientWidth > event.offsetX * 2) {\n        return true;\n      }\n      return false;\n    }\n  }]);\n\n  return NodeState;\n}();\n\nvar CanDropState = function (_NodeState) {\n  _inherits(CanDropState, _NodeState);\n\n  function CanDropState(node) {\n    _classCallCheck(this, CanDropState);\n\n    var _this = _possibleConstructorReturn(this, (CanDropState.__proto__ || Object.getPrototypeOf(CanDropState)).call(this, node));\n\n    _this.onMousemove = function (event) {\n      _this.doDragover(event);\n      rxEditor.followMouse(event);\n    };\n    //this.onMouseup = (event)=>{\n    //  this.doDrop(event)\n    //}\n    _this.onClick = function (event) {\n      rxEditor.clearFocusAndEditStates();\n      _this.node.changeToState('focusState');\n    };\n    return _this;\n  }\n\n  _createClass(CanDropState, [{\n    key: 'doDragover',\n    value: function doDragover(event) {\n      var command = rxEditor.commandManager.movingCommand;\n      if (command) {\n        var position = this.judgePosition(event);\n        if (position) {\n          this.node.changeToState('dragoverState');\n          rxEditor.cursor.show(this.judgePosition(event), this.node);\n        }\n      }\n    }\n  }]);\n\n  return CanDropState;\n}(NodeState);\n\nvar NormalState = function (_CanDropState) {\n  _inherits(NormalState, _CanDropState);\n\n  function NormalState(node) {\n    _classCallCheck(this, NormalState);\n\n    var _this2 = _possibleConstructorReturn(this, (NormalState.__proto__ || Object.getPrototypeOf(NormalState)).call(this, node));\n\n    _this2.onMouseover = function (event) {\n      if (!rxEditor.commandManager.movingCommand) {\n        rxEditor.clearActiveStates();\n        _this2.node.changeToState('activeState');\n      }\n    };\n    return _this2;\n  }\n\n  return NormalState;\n}(CanDropState);\n\nvar DragoverState = function (_CanDropState2) {\n  _inherits(DragoverState, _CanDropState2);\n\n  function DragoverState(node) {\n    _classCallCheck(this, DragoverState);\n\n    var _this3 = _possibleConstructorReturn(this, (DragoverState.__proto__ || Object.getPrototypeOf(DragoverState)).call(this, node));\n\n    _this3.classList.push('rx-_-dragover');\n    _this3.enter = function () {\n      node.changeTextnodeToCharNode();\n      if (!_this3.node.isCharNode) {\n        rxEditor.activedLabel.show(node.label, node, 1);\n      }\n    };\n    _this3.leave = function () {\n      rxEditor.activedLabel.hide();\n    };\n    _this3.onMouseout = function () {\n      _this3.node.changeToState('normalState');\n    };\n    return _this3;\n  }\n\n  return DragoverState;\n}(CanDropState);\n\nvar ActiveState = function (_CanDropState3) {\n  _inherits(ActiveState, _CanDropState3);\n\n  function ActiveState(node) {\n    _classCallCheck(this, ActiveState);\n\n    var _this4 = _possibleConstructorReturn(this, (ActiveState.__proto__ || Object.getPrototypeOf(ActiveState)).call(this, node));\n\n    _this4.classList.push('rx-_-mouse-overed');\n    _this4.enter = function () {\n      rxEditor.activedLabel.show(node.label, node, 1);\n    };\n    _this4.leave = function () {\n      rxEditor.activedLabel.hide();\n    };\n    _this4.onMouseout = function () {\n      //console.log('mouse out')\n      _this4.node.changeToState('normalState');\n    };\n    _this4.onMouseover = function (event) {\n      if (!rxEditor.commandManager.movingCommand) {\n        rxEditor.clearActiveStates();\n        _this4.node.changeToState('activeState');\n      }\n    };\n    return _this4;\n  }\n\n  return ActiveState;\n}(CanDropState);\n\nvar FocusState = function (_CanDropState4) {\n  _inherits(FocusState, _CanDropState4);\n\n  function FocusState(node) {\n    _classCallCheck(this, FocusState);\n\n    var _this5 = _possibleConstructorReturn(this, (FocusState.__proto__ || Object.getPrototypeOf(FocusState)).call(this, node));\n\n    _this5.classList.push('rx-_-focused');\n    _this5.enter = function () {\n      var dom = node.view.$dom;\n      rxEditor.focusedLabel.show(node.label, node, 2);\n      rxEditor.toolbar.show(node);\n      rxEditor.focusedNode = node;\n    };\n    _this5.leave = function () {\n      rxEditor.focusedLabel.hide();\n      rxEditor.toolbar.hide();\n      rxEditor.focusedNode = '';\n    };\n    _this5.onClick = function (event) {\n      event.stopPropagation();\n    };\n\n    _this5.onBegindrag = function (event) {\n      //if(this.node.draggable){\n      _this5.preventDefault;\n      rxEditor.commandManager.startMove(_this5.node);\n      rxEditor.beginFollowMouse(event);\n      _this5.node.changeToState('draggedState');\n      //}\n    };\n    return _this5;\n  }\n\n  return FocusState;\n}(CanDropState);\n\nvar DisableState = function (_NodeState2) {\n  _inherits(DisableState, _NodeState2);\n\n  function DisableState(node) {\n    _classCallCheck(this, DisableState);\n\n    var _this6 = _possibleConstructorReturn(this, (DisableState.__proto__ || Object.getPrototypeOf(DisableState)).call(this, node));\n\n    _this6.onMousemove = function (event) {\n      event.preventDefault();\n      rxEditor.followMouse(event);\n      //console.log('mouse move DisableState')\n    };\n    _this6.onMouseout = function (event) {\n      event.preventDefault();\n    };\n    return _this6;\n  }\n\n  return DisableState;\n}(NodeState);\n\nvar DraggedState = function (_DisableState) {\n  _inherits(DraggedState, _DisableState);\n\n  function DraggedState(node) {\n    _classCallCheck(this, DraggedState);\n\n    var _this7 = _possibleConstructorReturn(this, (DraggedState.__proto__ || Object.getPrototypeOf(DraggedState)).call(this, node));\n\n    _this7.classList.push('rx-_-dragged');\n    _this7.enter = function () {\n      document.body.classList.add('one-element-dragged');\n    };\n    _this7.leave = function () {\n      document.body.classList.remove('one-element-dragged');\n    };\n    return _this7;\n  }\n\n  return DraggedState;\n}(DisableState);\n\nvar EditState = function (_FocusState) {\n  _inherits(EditState, _FocusState);\n\n  function EditState(node) {\n    _classCallCheck(this, EditState);\n\n    var _this8 = _possibleConstructorReturn(this, (EditState.__proto__ || Object.getPrototypeOf(EditState)).call(this, node));\n\n    _this8.classList.push('rx-_-editing');\n    _this8.enter = function () {\n      _this8.attributes.contenteditable = 'true';\n      var dom = node.view.$dom;\n      rxEditor.focusedLabel.show(node.label, node, 2);\n      rxEditor.toolbar.show(node);\n      rxEditor.focusedNode = node;\n      rxEditor.miniEditbar.show(_this8.node.view.$dom);\n      rxEditor.commandManager.startEditText(node);\n      node.render();\n    };\n\n    _this8.leave = function () {\n      rxEditor.focusedLabel.hide();\n      rxEditor.toolbar.hide();\n      rxEditor.focusedNode = '';\n      rxEditor.miniEditbar.hide();\n\n      rxEditor.commandManager.finishEditText();\n      _this8.node.render();\n    };\n    return _this8;\n  }\n\n  return EditState;\n}(FocusState);\n\nvar PreviewState = function (_NodeState3) {\n  _inherits(PreviewState, _NodeState3);\n\n  function PreviewState(node) {\n    _classCallCheck(this, PreviewState);\n\n    var _this9 = _possibleConstructorReturn(this, (PreviewState.__proto__ || Object.getPrototypeOf(PreviewState)).call(this, node));\n\n    _this9.onClick = function () {};\n    return _this9;\n  }\n\n  _createClass(PreviewState, [{\n    key: 'addtionToModel',\n    value: function addtionToModel(model) {\n      return model;\n    }\n  }]);\n\n  return PreviewState;\n}(NodeState);\n\n/***/ }),\n\n/***/ 350:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CanvasState; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basic_object_state__ = __webpack_require__(76);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar CanvasState = function (_ObjectState) {\n  _inherits(CanvasState, _ObjectState);\n\n  function CanvasState() {\n    _classCallCheck(this, CanvasState);\n\n    var _this = _possibleConstructorReturn(this, (CanvasState.__proto__ || Object.getPrototypeOf(CanvasState)).call(this));\n\n    _this.__screenWidth = 'md';\n    _this.__preview = false;\n    _this.__showMarginX = true;\n    _this.__showMarginY = true;\n    _this.__showOutline = true;\n    _this.__showLabel = true;\n\n    return _this;\n  }\n\n  _createClass(CanvasState, [{\n    key: 'screenWidth',\n    get: function get() {\n      return this.__screenWidth;\n    },\n    set: function set(screenWidth) {\n      if (this.__screenWidth == screenWidth) {\n        return;\n      }\n      this.__screenWidth = screenWidth;\n      this.distributeEvent('screenWidth');\n    }\n  }, {\n    key: 'preview',\n    get: function get() {\n      return this.__preview;\n    },\n    set: function set(preview) {\n      if (this.__preview == preview) {\n        return;\n      }\n      this.__preview = preview;\n      this.distributeEvent('preview');\n    }\n  }, {\n    key: 'showMarginX',\n    get: function get() {\n      return this.__showMarginX;\n    },\n    set: function set(showMarginX) {\n      if (this.__showMarginX == showMarginX) {\n        return;\n      }\n      this.__showMarginX = showMarginX;\n      this.distributeEvent('showMarginX');\n    }\n  }, {\n    key: 'showMarginY',\n    get: function get() {\n      return this.__showMarginY;\n    },\n    set: function set(showMarginY) {\n      if (this.__showMarginY == showMarginY) {\n        return;\n      }\n      this.__showMarginY = showMarginY;\n      this.distributeEvent('showMarginY');\n    }\n  }, {\n    key: 'showOutline',\n    get: function get() {\n      return this.__showOutline;\n    },\n    set: function set(showOutline) {\n      if (this.__showOutline == showOutline) {\n        return;\n      }\n      this.__showOutline = showOutline;\n      this.distributeEvent('showOutline');\n    }\n  }, {\n    key: 'showLabel',\n    get: function get() {\n      return this.__showLabel;\n    },\n    set: function set(showLabel) {\n      if (this.__showLabel == showLabel) {\n        return;\n      }\n      this.__showLabel = showLabel;\n      this.distributeEvent('showLabel');\n    }\n  }]);\n\n  return CanvasState;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_object_state__[\"a\" /* ObjectState */]);\n\n/***/ }),\n\n/***/ 351:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CommadManager; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction insterAfter(newElement, targetElement) {\n  var parent = targetElement.parentNode;\n  if (parent.lastChild == targetElement) {\n    parent.appendChild(newElement);\n  } else {\n    parent.insertBefore(newElement, targetElement.nextSibling);\n  }\n}\n\nvar CommandMovable = function () {\n  function CommandMovable(node) {\n    _classCallCheck(this, CommandMovable);\n\n    this.node = node;\n    this.oldParent = node.parent;\n    this.oldnNextSbiling = node.nextSbiling();\n  }\n\n  _createClass(CommandMovable, [{\n    key: 'moveInTop',\n    value: function moveInTop(targetParent) {\n      this.node.moveInTop(targetParent);\n      this.storeNewInfo();\n    }\n  }, {\n    key: 'moveBefore',\n    value: function moveBefore(brother) {\n      this.node.moveBefore(brother);\n      this.storeNewInfo();\n    }\n  }, {\n    key: 'moveAfter',\n    value: function moveAfter(brother) {\n      this.node.moveAfter(brother);\n      this.storeNewInfo();\n    }\n  }, {\n    key: 'moveIn',\n    value: function moveIn(targetParent) {\n      this.node.moveIn(targetParent);\n      this.storeNewInfo();\n    }\n  }, {\n    key: 'storeNewInfo',\n    value: function storeNewInfo() {\n      this.newParent = this.node.parent;\n      this.newNextSbiling = this.node.nextSbiling();\n    }\n  }, {\n    key: 'adoptFromToolbox',\n    value: function adoptFromToolbox(parent) {\n      var draggedNode = this.node;\n      if (draggedNode && !draggedNode.parent && parent.canAccept(draggedNode)) {\n        draggedNode.parent = parent;\n        draggedNode.render();\n        draggedNode.changeToState('draggedState');\n      }\n    }\n  }, {\n    key: 'finish',\n    value: function finish() {\n      var draggedNode = this.node;\n      if (draggedNode.parent) {\n        draggedNode.parent.changeToState('normalState');\n      }\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'excute',\n    value: function excute() {\n      this.node.removeFromParent();\n      if (this.newNextSbiling) {\n        this.node.moveBefore(this.newNextSbiling);\n      } else if (this.newParent) {\n        this.newParent.pushChild(this.node);\n      }\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.node.removeFromParent();\n      if (this.oldnNextSbiling) {\n        this.node.moveBefore(this.oldnNextSbiling);\n      } else if (this.oldParent) {\n        this.oldParent.pushChild(this.node);\n      }\n\n      this.makeUndoSchema();\n    }\n  }]);\n\n  return CommandMovable;\n}();\n\nvar CommandNew = function (_CommandMovable) {\n  _inherits(CommandNew, _CommandMovable);\n\n  function CommandNew(node) {\n    _classCallCheck(this, CommandNew);\n\n    return _possibleConstructorReturn(this, (CommandNew.__proto__ || Object.getPrototypeOf(CommandNew)).call(this, node));\n  }\n\n  _createClass(CommandNew, [{\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'new',\n        node: this.node.toTreeViewNode(),\n        parentId: this.node.parent ? this.node.parent.id : '',\n        nextSblilingId: this.node.nextSbiling() ? this.node.nextSbiling().id : ''\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'delete',\n        nodeId: this.node.id\n      };\n    }\n  }]);\n\n  return CommandNew;\n}(CommandMovable);\n\nvar CommandMove = function (_CommandMovable2) {\n  _inherits(CommandMove, _CommandMovable2);\n\n  function CommandMove(node) {\n    _classCallCheck(this, CommandMove);\n\n    return _possibleConstructorReturn(this, (CommandMove.__proto__ || Object.getPrototypeOf(CommandMove)).call(this, node));\n  }\n\n  _createClass(CommandMove, [{\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'move',\n        nodeId: this.node.id,\n        oldParentId: this.oldParent ? this.oldParent.id : '',\n        parentId: this.node.parent ? this.node.parent.id : '',\n        nextSblilingId: this.node.nextSbiling() ? this.node.nextSbiling().id : ''\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'move',\n        nodeId: this.node.id,\n        oldParentId: this.newParent ? this.newParent.id : '',\n        parentId: this.node.parent ? this.node.parent.id : '',\n        nextSblilingId: this.node.nextSbiling() ? this.node.nextSbiling().id : ''\n      };\n    }\n  }]);\n\n  return CommandMove;\n}(CommandMovable);\n\nvar CommandDelete = function () {\n  function CommandDelete(node) {\n    _classCallCheck(this, CommandDelete);\n\n    this.node = node;\n    this.oldParent = node.parent;\n    this.oldnNextSbiling = this.node.nextSbiling();\n  }\n\n  _createClass(CommandDelete, [{\n    key: 'excute',\n    value: function excute() {\n      this.node.removeFromParent();\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      if (this.oldnNextSbiling) {\n        this.node.moveBefore(this.oldnNextSbiling);\n      } else {\n        this.oldParent.pushChild(this.node);\n      }\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'delete',\n        nodeId: this.node.id\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'new',\n        node: this.node.toTreeViewNode(),\n        parentId: this.node.parent ? this.node.parent.id : '',\n        nextSblilingId: this.node.nextSbiling() ? this.node.nextSbiling().id : ''\n      };\n    }\n  }]);\n\n  return CommandDelete;\n}();\n\nvar CommandClone = function () {\n  function CommandClone(node) {\n    _classCallCheck(this, CommandClone);\n\n    this.node = node;\n    this.copy = node.clone();\n  }\n\n  _createClass(CommandClone, [{\n    key: 'excute',\n    value: function excute() {\n      this.copy.moveAfter(this.node);\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.copy.removeFromParent();\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'new',\n        node: this.copy.toTreeViewNode(),\n        parentId: this.copy.parent ? this.copy.parent.id : '',\n        nextSblilingId: this.copy.nextSbiling() ? this.copy.nextSbiling().id : ''\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'delete',\n        nodeId: this.copy.id\n      };\n    }\n  }]);\n\n  return CommandClone;\n}();\n\nvar CommandChangeNode = function () {\n  function CommandChangeNode(node, newMeta) {\n    _classCallCheck(this, CommandChangeNode);\n\n    this.node = node;\n    this.oldMeta = JSON.parse(JSON.stringify(node.meta));\n    this.newMeta = JSON.parse(JSON.stringify(newMeta));\n  }\n\n  _createClass(CommandChangeNode, [{\n    key: 'excute',\n    value: function excute() {\n      this.node.meta = JSON.parse(JSON.stringify(this.newMeta));\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.node.meta = JSON.parse(JSON.stringify(this.oldMeta));\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'change',\n        nodeId: this.node.id,\n        meta: this.node.meta\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'change',\n        nodeId: this.node.id,\n        meta: this.node.meta\n      };\n    }\n  }]);\n\n  return CommandChangeNode;\n}();\n\nvar CommandTextEdit = function () {\n  function CommandTextEdit(node) {\n    _classCallCheck(this, CommandTextEdit);\n\n    this.node = node;\n    this.oldChildren = this.node.children;\n\n    this.node.children.forEach(function (chilid) {\n      chilid.preview();\n    });\n  }\n\n  _createClass(CommandTextEdit, [{\n    key: 'finish',\n    value: function finish() {\n      var _this3 = this;\n\n      this.node.children = rxEditor.nodeParser.parse(this.node.view.$dom.innerHTML);\n\n      this.node.children.forEach(function (child) {\n        child.parent = _this3.node;\n      });\n      this.newChildren = this.node.children;\n    }\n  }, {\n    key: 'excute',\n    value: function excute() {\n      this.node.children = this.newChildren;\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.node.children = this.oldChildren;\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'textEdit',\n        nodeId: this.node.id,\n        node: this.node.toTreeViewNode()\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'textEdit',\n        nodeId: this.node.id,\n        node: this.node.toTreeViewNode()\n      };\n    }\n  }]);\n\n  return CommandTextEdit;\n}();\n\nvar CommandLoadCanvasHtml = function () {\n  function CommandLoadCanvasHtml(newHtml) {\n    var _this4 = this;\n\n    _classCallCheck(this, CommandLoadCanvasHtml);\n\n    this.node = rxEditor.canvas;\n    this.oldChildren = this.node.children;\n    this.node.children = rxEditor.nodeParser.parse(newHtml);\n    this.node.children.forEach(function (child) {\n      child.parent = _this4.node;\n    });\n    this.newChildren = this.node.children;\n  }\n\n  _createClass(CommandLoadCanvasHtml, [{\n    key: 'excute',\n    value: function excute() {\n      this.node.children = this.newChildren;\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.node.children = this.oldChildren;\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'loadCanvasNodes',\n        nodes: this.node.toTreeViewNode().children\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'loadCanvasNodes',\n        nodes: this.node.toTreeViewNode().children\n      };\n    }\n  }]);\n\n  return CommandLoadCanvasHtml;\n}();\n\nvar CommandClearCanvas = function () {\n  function CommandClearCanvas() {\n    _classCallCheck(this, CommandClearCanvas);\n\n    this.node = rxEditor.canvas;\n    this.oldChildren = this.node.children;\n    this.node.children = [];\n    this.newChildren = this.node.children;\n  }\n\n  _createClass(CommandClearCanvas, [{\n    key: 'excute',\n    value: function excute() {\n      this.node.children = this.newChildren;\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.node.children = this.oldChildren;\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'loadCanvasNodes',\n        nodes: this.node.toTreeViewNode().children\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'loadCanvasNodes',\n        nodes: this.node.toTreeViewNode().children\n      };\n    }\n  }]);\n\n  return CommandClearCanvas;\n}();\n\nvar CommandLoadNodeHtml = function () {\n  function CommandLoadNodeHtml(node, newHtml) {\n    var _this5 = this;\n\n    _classCallCheck(this, CommandLoadNodeHtml);\n\n    this.node = node;\n    this.oldChildren = this.node.children;\n    this.oldMeta = this.node.meta;\n    this.node.children = [];\n    var nodes = rxEditor.nodeParser.parse(newHtml);\n    if (nodes.length > 0) {\n      var newNode = nodes[0];\n      newNode.children.forEach(function (child) {\n        child.parent = _this5.node;\n        _this5.node.children.push(child);\n      });\n      this.node.meta = newNode.meta;\n    }\n    this.newMeta = this.node.meta;\n    this.newChildren = this.node.children;\n  }\n\n  _createClass(CommandLoadNodeHtml, [{\n    key: 'excute',\n    value: function excute() {\n      this.node.children = this.newChildren;\n      this.node.meta = this.newMeta;\n      this.makeExcuteSchema();\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      this.node.children = this.oldChildren;\n      this.node.meta = this.oldMeta;\n      this.makeUndoSchema();\n    }\n  }, {\n    key: 'makeExcuteSchema',\n    value: function makeExcuteSchema() {\n      this.commandSchema = {\n        command: 'loadNode',\n        nodeId: this.node.id,\n        node: this.node.toTreeViewNode()\n      };\n    }\n  }, {\n    key: 'makeUndoSchema',\n    value: function makeUndoSchema() {\n      this.commandSchema = {\n        command: 'loadNode',\n        nodeId: this.node.id,\n        node: this.node.toTreeViewNode()\n      };\n    }\n  }]);\n\n  return CommandLoadNodeHtml;\n}();\n\nvar CommadManager = function () {\n  function CommadManager() {\n    _classCallCheck(this, CommadManager);\n\n    this.undoCommands = [];\n    this.redoCommands = [];\n    this.onCommandsChanged = function (canUndo, canRedo) {};\n  }\n\n  _createClass(CommadManager, [{\n    key: 'getDraggedNode',\n    value: function getDraggedNode() {\n      if (this.movingCommand) {\n        return this.movingCommand.node;\n      }\n    }\n  }, {\n    key: 'startNew',\n    value: function startNew(node) {\n      var cmd = new CommandNew(node);\n      this.startCommand(cmd);\n    }\n  }, {\n    key: 'startMove',\n    value: function startMove(node) {\n      var cmd = new CommandMove(node);\n      this.startCommand(cmd);\n    }\n  }, {\n    key: 'duplicate',\n    value: function duplicate(node) {\n      var cmd = new CommandClone(node);\n      cmd.excute();\n      this.finished(cmd);\n      cmd.node.changeToState('normalState');\n      cmd.copy.changeToState('focusState');\n    }\n  }, {\n    key: 'changeNode',\n    value: function changeNode(node, newNodeData) {\n      //node.meta = newNodeData.meta\n      var cmd = new CommandChangeNode(node, newNodeData.meta);\n      cmd.excute();\n      this.finished(cmd);\n    }\n  }, {\n    key: 'deleteNode',\n    value: function deleteNode(node) {\n      var cmd = new CommandDelete(node);\n      cmd.excute();\n      this.finished(cmd);\n      rxEditor.toolbar.hide();\n      rxEditor.focusedLabel.hide();\n    }\n  }, {\n    key: 'loadNodeHtml',\n    value: function loadNodeHtml(node, html) {\n      var cmd = new CommandLoadNodeHtml(node, html);\n      cmd.excute();\n      this.finished(cmd);\n    }\n  }, {\n    key: 'loadCanvasHtml',\n    value: function loadCanvasHtml(html) {\n      var cmd = new CommandLoadCanvasHtml(html);\n      cmd.excute();\n      this.finished(cmd);\n    }\n  }, {\n    key: 'clearCanvas',\n    value: function clearCanvas() {\n      var cmd = new CommandClearCanvas();\n      cmd.excute();\n      this.finished(cmd);\n    }\n  }, {\n    key: 'startCommand',\n    value: function startCommand(command) {\n      this.movingCommand = command;\n    }\n  }, {\n    key: 'finishMoving',\n    value: function finishMoving() {\n\n      if (this.movingCommand && this.movingCommand.node.parent) {\n        //this.movingCommand.finish()\n        this.finished(this.movingCommand);\n        this.movingCommand.node.changeToState('focusState');\n      }\n      this.movingCommand = '';\n    }\n  }, {\n    key: 'startEditText',\n    value: function startEditText(node) {\n      this.textCommand = new CommandTextEdit(node);\n    }\n  }, {\n    key: 'finishEditText',\n    value: function finishEditText() {\n      this.textCommand.finish();\n      this.finished(this.textCommand);\n      this.textCommand = '';\n    }\n  }, {\n    key: 'finished',\n    value: function finished(command) {\n      this.undoCommands.push(command);\n      this.redoCommands.length = 0;\n      this.submitChanged(command);\n    }\n  }, {\n    key: 'undo',\n    value: function undo() {\n      var command = this.undoCommands.pop();\n      command.undo();\n      this.redoCommands.push(command);\n      this.submitChanged(command);\n    }\n  }, {\n    key: 'redo',\n    value: function redo() {\n      var command = this.redoCommands.pop();\n      command.excute();\n      this.undoCommands.push(command);\n      this.submitChanged(command);\n    }\n  }, {\n    key: 'submitChanged',\n    value: function submitChanged(command) {\n      this.onCommandsChanged(this.undoCommands.length > 0, this.redoCommands.length > 0, command.commandSchema);\n    }\n  }]);\n\n  return CommadManager;\n}();\n\n/***/ }),\n\n/***/ 352:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return NodeLabel; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__ = __webpack_require__(8);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar NodeLabel = function (_RXComponent) {\n  _inherits(NodeLabel, _RXComponent);\n\n  function NodeLabel() {\n    _classCallCheck(this, NodeLabel);\n\n    var _this = _possibleConstructorReturn(this, (NodeLabel.__proto__ || Object.getPrototypeOf(NodeLabel)).call(this));\n\n    _this.cssClass('node-label');\n    _this.domAttr('title', $t('can-be-draged'));\n    _this.hide();\n    document.addEventListener('scroll', function (event) {\n      _this.refreshPosition();\n    });\n    window.addEventListener('resize', function (event) {\n      _this.refreshPosition();\n    });\n    return _this;\n  }\n\n  _createClass(NodeLabel, [{\n    key: 'refreshPosition',\n    value: function refreshPosition() {\n      this.followElement(this.node, this.offset);\n    }\n  }, {\n    key: 'show',\n    value: function show(label, node, offset) {\n      this.node = node;\n      this.offset = offset;\n      if (!node || !node.view.$dom) return;\n      _get(NodeLabel.prototype.__proto__ || Object.getPrototypeOf(NodeLabel.prototype), 'setInnerHTML', this).call(this, label);\n      this.followElement(node, offset);\n      return _get(NodeLabel.prototype.__proto__ || Object.getPrototypeOf(NodeLabel.prototype), 'show', this).call(this);\n    }\n  }, {\n    key: 'followElement',\n    value: function followElement(node, offset) {\n      if (!node || !node.view || !node.view.$dom) return;\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.x + 'px';\n        if (rect.y < 20) {\n          this.$dom.style.top = rect.y + rect.height + offset + 'px';\n        } else {\n          this.$dom.style.top = rect.y - 15 - offset + 'px';\n        }\n      }\n    }\n  }]);\n\n  return NodeLabel;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\n/***/ }),\n\n/***/ 353:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return NodeToolbar; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__ = __webpack_require__(8);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar SvgButton = function (_RXComponent) {\n  _inherits(SvgButton, _RXComponent);\n\n  function SvgButton(title, svg, on, callback) {\n    _classCallCheck(this, SvgButton);\n\n    var _this = _possibleConstructorReturn(this, (SvgButton.__proto__ || Object.getPrototypeOf(SvgButton)).call(this));\n\n    _this.cssClass('rx-button');\n    _this.domAttr('title', title);\n    _this.innerHTML = svg;\n    _this.domOn(on, callback);\n    return _this;\n  }\n\n  return SvgButton;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\nvar svgArrowUp = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"arrow-up\" class=\"svg-inline--fa fa-arrow-up fa-w-14\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z\"></path></svg>';\n\nvar svgMove = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"arrows-alt\" class=\"svg-inline--fa fa-arrows-alt fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z\"></path></svg>';\n\nvar svgEdit = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"edit\" class=\"svg-inline--fa fa-edit fa-w-18\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path fill=\"currentColor\" d=\"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z\"></path></svg>';\n\nvar svgClone = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"clone\" class=\"svg-inline--fa fa-clone fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M464 0H144c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h320c26.51 0 48-21.49 48-48v-48h48c26.51 0 48-21.49 48-48V48c0-26.51-21.49-48-48-48zM362 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h42v224c0 26.51 21.49 48 48 48h224v42a6 6 0 0 1-6 6zm96-96H150a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h308a6 6 0 0 1 6 6v308a6 6 0 0 1-6 6z\"></path></svg>';\n\nvar svgRemove = '<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"trash-alt\" class=\"svg-inline--fa fa-trash-alt fa-w-14\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z\"></path></svg>';\n\nvar NodeToolbar = function (_RXComponent2) {\n  _inherits(NodeToolbar, _RXComponent2);\n\n  function NodeToolbar() {\n    _classCallCheck(this, NodeToolbar);\n\n    var _this2 = _possibleConstructorReturn(this, (NodeToolbar.__proto__ || Object.getPrototypeOf(NodeToolbar)).call(this));\n\n    _this2.cssClass('node-toolbar');\n    _this2.hide();\n\n    _this2.duplicateBtn = new SvgButton($t('duplicate'), svgClone, 'click', function () {\n      if (rxEditor.focusedNode) {\n        rxEditor.focusedNode.duplicate(event);\n      }\n    });\n\n    _this2.pushChild(new SvgButton($t('focus-parent'), svgArrowUp, 'click', function () {\n      if (rxEditor.focusedNode) {\n        rxEditor.focusedNode.up(event);\n      }\n    }));\n    _this2.pushChild(new SvgButton($t('move'), svgMove, 'mousedown', function (event) {\n      if (rxEditor.focusedNode) {\n        rxEditor.focusedNode.begindragIcon(event);\n      }\n    })\n    //.cssStyle('cursor', 'move')\n    );\n    _this2.editButton = new SvgButton($t('edit'), svgEdit, 'mousedown', function (event) {\n      rxEditor.focusedNode.changeToState('editState');\n    });\n\n    _this2.editButton.domOn('mouseup', function (event) {\n      //move cusor to end\n      var el = rxEditor.focusedNode.view.$dom;\n      var sel = window.getSelection();\n      sel.collapse(el, 1);\n      el.focus();\n    });\n    _this2.pushChild(_this2.editButton);\n    _this2.pushChild(_this2.duplicateBtn);\n    _this2.pushChild(new SvgButton($t('delete'), svgRemove, 'click', function () {\n      if (rxEditor.focusedNode) {\n        rxEditor.focusedNode.delete(event);\n      }\n    }));\n\n    document.addEventListener('scroll', function (event) {\n      _this2.refreshPosition();\n    });\n    window.addEventListener('resize', function (event) {\n      _this2.refreshPosition();\n    });\n    return _this2;\n  }\n\n  _createClass(NodeToolbar, [{\n    key: 'refreshPosition',\n    value: function refreshPosition() {\n      this.followElement(this.node);\n    }\n  }, {\n    key: 'show',\n    value: function show(node) {\n      this.node = node;\n      if (!node || !node.view.$dom) return;\n      this.followElement(node);\n      if (this.node.rule.editable) {\n        this.editButton.show();\n      } else {\n        this.editButton.hide();\n      }\n      //if(this.node.forbidDuplicate){\n      //  this.duplicateBtn.hide()\n      //}\n      //else{\n      //  this.duplicateBtn.show()\n      //}\n      return _get(NodeToolbar.prototype.__proto__ || Object.getPrototypeOf(NodeToolbar.prototype), 'show', this).call(this);\n    }\n  }, {\n    key: 'followElement',\n    value: function followElement(node) {\n      if (!node || !node.view || !node.view.$dom) return;\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      var offsetX = this.node.rule.editable ? 0 : 25;\n      if (this.$dom) {\n        var x = rect.x + rect.width - 120;\n        x = x < 0 ? 0 : x;\n        this.$dom.style.left = x + offsetX + 'px';\n        if (rect.y < 26) {\n          this.$dom.style.top = rect.y + rect.height + 'px';\n        } else {\n          this.$dom.style.top = rect.y - 26 + 'px';\n        }\n      }\n    }\n  }]);\n\n  return NodeToolbar;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\n/***/ }),\n\n/***/ 354:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RxCursor; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__ = __webpack_require__(8);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar RxCursor = function (_RXComponent) {\n  _inherits(RxCursor, _RXComponent);\n\n  function RxCursor() {\n    _classCallCheck(this, RxCursor);\n\n    var _this = _possibleConstructorReturn(this, (RxCursor.__proto__ || Object.getPrototypeOf(RxCursor)).call(this));\n\n    _this.cssClass('rx-cursor');\n    _this.cssClass('out');\n    _this.hide();\n    return _this;\n  }\n\n  _createClass(RxCursor, [{\n    key: 'hide',\n    value: function hide() {\n      this.position = '';\n      this.node = null;\n      _get(RxCursor.prototype.__proto__ || Object.getPrototypeOf(RxCursor.prototype), 'hide', this).call(this);\n    }\n  }, {\n    key: 'show',\n    value: function show(position, node) {\n      this.position = position;\n      this.node = node;\n      if (!node || !node.view.$dom) return;\n      this.classClasses();\n      this.cssClass('rx-cursor');\n      this.cssClass(position);\n      this.node = node;\n      if (position === 'in-top') {\n        this.inTop(node);\n      }\n\n      if (position === 'in-right') {\n        this.inRight(node);\n      }\n\n      if (position === 'in-bottom') {\n        this.inBottom(node);\n      }\n\n      if (position === 'in-left') {\n        this.inLeft(node);\n      }\n\n      if (position === 'out-top') {\n        this.outTop(node);\n      }\n\n      if (position === 'out-right') {\n        this.outRight(node);\n      }\n\n      if (position === 'out-bottom') {\n        this.outBottom(node);\n      }\n\n      if (position === 'out-left') {\n        this.outLeft(node);\n      }\n\n      if (position === 'char-left') {\n        this.charLeft(node);\n      }\n\n      if (position === 'char-right') {\n        this.charRight(node);\n      }\n\n      return _get(RxCursor.prototype.__proto__ || Object.getPrototypeOf(RxCursor.prototype), 'show', this).call(this);\n    }\n  }, {\n    key: 'outTop',\n    value: function outTop(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.left + 'px';\n        this.$dom.style.top = rect.top - 2 + 'px';\n        this.$dom.style.width = rect.width + 'px';\n        this.$dom.style.height = '4px';\n      }\n    }\n  }, {\n    key: 'outRight',\n    value: function outRight(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.right - 2 + 'px';\n        this.$dom.style.right = \"auto\";\n        this.$dom.style.top = rect.top + 'px';\n        this.$dom.style.width = '4px';\n        this.$dom.style.height = rect.height + 'px';\n      }\n    }\n  }, {\n    key: 'outBottom',\n    value: function outBottom(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.x + 'px';\n        this.$dom.style.top = rect.bottom - 2 + 'px';\n        this.$dom.style.bottom = 'auto';\n        this.$dom.style.width = rect.width + 'px';\n        this.$dom.style.height = '4px';\n      }\n    }\n  }, {\n    key: 'outLeft',\n    value: function outLeft(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.left - 2 + 'px';\n        this.$dom.style.right = 'auto';\n        this.$dom.style.top = rect.top + 'px';\n        this.$dom.style.width = '4px';\n        this.$dom.style.height = rect.height + 'px';\n      }\n    }\n  }, {\n    key: 'charRight',\n    value: function charRight(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.right - 2 + 'px';\n        this.$dom.style.right = \"auto\";\n        this.$dom.style.top = rect.top + 'px';\n        this.$dom.style.width = '4px';\n        this.$dom.style.height = rect.height + 'px';\n      }\n    }\n  }, {\n    key: 'charLeft',\n    value: function charLeft(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.left - 2 + 'px';\n        this.$dom.style.right = 'auto';\n        this.$dom.style.top = rect.top + 'px';\n        this.$dom.style.width = '4px';\n        this.$dom.style.height = rect.height + 'px';\n      }\n    }\n\n    /**/\n\n  }, {\n    key: 'inTop',\n    value: function inTop(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.left + 'px';\n        this.$dom.style.top = rect.top + 1 + 'px';\n        this.$dom.style.width = rect.width + 'px';\n        this.$dom.style.height = '4px';\n      }\n    }\n  }, {\n    key: 'inRight',\n    value: function inRight(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.right - 4 + 'px';\n        this.$dom.style.right = \"auto\";\n        this.$dom.style.top = rect.top + 'px';\n        this.$dom.style.width = '4px';\n        this.$dom.style.height = rect.height + 'px';\n      }\n    }\n  }, {\n    key: 'inBottom',\n    value: function inBottom(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.x + 'px';\n        this.$dom.style.top = rect.bottom - 4 + 'px';\n        this.$dom.style.bottom = 'auto';\n        this.$dom.style.width = rect.width + 'px';\n        this.$dom.style.height = '4px';\n      }\n    }\n  }, {\n    key: 'inLeft',\n    value: function inLeft(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.left + 'px';\n        this.$dom.style.right = 'auto';\n        this.$dom.style.top = rect.top + 'px';\n        this.$dom.style.width = '4px';\n        this.$dom.style.height = rect.height + 'px';\n      }\n    }\n  }, {\n    key: 'followElement',\n    value: function followElement(node) {\n      var domElement = node.view.$dom;\n      var rect = domElement.getBoundingClientRect();\n      if (this.$dom) {\n        this.$dom.style.left = rect.x + 'px';\n        this.$dom.style.top = rect.height / 2 + 'px';\n        //if(rect.y < 20){\n        //  this.$dom.style.top = (rect.y + rect.height) + 'px'\n        //}\n        //else{\n        //  this.$dom.style.top = (rect.y - 15 - offset) + 'px'\n        //}\n\n        this.$dom.style.width = rect.width + 'px';\n      }\n    }\n  }]);\n\n  return RxCursor;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\n/***/ }),\n\n/***/ 355:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MouseFollower; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__ = __webpack_require__(8);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar MouseFollower = function (_RXComponent) {\n  _inherits(MouseFollower, _RXComponent);\n\n  function MouseFollower() {\n    _classCallCheck(this, MouseFollower);\n\n    var _this = _possibleConstructorReturn(this, (MouseFollower.__proto__ || Object.getPrototypeOf(MouseFollower)).call(this));\n\n    _this.cssClass('mouse-follower');\n    _this.hide();\n    return _this;\n  }\n\n  _createClass(MouseFollower, [{\n    key: \"active\",\n    value: function active(text) {\n      _get(MouseFollower.prototype.__proto__ || Object.getPrototypeOf(MouseFollower.prototype), \"setInnerHTML\", this).call(this, text);\n      this.isActived = true;\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      this.isActived = false;\n      _get(MouseFollower.prototype.__proto__ || Object.getPrototypeOf(MouseFollower.prototype), \"hide\", this).call(this);\n    }\n  }, {\n    key: \"followMouse\",\n    value: function followMouse(event) {\n      this.$dom.style.left = event.clientX;\n      this.$dom.style.top = event.clientY;\n      _get(MouseFollower.prototype.__proto__ || Object.getPrototypeOf(MouseFollower.prototype), \"show\", this).call(this);\n    }\n  }]);\n\n  return MouseFollower;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\n/***/ }),\n\n/***/ 356:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return MiniEditbar; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__basic_object_state__ = __webpack_require__(76);\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar EditorState = function (_ObjectState) {\n  _inherits(EditorState, _ObjectState);\n\n  function EditorState() {\n    _classCallCheck(this, EditorState);\n\n    var _this = _possibleConstructorReturn(this, (EditorState.__proto__ || Object.getPrototypeOf(EditorState)).call(this));\n\n    _this.__bold = false;\n    _this.__italic = false;\n    _this.__underline = false;\n    _this.__strikeThrough = false;\n    _this.__isLink = false;\n    return _this;\n  }\n\n  _createClass(EditorState, [{\n    key: \"bold\",\n    get: function get() {\n      return this.__bold;\n    },\n    set: function set(bold) {\n      if (this.__bold == bold) {\n        return;\n      }\n      this.__bold = bold;\n      this.distributeEvent('bold');\n    }\n  }, {\n    key: \"italic\",\n    get: function get() {\n      return this.__italic;\n    },\n    set: function set(italic) {\n      if (this.__italic == italic) {\n        return;\n      }\n      this.__italic = italic;\n      this.distributeEvent('italic');\n    }\n  }, {\n    key: \"underline\",\n    get: function get() {\n      return this.__underline;\n    },\n    set: function set(underline) {\n      if (this.__underline == underline) {\n        return;\n      }\n      this.__underline = underline;\n      this.distributeEvent('underline');\n    }\n  }, {\n    key: \"strikeThrough\",\n    get: function get() {\n      return this.__strikeThrough;\n    },\n    set: function set(strikeThrough) {\n      if (this.__strikeThrough == strikeThrough) {\n        return;\n      }\n      this.__strikeThrough = strikeThrough;\n      this.distributeEvent('strikeThrough');\n    }\n  }, {\n    key: \"isLink\",\n    get: function get() {\n      return this.__isLink;\n    },\n    set: function set(isLink) {\n      if (this.__isLink == isLink) {\n        return;\n      }\n      this.__isLink = isLink;\n      this.distributeEvent('isLink');\n    }\n  }]);\n\n  return EditorState;\n}(__WEBPACK_IMPORTED_MODULE_1__basic_object_state__[\"a\" /* ObjectState */]);\n\nvar BarButton = function (_RXComponent) {\n  _inherits(BarButton, _RXComponent);\n\n  function BarButton(title, callback) {\n    _classCallCheck(this, BarButton);\n\n    var _this2 = _possibleConstructorReturn(this, (BarButton.__proto__ || Object.getPrototypeOf(BarButton)).call(this));\n\n    _this2.cssClass('mini-button');\n    _this2.domAttr('title', title);\n    _this2.domOn('click', callback);\n    return _this2;\n  }\n\n  return BarButton;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\nvar isLink = function isLink() {\n  if (window.getSelection().toString !== '') {\n    var selection = window.getSelection();\n    selection = selection.rangeCount > 0 ? selection.getRangeAt(0) : '';\n    if (selection) {\n      if (selection.startContainer.parentNode.tagName === 'A' || selection.endContainer.parentNode.tagName === 'A') {\n        return true;\n      } else {\n        return false;\n      }\n    } else {\n      return false;\n    }\n  }\n};\n\nvar MiniEditbar = function (_RXComponent2) {\n  _inherits(MiniEditbar, _RXComponent2);\n\n  function MiniEditbar() {\n    _classCallCheck(this, MiniEditbar);\n\n    var _this3 = _possibleConstructorReturn(this, (MiniEditbar.__proto__ || Object.getPrototypeOf(MiniEditbar)).call(this));\n\n    _this3.cssClass('mini-editbar');\n    _this3.hide();\n    _this3.state = new EditorState();\n\n    _this3.domOn('mousedown', function (event) {\n      event.preventDefault();\n    });\n\n    var boldBtn = new BarButton('Bold', function () {\n      document.execCommand('bold', false, null);\n      _this3.updateButtonsState();\n    }).cssClass('icon-button').setInnerHTML('<b>B</b>');\n\n    _this3.pushChild(boldBtn);\n\n    var italicBtn = new BarButton('Italic', function () {\n      document.execCommand('italic', false, null);\n      _this3.state.italic = !_this3.state.italic;\n    }).cssClass('icon-button').setInnerHTML('<i>I</i>');\n    _this3.pushChild(italicBtn);\n\n    var underlineBtn = new BarButton('Underline', function () {\n      document.execCommand('underline', false, null);\n      _this3.updateButtonsState();\n    }).cssClass('icon-button').setInnerHTML('<u>U</u>');\n    _this3.pushChild(underlineBtn);\n\n    var strikeBtn = new BarButton('Strike', function () {\n      document.execCommand('strikeThrough', false, null);\n      _this3.updateButtonsState();\n    }).cssClass('icon-button').setInnerHTML('<strike>S</strike>');\n    _this3.pushChild(strikeBtn);\n\n    var linkBtn = new BarButton('Link', function () {\n      if (_this3.state.isLink) {\n        document.execCommand('unlink', false, null);\n      } else {\n        document.execCommand('createLink', false, '#');\n      }\n      _this3.updateButtonsState();\n    }).cssClass('icon-button').setInnerHTML('<div style=\"transform:rotate(45deg)\">⫘</div>');\n    _this3.pushChild(linkBtn);\n\n    document.onpaste = function (event) {\n      var plainText = event.clipboardData.getData('text/plain').replace(/[\\r\\n]/g, \"<br>\");\n      document.execCommand('insertHTML', false, plainText);\n      return false;\n    };\n\n    document.addEventListener('keydown', function (event) {\n      if (event.keyCode === 13) {\n        document.execCommand('insertHTML', false, '<br>');\n        event.preventDefault();\n        return false;\n      }\n    });\n\n    /*let codeBtn = new BarButton('Switch Code Editor', ()=>{\n        this.updateButtonsState()\n      })\n      .cssClass('icon-button')\n      .setInnerHTML('<div\"><></div>')\n    this.pushChild( codeBtn )\n    let btnInsert = new BarButton('Bootstrap Styles', ()=>{\n      })\n      .cssClass('mini-styles')\n      .setInnerHTML('Insert <span>▾</span>')\n    this.pushChild( btnInsert )*/\n\n    _this3.watchOne('bold', boldBtn);\n    _this3.watchOne('italic', italicBtn);\n    _this3.watchOne('underline', underlineBtn);\n    _this3.watchOne('strikeThrough', strikeBtn);\n    _this3.watchOne('isLink', linkBtn);\n    document.addEventListener('scroll', function (event) {\n      _this3.followElement(_this3.domElement);\n    });\n    window.addEventListener('resize', function (event) {\n      _this3.followElement(_this3.domElement);\n    });\n    return _this3;\n  }\n\n  _createClass(MiniEditbar, [{\n    key: \"watchOne\",\n    value: function watchOne(stateName, btn) {\n      var _this4 = this;\n\n      this.state.watch(stateName, function () {\n        if (_this4.state[stateName]) {\n          btn.cssClass('active');\n        } else {\n          btn.removeCssClass('active');\n        }\n      });\n    }\n  }, {\n    key: \"show\",\n    value: function show(followElement) {\n      var _this5 = this;\n\n      if (!followElement) return;\n      this.followElement(followElement);\n      this.updateButtonsState();\n      document.addEventListener(\"selectionchange\", function (event) {\n        _this5.updateButtonsState();\n      });\n      return _get(MiniEditbar.prototype.__proto__ || Object.getPrototypeOf(MiniEditbar.prototype), \"show\", this).call(this);\n    }\n  }, {\n    key: \"hide\",\n    value: function hide() {\n      var _this6 = this;\n\n      document.removeEventListener(\"selectionchange\", function (event) {\n        _this6.updateButtonsState();\n      });\n      return _get(MiniEditbar.prototype.__proto__ || Object.getPrototypeOf(MiniEditbar.prototype), \"hide\", this).call(this);\n    }\n  }, {\n    key: \"updateButtonsState\",\n    value: function updateButtonsState() {\n      if (!this.isShow()) {\n        return;\n      }\n      this.state.bold = document.queryCommandState('bold');\n      this.state.italic = document.queryCommandState('italic');\n      this.state.underline = document.queryCommandState('underline');\n      this.state.strikeThrough = document.queryCommandState('strikeThrough');\n      this.state.isLink = isLink();\n    }\n  }, {\n    key: \"followElement\",\n    value: function followElement(domElement) {\n      if (!domElement) return;\n      this.domElement = domElement;\n      var rect = domElement.getBoundingClientRect();\n      var height = 32;\n      if (this.$dom) {\n        this.$dom.style.left = rect.x - 1 + 'px';\n        if (rect.y < height) {\n          this.$dom.style.top = rect.y + rect.height + 'px';\n        } else {\n          this.$dom.style.top = rect.y - height + 'px';\n        }\n      }\n    }\n  }]);\n\n  return MiniEditbar;\n}(__WEBPACK_IMPORTED_MODULE_0__basic_rxcomponent__[\"a\" /* RXComponent */]);\n\n/***/ }),\n\n/***/ 357:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return NodeParser; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__nodes_class_node_js__ = __webpack_require__(358);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__nodes_tag_node_js__ = __webpack_require__(360);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__nodes_text_node_js__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__rules__ = __webpack_require__(361);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__rules_common_rule__ = __webpack_require__(80);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n\nvar NodeParser = function () {\n  function NodeParser() {\n    _classCallCheck(this, NodeParser);\n\n    this.$dom = document.createElement('div');\n  }\n\n  _createClass(NodeParser, [{\n    key: 'parse',\n    value: function parse(html) {\n      this.$dom.innerHTML = html;\n\n      //console.log(this.$dom.childNodes)\n      var nodes = [];\n      for (var i = 0; i < this.$dom.childNodes.length; i++) {\n        var node = this.paraseNode(this.$dom.childNodes[i]);\n        if (node) {\n          nodes.push(node);\n        }\n      }\n      return nodes;\n    }\n  }, {\n    key: 'paraseNode',\n    value: function paraseNode(element, parent) {\n      var node;\n      if (element.nodeType === 3) {\n        var text = element.textContent; //.trim()\n        if (!text) {\n          return '';\n        }\n        var _node = new __WEBPACK_IMPORTED_MODULE_2__nodes_text_node_js__[\"a\" /* TextNode */](text);\n        _node.parent = parent;\n        return _node;\n      }\n\n      //暂不处理注释\n      if (element.nodeType === 8) {\n        return '';\n      }\n\n      if (element.classList.contains('container')) {\n        node = new __WEBPACK_IMPORTED_MODULE_0__nodes_class_node_js__[\"a\" /* ClassNode */]('container');\n      }\n\n      var clssNode = this.parseClassNode(element);\n      node = clssNode ? clssNode : this.parseTagNode(element);\n\n      this.copyClassList(element.classList, node.meta.classList);\n      for (var i = 0; i < element.childNodes.length; i++) {\n        var child = element.childNodes[i];\n\n        var childNode = this.paraseNode(child, node);\n        if (childNode) {\n          node.children.push(childNode);\n        }\n      }\n\n      this.parseAttributes(node, element);\n      node.markDefaultMeta();\n\n      node.parent = parent;\n\n      return node;\n    }\n  }, {\n    key: 'parseAttributes',\n    value: function parseAttributes(node, element) {\n      var attrs = element.attributes;\n      for (var i = 0; i < attrs.length; i++) {\n        var attrName = attrs[i]['nodeName'];\n        var attrValue = attrs[i]['nodeValue'];\n        if (attrName.toLowerCase() !== \"class\") {\n          node.meta.attributes[attrName] = attrValue;\n        }\n      }\n    }\n  }, {\n    key: 'parseClassNode',\n    value: function parseClassNode(element) {\n      for (var ruleName in __WEBPACK_IMPORTED_MODULE_3__rules__[\"a\" /* default */].classRules) {\n        var rule = __WEBPACK_IMPORTED_MODULE_3__rules__[\"a\" /* default */].classRules[ruleName];\n        rule.classes = rule.classes ? rule.classes : [ruleName];\n\n        for (var i = 0; i < rule.classes.length; i++) {\n          var cssClass = rule.classes[i].toLowerCase();\n          if (element.classList.contains(cssClass)) {\n            var node = new __WEBPACK_IMPORTED_MODULE_0__nodes_class_node_js__[\"a\" /* ClassNode */](cssClass);\n            node.meta.tag = element.tagName.toLowerCase();\n            node.setLabel(rule.label ? rule.label : ruleName);\n            node.ruleName = ruleName;\n            node.rule = rule;\n            return node;\n          }\n        }\n      }\n    }\n  }, {\n    key: 'parseTagNode',\n    value: function parseTagNode(element) {\n      var node;\n      var elTag = element.tagName.toLowerCase();\n      for (var ruleName in __WEBPACK_IMPORTED_MODULE_3__rules__[\"a\" /* default */].tagRules) {\n        var rule = __WEBPACK_IMPORTED_MODULE_3__rules__[\"a\" /* default */].tagRules[ruleName];\n        rule.tags = rule.tags ? rule.tags : [ruleName];\n        for (var i = 0; i < rule.tags.length; i++) {\n          var tag = rule.tags[i];\n          if (elTag === tag.toLowerCase()) {\n            node = new __WEBPACK_IMPORTED_MODULE_1__nodes_tag_node_js__[\"a\" /* TagNode */](tag);\n            node.setLabel(rule.label ? rule.label : ruleName);\n            node.ruleName = ruleName;\n            node.rule = rule;\n            return node;\n          }\n        }\n      }\n      node = new __WEBPACK_IMPORTED_MODULE_1__nodes_tag_node_js__[\"a\" /* TagNode */](elTag);\n      node.ruleName = elTag;\n      node.rule = Object.assign({}, __WEBPACK_IMPORTED_MODULE_4__rules_common_rule__[\"a\" /* default */]);\n      return node;\n    }\n  }, {\n    key: 'copyClassList',\n    value: function copyClassList(from, to) {\n      from.forEach(function (cssClass) {\n        if (cssClass.indexOf('rx-_-') !== 0) {\n          to.push(cssClass);\n        }\n      });\n    }\n  }]);\n\n  return NodeParser;\n}();\n\n/***/ }),\n\n/***/ 358:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ClassNode; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__rxnode_js__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__basic_rxarray__ = __webpack_require__(4);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar ClassNode = function (_RXNode) {\n  _inherits(ClassNode, _RXNode);\n\n  function ClassNode(cssClass) {\n    _classCallCheck(this, ClassNode);\n\n    //add(cssClass, this.meta.classList)\n    var _this = _possibleConstructorReturn(this, (ClassNode.__proto__ || Object.getPrototypeOf(ClassNode)).call(this));\n\n    _this.cssClass = cssClass;\n    return _this;\n  }\n\n  _createClass(ClassNode, [{\n    key: \"make\",\n    value: function make() {\n      return new ClassNode(this.cssClass);\n    }\n  }]);\n\n  return ClassNode;\n}(__WEBPACK_IMPORTED_MODULE_0__rxnode_js__[\"a\" /* RXNode */]);\n\n/***/ }),\n\n/***/ 359:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CharNode; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node_js__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__basic_rxarray__ = __webpack_require__(4);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar CharNode = function (_Node) {\n  _inherits(CharNode, _Node);\n\n  function CharNode(char, parent) {\n    _classCallCheck(this, CharNode);\n\n    var _this = _possibleConstructorReturn(this, (CharNode.__proto__ || Object.getPrototypeOf(CharNode)).call(this));\n\n    _this.parent = parent;\n    _this.char = char;\n    _this.isCharNode = true;\n    _this.rule = {};\n    _this.rule.acceptedChildren = [];\n    _this.rule.editMarginStyle = {};\n    _this.rule.dropInMargin = 5;\n    return _this;\n  }\n\n  _createClass(CharNode, [{\n    key: 'make',\n    value: function make() {\n      return new CharNode();\n    }\n  }, {\n    key: 'changeTextnodeToCharNode',\n    value: function changeTextnodeToCharNode() {}\n  }, {\n    key: 'toViewModel',\n    value: function toViewModel() {\n      return {\n        styles: {},\n        classList: ['char-node'],\n        attributes: {},\n        innerHTML: this.char,\n        tag: 'span',\n        on: {\n          onmousemove: this.mousemove,\n          onmouseover: this.mouseover,\n          onmouseout: this.mouseout\n          //onclick:this.onclick,\n        }\n      };\n    }\n  }]);\n\n  return CharNode;\n}(__WEBPACK_IMPORTED_MODULE_0__node_js__[\"a\" /* Node */]);\n\n/***/ }),\n\n/***/ 360:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return TagNode; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__rxnode_js__ = __webpack_require__(78);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\nvar TagNode = function (_RXNode) {\n  _inherits(TagNode, _RXNode);\n\n  function TagNode(tag) {\n    _classCallCheck(this, TagNode);\n\n    var _this = _possibleConstructorReturn(this, (TagNode.__proto__ || Object.getPrototypeOf(TagNode)).call(this));\n\n    _this.meta.tag = tag;\n    _this.label = tag;\n    _this.labelToCapitalize();\n    return _this;\n  }\n\n  _createClass(TagNode, [{\n    key: 'make',\n    value: function make() {\n      var node = new TagNode(this.meta.tag);\n      node.label = this.label;\n      return node;\n    }\n  }]);\n\n  return TagNode;\n}(__WEBPACK_IMPORTED_MODULE_0__rxnode_js__[\"a\" /* RXNode */]);\n\n/***/ }),\n\n/***/ 361:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__container__ = __webpack_require__(362);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__row__ = __webpack_require__(363);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__col__ = __webpack_require__(364);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__heading__ = __webpack_require__(365);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__common_rule__ = __webpack_require__(80);\n\n\n\n\n\n\n//ruleName:\n// -container\n// -row\n// -col\n// -heading\n\n//用于判断的规则token， 全部小写，不接受大写\n//Label为空，表示label使用类名字\n//- label:''\n//空表示所有都接受，空数组表示都不接受\n//- acceptedChildren : '',\n//空和空数组都表示所有都不排除\n//- rejectChildren : '',\n//在这个边界内算是拖入内部\n//  '--responsive--' 需要根据屏幕大小被替换成 '','-sm', '-md', '-lg', '-xl'\n//classes 为空表示单一类命，跟ID一致\n//tags 为空表示tag，跟ID一致\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  classRules: {\n    \"container\": __WEBPACK_IMPORTED_MODULE_0__container__[\"a\" /* default */],\n    \"row\": __WEBPACK_IMPORTED_MODULE_1__row__[\"a\" /* default */],\n    \"col\": __WEBPACK_IMPORTED_MODULE_2__col__[\"a\" /* default */],\n    \"w-100\": Object.assign({}, __WEBPACK_IMPORTED_MODULE_4__common_rule__[\"a\" /* default */]),\n    \"alert\": Object.assign({}, __WEBPACK_IMPORTED_MODULE_4__common_rule__[\"a\" /* default */])\n  },\n\n  tagRules: {\n    heading: __WEBPACK_IMPORTED_MODULE_3__heading__[\"a\" /* default */]\n  }\n});\n\n/***/ }),\n\n/***/ 362:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  dropInMargin: 10,\n  editable: false,\n  editMarginStyle: {\n    paddingX: '30px',\n    paddingY: '30px'\n  },\n  //没有子元素，显示空白\n  empertyMargin: true,\n\n  rejectChildren: ['col', 'thead', 'tbody', 'th', 'tr', 'td']\n});\n\n/***/ }),\n\n/***/ 363:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  dropInMargin: 10,\n  editable: false,\n  editMarginStyle: {\n    paddingX: '20px',\n    paddingY: '20px'\n  },\n  //没有子元素，显示空白\n  empertyMargin: true,\n  acceptChildren: ['col', 'w-100']\n});\n\n/***/ }),\n\n/***/ 364:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  label: 'column',\n  dropInMargin: 10,\n  editable: true,\n  editMarginStyle: {\n    paddingX: '20px',\n    paddingY: '20px'\n  },\n  //没有子元素，显示空白\n  empertyMargin: true,\n  classes: ['col', 'col-1', 'col-2', 'col-3', 'col-4', 'col-5', 'col-6', 'col-7', 'col-8', 'col-9', 'col-10', 'col-11', 'col-12', 'col-sm', 'col-sm-1', 'col-sm-2', 'col-sm-3', 'col-sm-4', 'col-sm-5', 'col-sm-6', 'col-sm-7', 'col-sm-8', 'col-sm-9', 'col-sm-10', 'col-sm-11', 'col-sm-12', 'col-md', 'col-md-1', 'col-md-2', 'col-md-3', 'col-md-4', 'col-md-5', 'col-md-6', 'col-md-7', 'col-md-8', 'col-md-9', 'col-md-10', 'col-md-11', 'col-md-12', 'col-lg', 'col-lg-1', 'col-lg-2', 'col-lg-3', 'col-lg-4', 'col-lg-5', 'col-lg-6', 'col-lg-7', 'col-lg-8', 'col-lg-9', 'col-lg-10', 'col-lg-11', 'col-lg-12', 'col-xl', 'col-xl-1', 'col-xl-2', 'col-xl-3', 'col-xl-4', 'col-xl-5', 'col-xl-6', 'col-xl-7', 'col-xl-8', 'col-xl-9', 'col-xl-10', 'col-xl-11', 'col-xl-12'],\n  rejectChildren: ['col', 'thead', 'tbody', 'th', 'tr', 'td']\n});\n\n/***/ }),\n\n/***/ 365:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  label: \"Heading\",\n  tags: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\n  editable: true,\n  editMarginStyle: {\n    paddingX: '5px',\n    paddingY: '5px'\n  }\n});\n\n/***/ }),\n\n/***/ 4:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = first;\n/* harmony export (immutable) */ __webpack_exports__[\"h\"] = last;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = before;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = after;\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = insertBefore;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = insertAfter;\n/* harmony export (immutable) */ __webpack_exports__[\"i\"] = remove;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = add;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = contains;\n/* harmony export (immutable) */ __webpack_exports__[\"j\"] = tongleOnCondition;\n/* unused harmony export clear */\nfunction first(array) {\n  if (array.length > 0) {\n    return array[0];\n  }\n}\n\nfunction last(array) {\n  if (array.length > 0) {\n    return array[array.length - 1];\n  }\n}\n\nfunction before(refence, array) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === refence && i > 0) {\n      return array[i - 1];\n    }\n  }\n}\n\nfunction after(refence, array) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === refence && i < array.length) {\n      return array[i + 1];\n    }\n  }\n}\n\nfunction insertBefore(child, refence, array) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === refence) {\n      array.splice(i, 0, child);\n      return;\n    }\n  }\n\n  array.push(child);\n}\n\nfunction insertAfter(child, refence, array) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === refence) {\n      array.splice(i + 1, 0, child);\n      return;\n    }\n  }\n}\n\nfunction remove(node, array) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === node) {\n      array.splice(i, 1);\n      break;\n    }\n  }\n}\n\nfunction add(node, array) {\n  if (!contains(node, array)) {\n    array.push(node);\n  }\n}\n\nfunction contains(node, array) {\n  for (var i = 0; i < array.length; i++) {\n    if (array[i] === node) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nfunction tongleOnCondition(condition, node, array) {\n  if (condition) {\n    add(node, array);\n  } else {\n    remove(node, array);\n  }\n}\n\nfunction clear(array) {\n  array.length = 0;\n}\n\n/***/ }),\n\n/***/ 76:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return ObjectState; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__rxarray__ = __webpack_require__(4);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar ObjectState = function () {\n  function ObjectState() {\n    _classCallCheck(this, ObjectState);\n\n    this.envetHandlers = {};\n  }\n\n  _createClass(ObjectState, [{\n    key: 'watch',\n    value: function watch(attribute, callbackFunction) {\n      if (!this.envetHandlers[attribute]) {\n        this.envetHandlers[attribute] = [];\n      }\n      if (!Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"d\" /* contains */])(callbackFunction, this.envetHandlers[attribute])) {\n        this.envetHandlers[attribute].push(callbackFunction);\n      }\n    }\n  }, {\n    key: 'cancelWatch',\n    value: function cancelWatch(attribute, callbackFunction) {\n      console.assert(this.envetHandlers[attribute], 'EditorState: did not register this event handler');\n      Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"i\" /* remove */])(callbackFunction, this.envetHandlers[attribute]);\n    }\n  }, {\n    key: 'distributeEvent',\n    value: function distributeEvent(attribute) {\n      this.distributeEventWithoutGlobal(attribute);\n      this.distributeEventWithoutGlobal('changed'); //全局事件\n    }\n  }, {\n    key: 'distributeEventWithoutGlobal',\n    value: function distributeEventWithoutGlobal(attribute) {\n      var _this = this;\n\n      var handlers = this.envetHandlers[attribute];\n      if (handlers) {\n        handlers.forEach(function (handler) {\n          handler(_this);\n        });\n      }\n    }\n  }]);\n\n  return ObjectState;\n}();\n\n/***/ }),\n\n/***/ 77:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RXEditorCommandProxy; });\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar RXEditorCommandProxy = function () {\n  function RXEditorCommandProxy(pageId) {\n    var _this = this;\n\n    _classCallCheck(this, RXEditorCommandProxy);\n\n    this.pageId = pageId;\n    window.addEventListener(\"message\", function (event) {\n      if (_this.pageId === event.data.pageId) {\n        _this.handleMessage(event.data);\n      }\n    });\n\n    this.focusNode = function (node, pageId) {\n      _this.sendMessage({\n        name: 'focusNode',\n        pageId: pageId,\n        node: {\n          id: node.id,\n          ruleName: node.ruleName,\n          meta: node.meta,\n          defaultMeta: node.defaultMeta,\n          optionsSchema: node.rule.optionsSchema,\n          htmlCode: node.htmlCode\n        }\n      });\n    };\n\n    this.unFocusNode = function (node) {\n      _this.sendMessage({\n        name: 'unFocusNode',\n        id: node.id\n      });\n    };\n\n    document.addEventListener('mouseup', function (event) {\n      _this.sendMessage({\n        name: 'canvasMouseup'\n      });\n    });\n\n    document.addEventListener('mousemove', function (event) {\n      _this.canvasMouseMove(event);\n    });\n  }\n\n  _createClass(RXEditorCommandProxy, [{\n    key: 'canvasMouseMove',\n    value: function canvasMouseMove(event) {\n      this.sendMessage({\n        name: 'canvasMouseMove',\n        event: {\n          screenX: event.screenX,\n          screenY: event.screenY\n        }\n      });\n    }\n  }, {\n    key: 'rxeditorReady',\n    value: function rxeditorReady() {\n      this.sendMessage({\n        name: 'rxeditorReady'\n      });\n    }\n  }, {\n    key: 'commandExcuted',\n    value: function commandExcuted(canUndo, canRedo, commandSchema) {\n      this.sendMessage({\n        name: 'commandExcuted',\n        canUndo: canUndo,\n        canRedo: canRedo,\n        commandSchema: commandSchema\n      });\n    }\n  }, {\n    key: 'takeOverDraggingByWorkspace',\n    value: function takeOverDraggingByWorkspace() {\n      this.sendMessage({\n        name: 'takeOverDraggingByWorkspace'\n      });\n    }\n  }, {\n    key: 'saveCodeFiles',\n    value: function saveCodeFiles(innerHTML, json) {\n      this.sendMessage({\n        name: 'saveCodeFiles',\n        innerHTML: innerHTML,\n        json: json\n      });\n    }\n  }, {\n    key: 'handleMessage',\n    value: function handleMessage(message) {\n      //console.log('received:' + message.name + \":\" + message.rxNameId)\n      switch (message.name) {\n        case 'requestAssemble':\n          var loadedData = this.serveForRXEditor.assembleWithTheme(message.theme);\n          this.sendMessage({\n            name: 'replyAssemble',\n            toolbox: loadedData.toolbox,\n            treeViewNodes: loadedData.treeViewNodes\n          });\n          break;\n        case 'draggingFromToolbox':\n          this.serveForRXEditor.dragFromToolbox(message.item);\n          break;\n        case 'endDragFromToolbox':\n          this.serveForRXEditor.endDragFromToolbox(message.rxNameId);\n          break;\n        case 'changeCanvasState':\n          this.serveForRXEditor.changeCanvasState(message.state);\n          break;\n        case 'nodeChanged':\n          this.serveForRXEditor.nodeChanged(message.node);\n          break;\n        case 'undo':\n          this.serveForRXEditor.undo();\n          break;\n        case 'redo':\n          this.serveForRXEditor.redo();\n          break;\n        //case 'download':\n        //  this.serveForRXEditor.download()\n        //  break;\n        case 'clearCanvas':\n          this.serveForRXEditor.clearCanvas();\n          break;\n        case 'changeTheme':\n          this.serveForRXEditor.changeTheme(message.theme);\n          break;\n        case 'focusNodeFromShell':\n          this.serveForRXEditor.focusNodeFromShell(message.node);\n          break;\n        case 'duplicateNodeFromShell':\n          this.serveForRXEditor.duplicateNodeFromShell(message.id);\n          break;\n        case 'removeNodeFromShell':\n          this.serveForRXEditor.removeNodeFromShell(message.id);\n          break;\n        case 'requestHtmlCode':\n          var htmlCode = this.serveForRXEditor.requestHtmlCode();\n          this.sendMessage({\n            name: 'replyHtmlCode',\n            htmlCode: htmlCode\n          });\n          break;\n        case 'loadHtml':\n          this.serveForRXEditor.loadHtml(message.html, message.id);\n          break;\n        case 'setInlineFile':\n          this.serveForRXEditor.setInlineFile(message.file);\n          break;\n      }\n    }\n  }, {\n    key: 'sendMessage',\n    value: function sendMessage(message) {\n      message.pageId = this.pageId;\n      message.canvasHeight = document.body.scrollHeight;\n      window.parent.postMessage(message, '/');\n    }\n  }]);\n\n  return RXEditorCommandProxy;\n}();\n\n/***/ }),\n\n/***/ 78:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RXNode; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__text_node__ = __webpack_require__(79);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\nvar RXNode = function (_Node) {\n  _inherits(RXNode, _Node);\n\n  function RXNode() {\n    _classCallCheck(this, RXNode);\n\n    return _possibleConstructorReturn(this, (RXNode.__proto__ || Object.getPrototypeOf(RXNode)).call(this));\n  }\n\n  _createClass(RXNode, [{\n    key: \"clone\",\n    value: function clone() {\n      var copy = _get(RXNode.prototype.__proto__ || Object.getPrototypeOf(RXNode.prototype), \"clone\", this).call(this);\n      copy.meta = JSON.parse(JSON.stringify(this.meta));\n      copy.defaultMeta = JSON.parse(JSON.stringify(this.defaultMeta));\n      copy.label = this.label;\n\n      return copy;\n    }\n  }, {\n    key: \"setLabel\",\n    value: function setLabel(label) {\n      this.label = label;\n      this.labelToCapitalize();\n      return this;\n    }\n  }, {\n    key: \"labelToCapitalize\",\n    value: function labelToCapitalize() {\n      var label = this.label;\n      this.label = label.replace(label[0], label[0].toUpperCase());\n    }\n  }, {\n    key: \"toViewModel\",\n    value: function toViewModel() {\n      var model = _get(RXNode.prototype.__proto__ || Object.getPrototypeOf(RXNode.prototype), \"toViewModel\", this).call(this);\n      this.baseMetaToModel(model);\n\n      if (this.meta.innerHTML) {\n        model.innerHTML = this.meta.innerHTML;\n      }\n\n      return model;\n    }\n  }, {\n    key: \"toHtmlModel\",\n    value: function toHtmlModel() {\n      var model = _get(RXNode.prototype.__proto__ || Object.getPrototypeOf(RXNode.prototype), \"toHtmlModel\", this).call(this);\n      this.baseMetaToModel(model);\n      return model;\n    }\n  }, {\n    key: \"baseMetaToModel\",\n    value: function baseMetaToModel(model) {\n      var meta = this.meta;\n      model.tag = meta.tag;\n      model.innerHTML = meta.innerHTML;\n      model.classList.push.apply(model.classList, meta.classList);\n      Object.assign(model.styles, meta.styles);\n      Object.assign(model.attributes, meta.attributes);\n    }\n  }, {\n    key: \"setTag\",\n    value: function setTag(tag) {\n      return this.setField('tag', tag);\n    }\n  }, {\n    key: \"addClass\",\n    value: function addClass(className) {\n      if (!className) {\n        return this;\n      }\n      this.meta.classList.push(className);\n      return this;\n    }\n  }, {\n    key: \"setAttribute\",\n    value: function setAttribute(attrName, value) {\n      this.meta.attributes[attrName] = value;\n      return this;\n    }\n  }, {\n    key: \"changeTextnodeToCharNode\",\n    value: function changeTextnodeToCharNode() {\n      var _this2 = this;\n\n      var children = [];\n      this.children.forEach(function (child) {\n        if (child.isTextNode) {\n          children.push.apply(children, child.charNodes());\n          _this2.isCharState = true;\n        } else {\n          children.push(child);\n        }\n      });\n\n      this.children = children;\n      this.render();\n    }\n  }, {\n    key: \"changeCharNodeToTextNode\",\n    value: function changeCharNodeToTextNode() {\n      var _this3 = this;\n\n      var children = [];\n      var textNode = null;\n      this.children.forEach(function (child) {\n        if (child.isCharNode) {\n          var prev = child.previousSbiling();\n          if (!prev || !prev.isCharNode) {\n            textNode = new __WEBPACK_IMPORTED_MODULE_1__text_node__[\"a\" /* TextNode */]('');\n            textNode.parent = _this3;\n            children.push(textNode);\n          }\n\n          textNode.text += child.char;\n        } else {\n          children.push(child);\n        }\n      });\n      this.children = children;\n      this.render();\n      this.isCharState = false;\n    }\n  }, {\n    key: \"clearCharNodes\",\n    value: function clearCharNodes() {\n      if (this.isCharState) {\n        this.changeCharNodeToTextNode();\n      }\n      _get(RXNode.prototype.__proto__ || Object.getPrototypeOf(RXNode.prototype), \"clearCharNodes\", this).call(this);\n    }\n  }]);\n\n  return RXNode;\n}(__WEBPACK_IMPORTED_MODULE_0__node__[\"a\" /* Node */]);\n\n/***/ }),\n\n/***/ 79:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return TextNode; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__char_node__ = __webpack_require__(359);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar TextNode = function () {\n  function TextNode(text) {\n    _classCallCheck(this, TextNode);\n\n    this.text = text;\n    this.seedId();\n    this.isTextNode = true;\n  }\n\n  _createClass(TextNode, [{\n    key: \"seedId\",\n    value: function seedId() {\n      if (!TextNode.idSeed) TextNode.idSeed = 1;\n      TextNode.idSeed++;\n      this.id = \"text\" + TextNode.idSeed;\n    }\n  }, {\n    key: \"make\",\n    value: function make() {\n      return new TextNode(this.text);\n    }\n  }, {\n    key: \"clone\",\n    value: function clone() {\n      var copy = this.make();\n      return copy;\n    }\n  }, {\n    key: \"getParentViewDomElement\",\n    value: function getParentViewDomElement() {\n      return this.parent.view.$dom;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      //this.view.render(this.toViewModel(), this.getParentViewDomElement())\n      var parentDom = this.getParentViewDomElement();\n      if (parentDom) {\n        parentDom.appendChild(document.createTextNode(this.text));\n      }\n    }\n  }, {\n    key: \"renderHtml\",\n    value: function renderHtml(parentDomElement) {\n      if (parentDomElement) {\n        parentDomElement.appendChild(document.createTextNode(this.text));\n      }\n    }\n  }, {\n    key: \"renderMouseFollower\",\n    value: function renderMouseFollower(parentDomElement) {\n      var mouseFollower = document.createTextNode(this.text);\n      parentDomElement.appendChild(mouseFollower);\n      return mouseFollower;\n    }\n  }, {\n    key: \"preview\",\n    value: function preview() {}\n  }, {\n    key: \"nodeChanged\",\n    value: function nodeChanged() {}\n  }, {\n    key: \"refreshState\",\n    value: function refreshState() {}\n  }, {\n    key: \"clearDraggedoverStates\",\n    value: function clearDraggedoverStates() {}\n  }, {\n    key: \"clearActiveStates\",\n    value: function clearActiveStates() {}\n  }, {\n    key: \"clearFocusAndEditStates\",\n    value: function clearFocusAndEditStates() {}\n  }, {\n    key: \"clearCharNodes\",\n    value: function clearCharNodes() {}\n  }, {\n    key: \"draggedToFoused\",\n    value: function draggedToFoused() {}\n  }, {\n    key: \"focusNode\",\n    value: function focusNode() {}\n  }, {\n    key: \"allToNormalState\",\n    value: function allToNormalState() {}\n  }, {\n    key: \"toTreeViewNode\",\n    value: function toTreeViewNode() {\n      return null;\n    }\n  }, {\n    key: \"getNodeById\",\n    value: function getNodeById() {}\n  }, {\n    key: \"charNodes\",\n    value: function charNodes() {\n      var nodes = [];\n      for (var i = 0; i < this.text.length; i++) {\n        nodes.push(new __WEBPACK_IMPORTED_MODULE_0__char_node__[\"a\" /* CharNode */](this.text[i], this.parent));\n      }\n      return nodes;\n    }\n  }]);\n\n  return TextNode;\n}();\n\n/***/ }),\n\n/***/ 8:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RXComponent; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__rxarray__ = __webpack_require__(4);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar RXComponent = function () {\n  function RXComponent() {\n    var elementName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'div';\n\n    _classCallCheck(this, RXComponent);\n\n    this.children = [];\n    this.classList = [];\n    this.style = {};\n    this.attrs = {};\n    this.domOns = {};\n    this.elementName = elementName;\n  }\n\n  _createClass(RXComponent, [{\n    key: 'on',\n    value: function on(eventName, callback) {\n      this[eventName] = callback;\n      return this;\n    }\n  }, {\n    key: 'off',\n    value: function off(eventName) {\n      delete this[eventName];\n      return this;\n    }\n  }, {\n    key: 'domOn',\n    value: function domOn(name, callback) {\n      if (this.$dom) {\n        this.$dom.addEventListener(name, callback);\n      }\n      this.domOns[name] = callback;\n      return this;\n    }\n  }, {\n    key: 'domOff',\n    value: function domOff(name, callback) {\n      if (this.$dom) {\n        this.$dom.removeEventListener(name, callback);\n      }\n      delete this.domOns[name];\n      return this;\n    }\n  }, {\n    key: 'pushChild',\n    value: function pushChild(child) {\n      this.children.push(child);\n      return this;\n    }\n  }, {\n    key: 'unshiftChild',\n    value: function unshiftChild(child) {\n      this.children.unshift(child);\n      return this;\n    }\n  }, {\n    key: 'cssClass',\n    value: function cssClass(className) {\n      Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"a\" /* add */])(className, this.classList);\n      if (this.$dom) {\n        this.$dom.classList.add(className);\n      }\n      return this;\n    }\n  }, {\n    key: 'removeCssClass',\n    value: function removeCssClass(className) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"d\" /* contains */])(className, this.classList)) {\n        Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"i\" /* remove */])(className, this.classList);\n        if (this.$dom && this.$dom.classList.contains(className)) {\n          this.$dom.classList.remove(className);\n        }\n      }\n      return this;\n    }\n  }, {\n    key: 'cssStyle',\n    value: function cssStyle(name, value) {\n      this.style[name] = value;\n      return this;\n    }\n  }, {\n    key: 'removeCssStyle',\n    value: function removeCssStyle(name) {\n      delete this.style[name];\n    }\n  }, {\n    key: 'domAttr',\n    value: function domAttr(name, value) {\n      this.attrs[name] = value;\n      return this;\n    }\n  }, {\n    key: 'removeDomAttr',\n    value: function removeDomAttr(name) {\n      delete this.attrs[name];\n      return this;\n    }\n  }, {\n    key: 'tongle',\n    value: function tongle(cssClass) {\n      if (Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"d\" /* contains */])(cssClass, this.classList)) {\n        Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"i\" /* remove */])(cssClass, this.classList);\n        if (this.$dom) {\n          Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"i\" /* remove */])(cssClass, this.$dom.classList);\n        }\n      } else {\n        Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"a\" /* add */])(cssClass, this.classList);\n        if (this.$dom) {\n          Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"a\" /* add */])(cssClass, this.$dom.classList);\n        }\n      }\n    }\n    //setInnerHTML(innerHTML){\n    //  this.innerHTML = innerHTML\n    //  return this\n    //}\n\n  }, {\n    key: 'render',\n    value: function render(parentElement) {\n      var _this = this;\n\n      this.$dom = document.createElement(this.elementName);\n      parentElement.appendChild(this.$dom);\n\n      if (this.innerHTML) {\n        this.$dom.innerHTML = this.innerHTML;\n      }\n\n      for (var styleName in this.style) {\n        this.$dom.style[styleName] = this.style[styleName];\n      }\n\n      this.classList.forEach(function (className) {\n        _this.$dom.classList.add(className);\n      });\n\n      for (var attrName in this.attrs) {\n        this.$dom[attrName] = this.attrs[attrName];\n      }\n\n      for (var eventName in this.domOns) {\n        this.$dom.addEventListener(eventName, this.domOns[eventName]);\n      }\n\n      this.children.forEach(function (child) {\n        child.render(_this.$dom);\n      });\n      return this;\n    }\n  }, {\n    key: 'refresh',\n    value: function refresh() {\n      if (this.$dom) {\n        var parentDomElement = this.$dom.parentNode;\n        this.destory();\n        this.render(parentDomElement);\n      }\n    }\n  }, {\n    key: 'setInnerHTML',\n    value: function setInnerHTML(innerHTML) {\n      this.innerHTML = innerHTML;\n      if (this.$dom) {\n        this.$dom.innerHTML = innerHTML;\n      }\n      return this;\n    }\n  }, {\n    key: 'destory',\n    value: function destory() {\n      this.$dom.parentNode.removeChild(this.$dom);\n      this.$dom = '';\n    }\n  }, {\n    key: 'removeChild',\n    value: function removeChild(node) {\n      Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"i\" /* remove */])(node, this.children);\n      if (this.$dom && node.$dom && this.$dom.contains(node.$dom)) {\n        this.$dom.removeChild(node.$dom);\n      }\n    }\n  }, {\n    key: 'clearChild',\n    value: function clearChild() {\n      this.children = new RXArray();\n    }\n  }, {\n    key: 'classClasses',\n    value: function classClasses() {\n      var dom = this.$dom;\n      if (dom) {\n        this.classList.forEach(function (cssClass) {\n          //console.log(cssClass)\n          dom.classList.remove(cssClass);\n        });\n      }\n      this.classList.length = 0;\n    }\n  }, {\n    key: 'show',\n    value: function show() {\n      this.style.display = 'flex';\n      if (this.$dom) {\n        this.$dom.style.display = 'flex';\n      }\n      return this;\n    }\n  }, {\n    key: 'isShow',\n    value: function isShow() {\n      return this.style.display !== 'none';\n    }\n  }, {\n    key: 'hide',\n    value: function hide() {\n      this.style.display = 'none';\n      if (this.$dom) {\n        this.$dom.style.display = 'none';\n      }\n      return this;\n    }\n  }, {\n    key: 'insertBefore',\n    value: function insertBefore(child, refence) {\n      Object(__WEBPACK_IMPORTED_MODULE_0__rxarray__[\"g\" /* insertBefore */])(child, refence, this.children);\n    }\n  }]);\n\n  return RXComponent;\n}();\n\n/***/ }),\n\n/***/ 80:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  dropInMargin: 10,\n  editable: true,\n  editMarginStyle: {\n    paddingX: '10px',\n    paddingY: '10px'\n  },\n  //没有子元素，显示空白\n  empertyMargin: false,\n  rejectChildren: ['col', 'thead', 'tbody', 'th', 'tr', 'td']\n});\n\n/***/ })\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// core.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 344);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7882b5c02e7a58804056","import {NodeView} from \"./node-view\"\nimport {add, remove, first, last, insertBefore,insertAfter, contains, after, before} from \"../basic/rxarray\"\nimport {NormalState, ActiveState, FocusState, DragoverState, DisableState, DraggedState, EditState, PreviewState} from \"./node-state\"\n\nfunction insterAfterDom(newElement,targetElement){\n  var parent = targetElement.parentNode;\n  if(parent.lastChild == targetElement){\n    parent.appendChild(newElement);\n  }\n  else{\n    parent.insertBefore(newElement,targetElement.nextSibling);\n  }              \n}\n\nexport class Node{\n  constructor() {\n    this.seedId()\n    //this.mouseFollowerWidth =  '200px'\n  \tthis.children = []\n  \tthis.view = new NodeView()\n\n    //基础数据，持久化也是这部分数据\n    this.meta = {\n      tag : 'div',\n      classList : [],\n      styles : {},\n      attributes : {},\n    }\n\n    this.defaultMeta = {\n      tag : 'div',\n      classList : [],\n      styles : {},\n      attributes : {},\n    }\n    \n    this.initStates()\n\n    this.mouseFollower = {\n      offsetX:10,\n      offsetY:0\n    }\n\n    this.begindrag = (event)=>{\n      event.stopPropagation()\n      this.state.onBegindrag(event)\n    }\n\n    this.begindragLabel = (event)=>{\n      if(this.view.$dom){\n        this.mouseFollower.offsetX = event.offsetX\n        this.mouseFollower.offsetY = -18 + event.offsetY\n      }\n      this.begindrag(event)\n    }\n\n    this.begindragIcon = (event)=>{\n      if(this.view.$dom){\n        this.mouseFollower.offsetX = this.view.$dom.clientWidth - 96 + event.offsetX\n        this.mouseFollower.offsetY = -24 + event.offsetY\n      }\n      this.begindrag(event)\n    }\n\n    this.mousemove = (event)=>{\n      event.stopPropagation()\n      this.state.onMousemove(event)\n      rxEditor.canvasMouseMove(event)\n    }\n    this.mouseover = (event)=>{\n      event.stopPropagation()\n      this.state.onMouseover(event)\n    }\n    this.mouseout = (event)=>{\n      event.stopPropagation()\n      this.state.onMouseout(event)\n    }\n\n    this.onclick = (event)=>{\n      event.stopPropagation()\n      this.state.onClick(event)\n    }\n\n    this.duplicate = ()=>{\n      this.changeToState('normalState')\n      rxEditor.commandManager.duplicate(this)\n      rxEditor.render()\n    }\n\n    this.up = (event)=>{\n      if(this.parent){\n        this.changeToState('normalState')\n        this.parent.changeToState('focusState')\n        event.stopPropagation()\n      }\n    }\n\n    this.delete =()=>{\n      //if(confirm(\"Are you sure to delete?\")){\n        this.changeToState('normalState')\n        rxEditor.commandManager.deleteNode(this)\n        rxEditor.render()\n      //}\n    }\n\n    this.stateChanged = (oldState, newState)=>{\n      oldState.leave()\n      newState.enter()\n      rxEditor.nodeStateChanged(this, oldState, newState)\n    }\n\n  }\n\n  seedId(){\n    if(!Node.idSeed) Node.idSeed = 1\n    Node.idSeed ++\n    this.id = Node.idSeed\n  }\n\n  initStates(){\n    this.normalState = new NormalState(this)\n    this.activeState = new ActiveState(this)\n    this.focusState = new FocusState(this)\n    this.dragoverState = new DragoverState(this)\n    this.draggedState = new DraggedState(this)\n    this.disableState = new DisableState(this)\n    this.editState = new EditState(this)\n    this.previewState = new PreviewState(this)\n    this.state = this.normalState\n  }\n\n  markDefaultMeta(){\n    this.defaultMeta.tag = this.meta.tag\n    this.defaultMeta.classList = this.meta.classList.concat()\n    this.defaultMeta.attributes = Object.assign({}, this.meta.attributes) \n    this.defaultMeta.styles = Object.assign({}, this.meta.styles) \n  }\n\n  changeToState(stateName){\n    if(this.state === this[stateName]) return\n    let oldState = this.state\n    this.state = this[stateName]\n    this.refreshState()\n    this.stateChanged(oldState, this[stateName])\n  }\n\n  render(){\n    this.view.render(this.toViewModel(), this.getParentViewDomElement())\n    this.children.forEach(function(child){  \n      child.render()\n    })\n  }\n\n  renderHtml(parentDomElement){\n    let dom = this.view.renderHtml(this.toHtmlModel(), parentDomElement)\n    this.children.forEach((child)=>{  \n      child.renderHtml(dom)\n    })\n\n    parentDomElement.appendChild(dom)\n    return dom\n  }\n\n  refreshState(){\n    this.view.refreshState(this.toViewModel())\n    this.children.forEach(function(child){  \n      child.refreshState()\n    })\n  }\n\n  clearDraggedoverStates(){\n    if(this.state === this.dragoverState){\n      this.changeToState('normalState')\n    }\n    this.children.forEach(function(child){  \n      child.clearDraggedoverStates()\n    })\n  }\n\n  clearActiveStates(){\n    if(this.state === this.activeState){\n      this.changeToState('normalState')\n    }\n    this.children.forEach(function(child){  \n      child.clearActiveStates()\n    })\n  }\n\n  clearFocusAndEditStates(){\n    if(this.state === this.focusState || this.state === this.editState){\n      this.changeToState('normalState')\n    }\n    this.children.forEach(function(child){  \n      child.clearFocusAndEditStates()\n    })\n  }\n\n  allToNormalState(){\n    this.changeToState('normalState')\n    this.children.forEach((child)=>{  \n      child.allToNormalState()\n    })\n  }\n\n  draggedToFoused(){\n    if(this.state === this.draggedState){\n      this.changeToState('focusState')\n    }\n    this.children.forEach(function(child){  \n      child.draggedToFoused()\n    })\n  }\n\n  getParentViewDomElement(){\n    return this.parent.view.$dom\n  }\n\n  firstChild(){\n    return first(this.children)\n  }\n\n  nextSbiling(){\n    if(this.parent){\n      return after(this, this.parent.children) \n    }\n  }\n\n  previousSbiling(){\n    if(this.parent){\n      return before(this, this.parent.children) \n    }\n  }\n\n  moveInTop(targetParent){\n    if(first(targetParent.children) !== this){\n      this.removeFromParent()\n      targetParent.unshiftChild(this)\n      targetParent.render()\n    }\n  }\n\n  moveIn(targetParent){\n    if(last(targetParent.children) !== this){\n      this.removeFromParent()\n      targetParent.pushChild(this)\n      targetParent.render()\n    }\n  }\n\n  moveBefore(brother){\n    if(before(brother, this.children) !== this){\n      this.removeFromParent()\n      this.parent = brother.parent\n      insertBefore(this, brother, brother.parent.children);\n      this.parent.render()\n    }\n  }\n\n  moveAfter(brother){\n    if(after(brother, this.children) !== this){\n      this.removeFromParent()\n      this.parent = brother.parent\n      insertAfter(this, brother, brother.parent.children);\n      this.parent.render()\n    }\n  }\n\n  removeFromParent(){\n    if(this.parent){\n      remove(this, this.parent.children)\n      this.parent.render()\n    }\n  }\n\n  unshiftChild(child){\n    child.parent = this\n    this.children.unshift(child) \n    return this\n  }\n\n  pushChild(child){\n    child.parent = this\n    add(child, this.children) \n    return this\n  }\n\n  insertAfterSelf(brother){\n    brother.parent = this.parent\n    insertAfter(brother, this, this.parent.children);\n    return this\n  }\n\n  clone(){\n    let copy = this.make()\n    // /console.log(copy)\n    copy.rule = JSON.parse(JSON.stringify(this.rule))\n    copy.ruleName = this.ruleName\n    this.children.forEach((child)=>{  \n      copy.pushChild(child.clone())\n    })\n    return copy\n  }\n\n  canAccept(child){\n    let acceptedChildren = this.rule ? this.rule.acceptedChildren : ''\n    if(acceptedChildren  && acceptedChildren.length == 0){\n      return false\n    }\n\n    if(acceptedChildren && !this.containsInAccepted(child)){\n      return false\n    }\n\n    if(!acceptedChildren && this.containsInExcept(child)){\n      return false\n    }\n    return true\n  }\n\n\n  containsInAccepted(child){\n    let childRuleName = child.ruleName\n    let acceptedChildren = this.rule ? this.rule.acceptedChildren : ''\n    for(var i = 0; i < acceptedChildren.length; i++){\n      if(acceptedChildren[i] === childRuleName){\n        return true\n      }\n    }\n\n    return false\n  }\n\n  containsInExcept(child){\n    let childRuleName = child.ruleName\n    let rejectChildren = this.rule ? this.rule.rejectChildren : ''\n    if(rejectChildren){\n      for(var i = 0; i < rejectChildren.length; i++){\n        if(rejectChildren[i] === childRuleName){\n          return true\n        }\n      }\n    }\n\n    return false    \n  }\n\n  toViewModel(){\n    let model = this.state.stateModel()\n\n    model.on = {\n      onmousemove:this.mousemove,\n      onmouseover:this.mouseover,\n      onmouseout:this.mouseout,\n      //onmouseup:this.mouseup,\n      onclick:this.onclick,\n    }\n\n    return model\n  }\n\n  toHtmlModel(){\n    return {      \n      styles:{},\n      classList:[],//new RXArray,\n      attributes:{},\n    }\n  }\n\n  toTreeViewNode(){\n    let view = {\n      label: this.label,\n      tag:this.meta.tag,\n      id: this.id,\n      state:this.getStateName(),\n      children: [],\n    }\n\n    this.children.forEach((child)=>{\n      let childView = child.toTreeViewNode()\n      if(childView){\n        view.children.push(childView)\n      }\n    })\n\n    return view\n  }\n\n  getStateName(){\n    if(this.state === this.normalState){\n      return 'normalState'\n    }\n    if(this.state === this.activeState){\n      return 'activeState'\n    }\n    if(this.state === this.focusState){\n      return 'focusState'\n    }\n    if(this.state === this.dragoverState){\n      return 'dragoverState'\n    }\n    if(this.state === this.draggedState){\n      return 'draggedState'\n    }\n    if(this.state === this.disableState){\n      return 'disableState'\n    }\n  }\n\n  nodeChanged(node){\n    if(this.id === node.id){\n      rxEditor.commandManager.changeNode(this, node)\n      return;\n    }\n\n    this.children.forEach((child)=>{\n      child.nodeChanged(node)\n    })\n  }\n\n  focusNode(node){\n    if(node.id === this.id){\n      this.changeToState('focusState')\n    }\n    else{\n      this.changeToState('normalState')\n    }\n    this.children.forEach((child)=>{\n      child.focusNode(node)\n    })\n  }\n\n  clearCharNodes(){\n    this.children.forEach(child=>{\n      child.clearCharNodes()\n    })\n  }\n\n  getNodeById(id){\n    if(id === this.id){\n      return this\n    }\n\n    for(var i in this.children){\n      let node = this.children[i].getNodeById(id)\n      if(node){\n        return node\n      }\n    }\n  }\n\n  preview(){\n    this.changeToState('previewState')\n    this.children.forEach(child=>{\n      child.preview()\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/node.js","import initEditor from \"./shell/init-editor\"\r\n\r\nwindow.creatEditorCore = (pageId)=>{\r\n  initEditor(pageId)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/core.js","import {RXEditor} from \"../core/rxeditor\"\r\nimport {RXEditorCommandProxy} from \"../core/rxeditor-command-proxy\"\r\n//import loadElements from \"../elements/load-elements\"\r\n\r\nexport default function initEditor(pageId){\r\n  window.rxEditor = new RXEditor(pageId)\r\n  window.RXEditorCommandProxy = RXEditorCommandProxy\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/shell/init-editor.js","import {Canvas} from \"./canvas\"\nimport {CanvasState} from \"./canvas-state\"\nimport {add, tongleOnCondition} from \"../basic/rxarray\"\nimport {CommadManager} from \"./commands\"\nimport {NodeLabel} from \"./node-label\"\nimport {NodeToolbar} from \"./node-toolbar\"\nimport {RxCursor} from \"./rx-cursor\"\nimport {MouseFollower} from \"./mouse-follower\"\nimport {MiniEditbar} from \"./mini-editbar\"\nimport {RXEditorCommandProxy} from \"./rxeditor-command-proxy\"\n\nimport {NodeParser} from \"./node-parser\"\n\nfunction getDefaultLang(){\n  let lang = navigator.language || navigator.userLanguage\n  lang = lang.substr(0, 2)\n  //目前只实现两个语言版本\n  if(lang !== 'zh'){\n    lang = 'en'\n  }\n  return lang\n}\n\nvar enLocal = {\n  \"focus-parent\" : \"Focus Parent\",\n  \"move\" : \"Move\",\n  \"edit\" : \"Edit\",\n  \"duplicate\" : \"Duplicate\",\n  \"delete\" : \"Delete\",\n  \"can-be-draged\" : \"Can be draged\",\n}\n\nvar zhLocal = {\n  \"focus-parent\" : \"选中父节点\",\n  \"move\" : \"拖动\",\n  \"edit\" : \"编辑\",\n  \"duplicate\" : \"克隆\",\n  \"delete\" : \"删除\",\n  \"can-be-draged\" : \"可以拖动\",\n}\n\nfunction getLocal(id){\n  let local = getDefaultLang() === 'zh' ? zhLocal : enLocal\n  return local[id] ? local[id] : id\n}\n\nexport class RXEditor{\n  constructor(pageId) {\n    this.pageId = pageId\n    window.$t = getLocal\n    this.state = new CanvasState\n    this.commandManager = new CommadManager\n    this.commandManager.onCommandsChanged = (canUndo, canRedo, commandSchema)=>{\n      if(!commandSchema) return\n      if(commandSchema.parentId === this.canvas.id){\n        commandSchema.parentId = ''\n      }\n      if(commandSchema.oldParentId === this.canvas.id){\n        commandSchema.oldParentId = ''\n      }\n      this.commandProxy.commandExcuted(canUndo, canRedo, commandSchema)\n    }\n    this.optionClasses = []\n    add('rx-_-show-outline', this.optionClasses)\n    //this.optionClasses.add('show-label')\n    this.activedLabel = new NodeLabel\n    this.focusedLabel = new NodeLabel\n    this.focusedLabel.cssClass('focused')\n    this.focusedLabel.domOn('mousedown', (event)=>{\n      if(rxEditor.focusedNode){\n        rxEditor.focusedNode.begindragLabel(event)\n      }\n    })\n\n    this.toolbar = new NodeToolbar\n    this.cursor = new RxCursor\n    this.mouseFollower = new MouseFollower\n    this.miniEditbar = new MiniEditbar\n    this.nodeParser = new NodeParser\n  }\n\n  hangOn(id){\n    let commandProxy = new RXEditorCommandProxy(this.pageId)\n    this.workspace = document.getElementById(id)\n    this.activedLabel.render(this.workspace)\n    this.focusedLabel.render(this.workspace)\n    this.toolbar.render(this.workspace)\n    this.cursor.render(this.workspace)\n    this.mouseFollower.render(this.workspace)\n    this.miniEditbar.render(this.workspace)\n    this.canvas = new Canvas(this.workspace)\n    //this.canvas.children = this.load()\n    this.canvas.render();\n    commandProxy.serveForRXEditor = this\n    this.commandProxy = commandProxy\n\n    this.commandProxy.rxeditorReady()\n    document.addEventListener('mouseup', (event)=>{\n      this.dropElement(event)\n    })\n\n    this.state.watch('changed', (state)=>{\n      //this.allToNormalState()\n    })\n    this.state.watch('showOutline', (state)=>{\n      tongleOnCondition(state.showOutline, 'rx-_-show-outline', this.optionClasses)\n      this.render()\n    })\n    this.state.watch('showMarginX', (state)=>{\n      this.render()\n    })\n    this.state.watch('showMarginY', (state)=>{\n      this.render()\n    })\n\n  }\n\n  render(){\n    this.canvas.render()\n    this.toolbar.refreshPosition()\n    this.focusedLabel.refreshPosition()\n  }\n\n\n  clearDraggedoverStates(){\n    this.canvas.clearDraggedoverStates()\n  }\n  clearActiveStates(){\n    this.canvas.clearActiveStates()\n  }\n  clearFocusAndEditStates(){\n    this.canvas.clearFocusAndEditStates()\n  }\n\n  allToNormalState(){\n    this.canvas.allToNormalState()\n  }\n\n  dragFromToolbox(item){\n    if(this.commandManager.movingCommand) return\n    this.clearFocusAndEditStates()\n    let draggedNode = this.parseNode(item)\n    this.commandManager.startNew(draggedNode)\n    this.beginFollowMouse()\n    //this.clearFocusAndEditStates()\n  }\n\n  parseNode(item){\n    let responsive = this.state.screenWidth\n    return this.nodeParser.parse(\n      item.code.replace('--responsive--', responsive == 'xs' ? '' : '-'+ responsive)\n      )[0]\n    //return new BSContainer\n  }\n\n  dropElement(event){\n    //this.clearDraggedoverStates()\n    this.doDrop(event)\n    this.commandManager.finishMoving()\n    this.endFollowMouse()\n    this.canvas.clearCharNodes()\n  }\n\n  doDrop(event){\n    let position = this.cursor.position\n    let node = this.cursor.node\n    if(!node){\n      this.canvas.draggedToFoused()\n      return\n    }\n    this.canvas.clearFocusAndEditStates()\n    let command = this.commandManager.movingCommand\n    if(command){\n      if(position === 'in-left' || position === 'in-top'){\n        command.adoptFromToolbox(node)\n        command.moveInTop(node)\n        command.finish()\n      }\n      else if(position === 'in-right' || position === 'in-bottom'){\n        command.adoptFromToolbox(node)\n        command.moveIn(node)\n        command.finish()\n      }\n      else if(position === 'out-left' \n        || position === 'out-top'\n        || position === 'char-left'){\n        command.adoptFromToolbox(node)\n        command.moveBefore(node)\n        command.finish()\n      }\n      else if(position === 'out-right' \n        || position === 'out-bottom' \n        || position === 'char-right' ){\n        command.adoptFromToolbox(node)\n        command.moveAfter(node)\n        command.finish()\n      }\n    }\n}\n\n  endDragFromToolbox(){\n    this.commandManager.finishMoving()\n    this.endFollowMouse()\n  }\n\n  followMouse(event){\n    let mouseFollower = this.mouseFollower\n    if(mouseFollower.isActived){\n      //mouseFollower.$dom.style.left =  this.followX(event)\n      //mouseFollower.$dom.style.top = this.followY(event)\n      this.mouseFollower.followMouse(event)\n      this.commandProxy.takeOverDraggingByWorkspace()\n    }\n  }\n\n  beginFollowMouse(){\n    if(this.commandManager.movingCommand){\n      let draggedNode = this.commandManager.movingCommand.node\n      this.mouseFollower.active(draggedNode.label)\n    }\n  }\n\n  endFollowMouse(){\n    //if(this.mouseFollower && this.workspace.contains(this.mouseFollower.$dom)){\n    //  this.workspace.removeChild(this.mouseFollower.$dom)\n    //}\n    this.cursor.hide()\n    this.mouseFollower.hide()\n  }\n\n  nodeStateChanged(node, oldState, newState){\n    if(newState === node.focusState && node.focusState !== node.normalState){\n      node.htmlCode = this.getNodeHtml(node)\n      this.commandProxy.focusNode(node, this.pageId)\n    }\n    if(oldState === node.focusState && newState !== node.focusState){\n      this.commandProxy.unFocusNode(node)\n    }\n  }\n\n  getNodeHtml(node){\n    let div = document.createElement('div')\n    node.renderHtml(div)\n    return div.innerHTML;\n  }\n\n  changeCanvasState(state){\n    this.state.screenWidth = state.screenWidth\n    //this.state.preview = state.preview\n    //this.state.showEditMargin = state.showEditMargin\n    this.state.showMarginX = state.showMarginX\n    this.state.showMarginY = state.showMarginY\n    this.state.showOutline = state.showOutline\n    this.state.showLabel = state.showLabel\n  }\n\n  nodeChanged(node){\n    //console.log(node)\n    this.canvas.nodeChanged(node)\n    this.render()\n  }\n\n\n  undo(){\n    this.allToNormalState()\n    this.commandManager.undo()\n    this.render()\n  }\n\n  redo(){\n    this.allToNormalState()\n    this.commandManager.redo()\n    this.render()\n  }\n\n  //download(){\n  //  let innerHTML = this.canvas.generateHTML()\n  //  let json = this.canvas.generateJson()\n  //  this.commandProxy.saveCodeFiles(innerHTML, json)\n  //  this.render()\n  //}\n\n  clearCanvas(){\n    this.commandManager.clearCanvas()\n    this.activedLabel.hide()\n    this.focusedLabel.hide()\n    this.toolbar.hide()\n    this.render()\n  }\n\n\n  focusNodeFromShell(node){\n    this.canvas.clearFocusAndEditStates()\n    this.canvas.focusNode(node)\n  }\n\n  duplicateNodeFromShell(id){\n    this.canvas.clearFocusAndEditStates()\n    let node = this.canvas.getNodeById(id)\n    this.commandManager.duplicate(node)\n  }\n\n  removeNodeFromShell(id){\n    this.canvas.clearFocusAndEditStates()\n    let node = this.canvas.getNodeById(id)\n    this.commandManager.deleteNode(node)\n  }\n\n  canvasMouseMove(event){\n    this.commandProxy.canvasMouseMove(event)\n  }\n\n  requestHtmlCode(){\n    this.allToNormalState()\n    return this.canvas.generateHTML()\n  }\n\n  loadHtml(html, id){\n    let node = this.canvas.getNodeById(id)\n    if(node){\n      this.commandManager.loadNodeHtml(node, html)\n    }\n    else{\n      this.commandManager.loadCanvasHtml(html)\n    }\n\n    this.render()\n  }\n\n  setInlineFile(file){\n    let codeId = file.name.replace('.', '-')\n    let element = document.getElementById(codeId)\n    if(element){\n      element.innerHTML = file.code\n      return\n    }\n\n    if(file.fileType === 'style'){\n      let style = document.createElement('style');\n      style.type = 'text/css';\n      style.rel = 'stylesheet';\n      style.id = codeId\n\n      style.appendChild(document.createTextNode(file.code));\n\n      let head = document.getElementsByTagName('head')[0];\n      head.appendChild(style);\n    }\n\n    if(file.fileType === 'javascript'){\n      var script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.id = codeId\n      script.appendChild(document.createTextNode(file.code));\n      document.body.appendChild(script);\n    }\n    \n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/rxeditor.js","import {Node} from \"./node\"\n\nexport class Canvas extends Node{\n  constructor(workspace) {\n    super()\n    this.activeState = this.normalState\n    this.focusState = this.normalState\n    this.parentViewDomElement = workspace;\n    this.padding = '30px';\n\n    this.stateChanged = (oldState, newState)=>{}\n\n    this.rule = {dropInMargin : 0}\n    this.rule.acceptedChildren=''\n    this.rule.rejectChildren = ['col','thead', 'tbody', \n                           'th', 'tr', 'td']\n  }\n\n  getParentViewDomElement(){\n    return this.parentViewDomElement\n  }\n\n  /*preview(parentDomElement){\n    if(parentDomElement.contains(this.view.$dom)){\n      parentDomElement.removeChild(this.view.$dom)\n    }\n    return super.preview(parentDomElement)\n  }*/\n\n  toViewModel(){\n    let model = super.toViewModel()\n    model.tag = 'div'\n    model.styles.width = \"100%\"\n    model.styles['min-height'] = \"calc(100vh)\"\n    model.styles.cursor = 'default'\n    model.styles['border'] = '0'\n    model.styles['padding'] = '10px'\n    model.classList.push('canvas')\n    model.toolbar = ''\n    model.label = ''\n   return model\n  }\n\n  toPreviewModel(){\n    let model = super.toPreviewModel()\n    model.tag = 'div'\n    return model\n  }\n\n  generateHTML(){\n    let rootDiv = document.createElement('div')\n    this.children.forEach(child=>{\n      child.renderHtml(rootDiv)\n    })\n    return rootDiv.innerHTML\n\n  }\n\n  generateJson(){\n    let jsonArray = []\n    this.children.forEach((child)=>{\n      jsonArray.push(child.toJson())\n    })\n    return jsonArray\n  }\n\n  generateTreeViewNodes(){\n    let viewNodes = []\n    this.children.forEach((child)=>{\n      viewNodes.push(child.toTreeViewNode())\n    })\n    return viewNodes\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/canvas.js","export class NodeView{\n  constructor() {\n  }\n\n  render(model, parentDoment){\n    this.parentDoment = parentDoment\n    //this.putDown(parentDoment)//防止canvas内节点重复添加\n    let oldDom = this.$dom\n    \n    this.$dom = document.createElement(model.tag)\n    this.doRender(model, parentDoment, this.$dom)\n    if(parentDoment.contains(oldDom)){\n      parentDoment.replaceChild(this.$dom, oldDom)\n    }\n    else{\n      parentDoment.appendChild(this.$dom)\n    }\n  }\n\n  renderHtml(model, parentDoment){\n    //this.putDown(parentDoment)//防止canvas内节点重复添加\n    let previewDom = document.createElement(model.tag)\n    this.doRender(model, parentDoment, previewDom)\n    return previewDom\n  }\n\n  refreshState(model){\n    if(this.$dom){\n      //let y = this.$dom.getBoundingClientRect().y\n      this.$dom.classList.remove('rx-_-mouse-overed','rx-_-focused','rx-_-dragged', 'rx-_-dragover', 'rx-_-editing')\n      this.renderStylesAndClasses(model, this.$dom)\n      this.showAttributes(model,this.$dom)\n    }\n  }\n\n  doRender(model, parentDoment, domElement){\n    domElement.innerHTML = model.innerHTML ? model.innerHTML : ''\n    this.renderStylesAndClasses(model, domElement)\n    this.bindEvents(domElement, model.on)\n    this.showAttributes(model,domElement)\n    //parentDoment.appendChild(domElement);\n  }\n\n\n  renderStylesAndClasses(model, domElement){\n    if(domElement){\n      if(model.styles){\n        for(var styleName in model.styles){\n          domElement.style[styleName] = model.styles[styleName]\n        }\n      }\n\n      model.classList.forEach((className)=>{\n        if(className){\n          domElement.classList.add(className)\n        }\n      })\n      \n    }\n  }\n\n  showAttributes(model, domElement){\n    for(var attributeName in model.attributes){\n      if(model.attributes[attributeName]){\n        domElement.setAttribute(attributeName, model.attributes[attributeName])\n      }\n    }\n  }\n\n  bindEvents(element, on){\n    for(var eventName in on){\n      //element.addEventListener(eventName, on[eventName])\n      element[eventName] = on[eventName]\n    }\n  }\n\n  putDown(){\n    if(this.$dom){\n      if(this.parentDoment.contains(this.$dom)){\n        this.parentDoment.removeChild(this.$dom);\n      }\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/node-view.js","export class NodeState {\n  constructor(node) {\n    this.node = node\n    this.classList = []\n    this.styles = {}\n    this.attributes = {/*contenteditable:'false'*/}\n    this.onMousemove = ()=>{/*console.log('mouse move NodeState')*/};\n    this.onBegindrag = ()=>{};\n    this.onMouseover = (event)=>{};\n    this.onMouseout = ()=>{};\n    //this.onMouseup = (event)=>{\n      //添加结束拖动代码\n    //}\n    this.onClick = ()=>{\n      rxEditor.clearFocusAndEditStates()\n    }\n    this.enter = ()=>{}\n    this.leave = ()=>{\n    }\n  }\n\n  stateModel(){\n    let classList = []\n    classList.push.apply(classList, this.classList)\n   \n    let model = {\n      styles:Object.assign({}, this.styles),\n      classList:classList,\n      attributes: Object.assign({}, this.attributes),\n    }\n\n    this.addtionToModel(model)\n    return model\n  }\n\n  addtionToModel(model){\n    model.classList.push.apply(model.classList, rxEditor.optionClasses)\n    let node = this.node\n    if((rxEditor.state.showMarginX && node.rule.editMarginStyle)\n      || (node.children.length === 0 && node.rule.empertyMargin)\n      ){\n      model.styles['padding-left'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingX : 0\n      model.styles['padding-right'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingX : 0\n    }\n    if((rxEditor.state.showMarginY && node.rule.editMarginStyle)\n      || (node.children.length === 0 && node.rule.empertyMargin)\n      ){\n      model.styles['padding-top'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingY : 0\n      model.styles['padding-bottom'] = node.rule.editMarginStyle ? node.rule.editMarginStyle.paddingY : 0\n    }\n\n    //添加for后，编辑时无法选中\n    if(model.attributes.for){\n      model.attributes.for = ''\n    }\n\n    model.attributes.draggable = \"false\"\n\n    return model\n  }\n\n  judgePosition(event){\n    let draggedNode = rxEditor.commandManager.movingCommand.node\n    if(this.node.isCharNode){\n      return this.judgeCharNodePostion(event)\n    }\n    let margin = this.node.rule.dropInMargin\n    margin = margin ? margin : 0\n\n    let clientWidth = event.srcElement.clientWidth\n    let clientHeight = event.srcElement.clientHeight\n    let offsetX = event.offsetX\n    let offsetY = event.offsetY\n    let ratioY = offsetY/clientHeight\n    let ratioX = offsetX/clientWidth\n\n    if(margin > 0 && \n      ((this.node.parent && this.node.parent.canAccept(draggedNode)) || !this.node.parent)\n      ){\n      //左上角小方块区域\n      if(offsetY < margin && offsetX < margin){\n        return ratioY < ratioX ? 'out-top' :'out-left'\n      }\n\n      //右上角小方块区域\n      if(offsetY < margin \n        && clientWidth - offsetX < margin){\n        return ratioY < (1 - ratioX) ? 'out-top' :'out-right'\n      }\n\n      //右下角小方块\n      if(clientHeight - offsetY < margin \n        && clientWidth - offsetX < margin){\n        return (1 - ratioY) < (1 - ratioX) ? 'out-bottom' :'out-right'\n      }\n\n      //左下角小方块\n      if(clientHeight - offsetY < margin \n        && offsetX < margin){\n        return (1 - ratioY) <  ratioX ? 'out-bottom' :'out-left'\n      }\n\n      if(offsetY < margin){\n        return 'out-top'\n      }\n\n      if(offsetX < margin){\n        return 'out-left'\n      }\n\n      if(clientHeight - offsetY < margin){\n        return 'out-bottom'\n      }\n\n      if(clientWidth - offsetX < margin){\n        return 'out-right'\n      }\n    }\n\n    if(this.node.canAccept(draggedNode)){\n      if(this.inTop(event) && this.inLeft(event)){\n        return ratioY < ratioX ? 'in-top' :'in-left'\n      }\n      if(this.inTop(event) && !this.inLeft(event)){\n        return ratioY < (1 - ratioX) ? 'in-top' :'in-right'\n      }\n      if(!this.inTop(event) && this.inLeft(event)){\n        return (1 - ratioY) < ratioX ? 'in-bottom' :'in-left'\n      }\n      if(!this.inTop(event) && !this.inLeft(event)){\n        return (1 - ratioY) < (1 - ratioX) ? 'in-bottom' :'in-right'\n      }\n    }\n\n  }\n\n  judgeCharNodePostion(event){\n    return this.inLeft(event) ? 'char-left' : 'char-right'\n  }\n\n  //-dropInMargin 边界里面，算是拖入内部，外面算是拖入外部\n  inTop(event){\n    //位于上半部\n    if(event.srcElement.clientHeight > event.offsetY*2){\n      return true\n    }\n    return false\n  }\n\n  inLeft(event){\n    //位于左半部部\n    if(event.srcElement.clientWidth > event.offsetX*2){\n      return true\n    }\n    return false\n  }\n\n}\n\nexport class CanDropState extends NodeState{\n  constructor(node) {\n    super(node)\n    this.onMousemove = (event)=>{\n      this.doDragover(event)\n      rxEditor.followMouse(event)\n    }\n    //this.onMouseup = (event)=>{\n    //  this.doDrop(event)\n    //}\n    this.onClick = (event)=>{\n      rxEditor.clearFocusAndEditStates()\n      this.node.changeToState('focusState')\n    }\n  }\n\n  doDragover(event){\n    let command = rxEditor.commandManager.movingCommand\n    if(command){\n      let position =this.judgePosition(event)\n      if(position){\n        this.node.changeToState('dragoverState')\n        rxEditor.cursor.show(this.judgePosition(event), this.node)\n      }\n    }\n\n  }\n\n}\n\nexport class NormalState extends CanDropState{\n  constructor(node) {\n    super(node)\n    this.onMouseover = (event)=>{\n      if(!rxEditor.commandManager.movingCommand){\n        rxEditor.clearActiveStates()\n        this.node.changeToState('activeState')\n      }\n    };\n  }\n}\n\nexport class DragoverState extends CanDropState{\n  constructor(node) {\n    super(node)\n    this.classList.push('rx-_-dragover')\n    this.enter = ()=>{\n      node.changeTextnodeToCharNode()\n      if(!this.node.isCharNode){\n        rxEditor.activedLabel.show(node.label, node, 1)\n      }\n    }\n    this.leave = ()=>{\n      rxEditor.activedLabel.hide()\n    }\n    this.onMouseout = ()=>{\n      this.node.changeToState('normalState')\n    }\n  }\n}\n\nexport class ActiveState extends CanDropState{\n  constructor(node) {\n    super(node)\n    this.classList.push('rx-_-mouse-overed')\n    this.enter = ()=>{\n      rxEditor.activedLabel.show(node.label, node, 1)\n    }\n    this.leave = ()=>{\n      rxEditor.activedLabel.hide()\n    }\n    this.onMouseout = ()=>{\n      //console.log('mouse out')\n      this.node.changeToState('normalState')\n    };\n    this.onMouseover = (event)=>{\n      if(!rxEditor.commandManager.movingCommand){\n        rxEditor.clearActiveStates()\n        this.node.changeToState('activeState')\n      }\n    };\n  }\n}\n\nexport class FocusState extends CanDropState{\n  constructor(node) {\n    super(node)\n    this.classList.push('rx-_-focused')\n    this.enter = ()=>{\n      let dom = node.view.$dom\n      rxEditor.focusedLabel.show(node.label, node, 2)\n      rxEditor.toolbar.show(node)\n      rxEditor.focusedNode = node\n    }\n    this.leave = ()=>{\n      rxEditor.focusedLabel.hide()\n      rxEditor.toolbar.hide()\n      rxEditor.focusedNode = ''\n    }\n    this.onClick = (event)=>{\n      event.stopPropagation()\n    }\n\n    this.onBegindrag = (event)=>{\n      //if(this.node.draggable){\n      this.preventDefault\n      rxEditor.commandManager.startMove(this.node)\n      rxEditor.beginFollowMouse(event)\n      this.node.changeToState('draggedState')\n      //}\n    };\n  }\n}\n\nexport class DisableState extends NodeState{\n  constructor(node) {\n    super(node)\n    this.onMousemove = (event)=>{\n      event.preventDefault()\n      rxEditor.followMouse(event) \n      //console.log('mouse move DisableState')\n    };\n    this.onMouseout = (event)=>{event.preventDefault()};\n  }\n}\n\nexport class DraggedState extends DisableState{\n  constructor(node) {\n    super(node)\n    this.classList.push('rx-_-dragged')\n    this.enter = ()=>{\n      document.body.classList.add('one-element-dragged')\n    }\n    this.leave = ()=>{\n      document.body.classList.remove('one-element-dragged')\n    }\n  }\n}\n\nexport class EditState extends FocusState{\n  constructor(node) {\n    super(node)\n    this.classList.push('rx-_-editing')\n    this.enter = ()=>{\n      this.attributes.contenteditable = 'true'\n      let dom = node.view.$dom\n      rxEditor.focusedLabel.show(node.label, node, 2)\n      rxEditor.toolbar.show(node)\n      rxEditor.focusedNode = node\n      rxEditor.miniEditbar.show(this.node.view.$dom)\n      rxEditor.commandManager.startEditText(node)\n      node.render()\n    }\n\n    this.leave = ()=>{\n      rxEditor.focusedLabel.hide()\n      rxEditor.toolbar.hide()\n      rxEditor.focusedNode = ''\n      rxEditor.miniEditbar.hide()\n\n      rxEditor.commandManager.finishEditText()\n      this.node.render()\n    }\n  }\n}\n\nexport class PreviewState extends NodeState{\n  constructor(node) {\n    super(node)\n    this.onClick = ()=>{};\n  }\n\n  addtionToModel(model){\n    return model\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/node-state.js","import {ObjectState} from \"../basic/object-state\"\n\nexport class CanvasState extends ObjectState{\n  constructor(){\n    super()\n    this.__screenWidth = 'md'\n    this.__preview = false\n    this.__showMarginX = true\n    this.__showMarginY = true\n    this.__showOutline = true\n    this.__showLabel = true\n\n  }\n\n  get screenWidth(){\n    return this.__screenWidth\n  }\n\n  set screenWidth(screenWidth){\n    if(this.__screenWidth == screenWidth){return} \n    this.__screenWidth = screenWidth\n    this.distributeEvent('screenWidth')\n  }\n\n\n  get preview(){\n    return this.__preview\n  }\n\n  set preview(preview){\n    if(this.__preview == preview){return} \n    this.__preview = preview\n    this.distributeEvent('preview')\n  }\n\n  get showMarginX(){\n    return this.__showMarginX\n  }\n\n  set showMarginX(showMarginX){\n    if(this.__showMarginX == showMarginX){return} \n    this.__showMarginX = showMarginX\n    this.distributeEvent('showMarginX')\n  }\n\n  get showMarginY(){\n    return this.__showMarginY\n  }\n\n  set showMarginY(showMarginY){\n    if(this.__showMarginY == showMarginY){return} \n    this.__showMarginY = showMarginY\n    this.distributeEvent('showMarginY')\n  }\n\n  get showOutline(){\n    return this.__showOutline\n  }\n\n  set showOutline(showOutline){\n    if(this.__showOutline == showOutline){return} \n    this.__showOutline = showOutline\n    this.distributeEvent('showOutline')\n  }\n\n  get showLabel(){\n    return this.__showLabel\n  }\n\n  set showLabel(showLabel){\n    if(this.__showLabel == showLabel){return} \n    this.__showLabel = showLabel\n    this.distributeEvent('showLabel')\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/canvas-state.js","function insterAfter(newElement,targetElement){\n  var parent = targetElement.parentNode;\n  if(parent.lastChild == targetElement){\n    parent.appendChild(newElement);\n  }\n  else{\n    parent.insertBefore(newElement,targetElement.nextSibling);\n  }              \n}\n\nclass CommandMovable{\n  constructor(node){\n    this.node = node\n    this.oldParent = node.parent\n    this.oldnNextSbiling = node.nextSbiling()\n  }\n\n  moveInTop(targetParent){\n    this.node.moveInTop(targetParent)\n    this.storeNewInfo()\n  }\n\n\n  moveBefore(brother){\n    this.node.moveBefore(brother)\n    this.storeNewInfo()\n  }\n\n  moveAfter(brother){\n    this.node.moveAfter(brother)\n    this.storeNewInfo()\n  }\n\n\n  moveIn(targetParent){\n    this.node.moveIn(targetParent)\n    this.storeNewInfo()\n  }\n\n  storeNewInfo(){\n    this.newParent = this.node.parent\n    this.newNextSbiling = this.node.nextSbiling()\n  }\n\n  adoptFromToolbox(parent){\n    let draggedNode = this.node\n    if(draggedNode && !draggedNode.parent && parent.canAccept(draggedNode)){\n      draggedNode.parent = parent\n      draggedNode.render()\n      draggedNode.changeToState('draggedState')\n    }\n  }\n\n  finish(){\n    let draggedNode = this.node\n    if(draggedNode.parent){\n      draggedNode.parent.changeToState('normalState')\n    }\n    this.makeExcuteSchema()\n  }\n\n  excute(){\n    this.node.removeFromParent()\n    if(this.newNextSbiling){\n      this.node.moveBefore(this.newNextSbiling)\n    }\n    else if(this.newParent){\n      this.newParent.pushChild(this.node)\n    }\n    this.makeExcuteSchema()\n  }\n\n  undo(){\n    this.node.removeFromParent()\n    if(this.oldnNextSbiling){\n      this.node.moveBefore(this.oldnNextSbiling)\n    }\n    else if(this.oldParent)\n    {\n      this.oldParent.pushChild(this.node)\n    }\n\n    this.makeUndoSchema()\n  }\n\n\n}\n\nclass CommandNew extends CommandMovable{\n  constructor(node) {\n    super(node)\n  }\n\n  makeExcuteSchema(){\n    this.commandSchema = {\n      command : 'new',\n      node : this.node.toTreeViewNode(),\n      parentId : this.node.parent ? this.node.parent.id : '',\n      nextSblilingId : this.node.nextSbiling() ? this.node.nextSbiling().id : '',\n    }\n  }\n  \n  makeUndoSchema(){\n    this.commandSchema = {\n      command : 'delete',\n      nodeId : this.node.id,\n    }\n  }\n}\n\nclass CommandMove extends CommandMovable{\n  constructor(node) {\n   super(node)\n  }\n\n  makeExcuteSchema(){\n    this.commandSchema = {\n      command : 'move',\n      nodeId : this.node.id,\n      oldParentId : this.oldParent ? this.oldParent.id : '',\n      parentId : this.node.parent ? this.node.parent.id : '',\n      nextSblilingId : this.node.nextSbiling() ? this.node.nextSbiling().id : '',\n    }\n  }\n  \n  makeUndoSchema(){\n    this.commandSchema = {\n      command : 'move',\n      nodeId : this.node.id,\n      oldParentId : this.newParent ? this.newParent.id : '',\n      parentId : this.node.parent ? this.node.parent.id : '',\n      nextSblilingId : this.node.nextSbiling() ? this.node.nextSbiling().id : '',\n    }\n  }\n}\n\nclass CommandDelete{\n  constructor(node) {\n    this.node = node\n    this.oldParent = node.parent\n    this.oldnNextSbiling = this.node.nextSbiling()\n  }\n\n  excute(){\n    this.node.removeFromParent()\n    this.makeExcuteSchema()\n  }\n\n  undo(){\n    if(this.oldnNextSbiling){\n      this.node.moveBefore(this.oldnNextSbiling)\n    }\n    else{\n      this.oldParent.pushChild(this.node)\n    }\n    this.makeUndoSchema()\n  }\n\n  makeExcuteSchema(){\n    this.commandSchema = {\n      command : 'delete',\n      nodeId : this.node.id,\n    }\n  }\n  \n  makeUndoSchema(){\n    this.commandSchema = {\n      command : 'new',\n      node : this.node.toTreeViewNode(),\n      parentId : this.node.parent ? this.node.parent.id : '',\n      nextSblilingId : this.node.nextSbiling() ? this.node.nextSbiling().id : '',\n    }\n  }\n\n}\n\nclass CommandClone{\n  constructor(node) {\n    this.node = node\n    this.copy = node.clone()\n  }\n\n  excute(){\n    this.copy.moveAfter(this.node)\n    this.makeExcuteSchema()\n  }\n\n  undo(){\n    this.copy.removeFromParent()\n    this.makeUndoSchema()\n  }\n\n  makeExcuteSchema(){\n    this.commandSchema = {\n      command : 'new',\n      node : this.copy.toTreeViewNode(),\n      parentId : this.copy.parent ? this.copy.parent.id : '',\n      nextSblilingId : this.copy.nextSbiling() ? this.copy.nextSbiling().id : '',\n    }\n  }\n  \n  makeUndoSchema(){\n    this.commandSchema = {\n      command : 'delete',\n      nodeId : this.copy.id,\n    }\n  }\n}\n\nclass CommandChangeNode{\n  constructor(node, newMeta) {\n    this.node = node\n    this.oldMeta = JSON.parse(JSON.stringify(node.meta))\n    this.newMeta = JSON.parse(JSON.stringify(newMeta))\n  }\n\n  excute(){\n    this.node.meta = JSON.parse(JSON.stringify(this.newMeta))\n    this.makeExcuteSchema()\n  }\n\n  undo(){\n    this.node.meta = JSON.parse(JSON.stringify(this.oldMeta))\n    this.makeUndoSchema()\n  }\n\n  makeExcuteSchema(){\n    this.commandSchema = {\n      command : 'change',\n      nodeId : this.node.id,\n      meta: this.node.meta\n    }\n  }\n  \n  makeUndoSchema(){\n    this.commandSchema = {\n      command : 'change',\n      nodeId : this.node.id,\n      meta: this.node.meta,\n    }\n  }\n}\n\n\nclass CommandTextEdit{\n  constructor(node) {\n    this.node = node\n    this.oldChildren = this.node.children\n\n    this.node.children.forEach(chilid=>{\n      chilid.preview()\n    })\n  }\n\n  finish(){\n    this.node.children = rxEditor.nodeParser.parse(this.node.view.$dom.innerHTML)\n\n    this.node.children.forEach(child=>{\n      child.parent = this.node\n    })\n    this.newChildren = this.node.children\n  } \n\n  excute(){\n    this.node.children = this.newChildren\n    this.makeExcuteSchema()\n  }\n\n  undo(){\n    this.node.children = this.oldChildren\n    this.makeUndoSchema()\n  }\n\n  makeExcuteSchema(){\n    this.commandSchema = {\n      command : 'textEdit',\n      nodeId : this.node.id,\n      node : this.node.toTreeViewNode(),\n    }\n  }\n  \n  makeUndoSchema(){\n    this.commandSchema = {\n      command : 'textEdit',\n      nodeId : this.node.id,\n      node : this.node.toTreeViewNode(),\n    }\n  }\n}\n\nclass CommandLoadCanvasHtml{\n  constructor(newHtml) {\n    this.node = rxEditor.canvas\n    this.oldChildren = this.node.children\n    this.node.children = rxEditor.nodeParser.parse(newHtml)\n    this.node.children.forEach(child=>{\n      child.parent = this.node\n    })\n    this.newChildren = this.node.children\n  }\n\n  excute(){\n    this.node.children = this.newChildren\n    this.makeExcuteSchema()\n  }\n\n  undo(){\n    this.node.children = this.oldChildren\n    this.makeUndoSchema()\n  }\n\n  makeExcuteSchema(){\n    this.commandSchema = {\n      command : 'loadCanvasNodes',\n      nodes : this.node.toTreeViewNode().children,\n    }\n  }\n  \n  makeUndoSchema(){\n    this.commandSchema = {\n      command : 'loadCanvasNodes',\n      nodes : this.node.toTreeViewNode().children,\n    }\n  }\n}\n\nclass CommandClearCanvas{\n  constructor() {\n    this.node = rxEditor.canvas\n    this.oldChildren = this.node.children\n    this.node.children = []\n    this.newChildren = this.node.children\n  }\n\n  excute(){\n    this.node.children = this.newChildren\n    this.makeExcuteSchema()\n  }\n\n  undo(){\n    this.node.children = this.oldChildren\n    this.makeUndoSchema()\n  }\n\n  makeExcuteSchema(){\n    this.commandSchema = {\n      command : 'loadCanvasNodes',\n      nodes : this.node.toTreeViewNode().children,\n    }\n  }\n  \n  makeUndoSchema(){\n    this.commandSchema = {\n      command : 'loadCanvasNodes',\n      nodes : this.node.toTreeViewNode().children,\n    }\n  }\n}\n\nclass CommandLoadNodeHtml{\n  constructor(node, newHtml) {\n    this.node = node\n    this.oldChildren = this.node.children\n    this.oldMeta = this.node.meta\n    this.node.children = []\n    let nodes = rxEditor.nodeParser.parse(newHtml)\n    if(nodes.length > 0){\n      let newNode = nodes[0]\n      newNode.children.forEach(child=>{\n        child.parent = this.node\n        this.node.children.push(child)\n      })\n      this.node.meta = newNode.meta\n    }\n    this.newMeta = this.node.meta\n    this.newChildren = this.node.children\n  }\n\n  excute(){\n    this.node.children = this.newChildren\n    this.node.meta = this.newMeta\n    this.makeExcuteSchema()\n  }\n\n  undo(){\n    this.node.children = this.oldChildren\n    this.node.meta = this.oldMeta\n    this.makeUndoSchema()\n  }\n\n  makeExcuteSchema(){\n    this.commandSchema = {\n      command : 'loadNode',\n      nodeId : this.node.id,\n      node : this.node.toTreeViewNode(),\n    }\n  }\n  \n  makeUndoSchema(){\n    this.commandSchema = {\n      command : 'loadNode',\n      nodeId : this.node.id,\n      node : this.node.toTreeViewNode(),\n    }\n  }\n}\n\nexport class CommadManager{\n  constructor() {\n    this.undoCommands = []\n    this.redoCommands = []\n    this.onCommandsChanged = (canUndo, canRedo)=>{\n    }\n  }\n\n  getDraggedNode(){\n    if(this.movingCommand){\n      return this.movingCommand.node\n    }\n  }\n  startNew(node){\n    let cmd = new CommandNew(node)\n    this.startCommand(cmd)\n  }\n\n  startMove(node){\n    let cmd = new CommandMove(node)\n    this.startCommand(cmd)\n  }\n\n  duplicate(node){\n    let cmd = new CommandClone(node)\n    cmd.excute()\n    this.finished(cmd)\n    cmd.node.changeToState('normalState')\n    cmd.copy.changeToState('focusState')\n  }\n\n  changeNode(node, newNodeData){\n    //node.meta = newNodeData.meta\n    let cmd = new CommandChangeNode(node, newNodeData.meta)\n    cmd.excute()\n    this.finished(cmd)\n  }\n\n  deleteNode(node){\n    let cmd = new CommandDelete(node)\n    cmd.excute()\n    this.finished(cmd)\n    rxEditor.toolbar.hide()\n    rxEditor.focusedLabel.hide()\n  }\n\n  loadNodeHtml(node, html){\n    let cmd = new CommandLoadNodeHtml(node, html)\n    cmd.excute()\n    this.finished(cmd)\n  }\n\n  loadCanvasHtml(html){\n    let cmd = new CommandLoadCanvasHtml(html)\n    cmd.excute()\n    this.finished(cmd)\n  }\n\n  clearCanvas(){\n    let cmd = new CommandClearCanvas()\n    cmd.excute()\n    this.finished(cmd)\n  }\n\n\n  startCommand(command){\n    this.movingCommand = command\n  }\n\n  finishMoving(){\n\n    if(this.movingCommand && this.movingCommand.node.parent){\n      //this.movingCommand.finish()\n      this.finished(this.movingCommand)\n      this.movingCommand.node.changeToState('focusState')\n    }\n    this.movingCommand = ''\n  }\n\n  startEditText(node){\n    this.textCommand = new CommandTextEdit(node)\n  }\n\n  finishEditText(){\n    this.textCommand.finish()\n    this.finished(this.textCommand)\n    this.textCommand = ''\n  }\n\n  finished(command){\n    this.undoCommands.push(command)\n    this.redoCommands.length = 0\n    this.submitChanged(command)\n  }\n\n  undo(){\n    let command = this.undoCommands.pop()\n    command.undo()\n    this.redoCommands.push(command)\n    this.submitChanged(command)\n  }\n\n  redo(){\n    let command = this.redoCommands.pop()\n    command.excute()\n    this.undoCommands.push(command)\n    this.submitChanged(command)\n  }\n\n  submitChanged(command){\n    this.onCommandsChanged(this.undoCommands.length > 0, this.redoCommands.length > 0, command.commandSchema)\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/commands.js","import {RXComponent} from \"../basic/rxcomponent\"\n\nexport class NodeLabel extends RXComponent{\n  constructor(){\n    super()\n    this.cssClass('node-label')\n    this.domAttr('title', $t('can-be-draged'))\n    this.hide()\n    document.addEventListener('scroll', (event)=>{\n      this.refreshPosition()\n    })\n    window.addEventListener('resize', (event)=>{\n      this.refreshPosition()\n    })\n  }\n\n  refreshPosition(){\n    this.followElement(this.node, this.offset)\n  }\n\n  show(label, node, offset){\n    this.node = node\n    this.offset = offset\n    if(!node || !node.view.$dom) return\n    super.setInnerHTML(label)\n    this.followElement(node, offset)\n    return super.show()\n  }\n\n  followElement(node, offset){\n    if(!node || !node.view || !node.view.$dom) return\n    let domElement = node.view.$dom\n    let rect = domElement.getBoundingClientRect()\n    if(this.$dom){\n      this.$dom.style.left = rect.x + 'px'\n      if(rect.y < 20){\n        this.$dom.style.top = (rect.y + rect.height + offset) + 'px'\n      }\n      else{\n        this.$dom.style.top = (rect.y - 15 - offset) + 'px'\n      }\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/node-label.js","import {RXComponent} from \"../basic/rxcomponent\"\n\nclass SvgButton extends RXComponent{\n  constructor(title, svg, on, callback){\n    super()\n    this.cssClass('rx-button')\n    this.domAttr('title', title)  \n    this.innerHTML = svg\n    this.domOn(on, callback)\n  }  \n}\n\nvar svgArrowUp = `<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"arrow-up\" class=\"svg-inline--fa fa-arrow-up fa-w-14\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z\"></path></svg>`\n\nvar svgMove = `<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"fas\" data-icon=\"arrows-alt\" class=\"svg-inline--fa fa-arrows-alt fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M352.201 425.775l-79.196 79.196c-9.373 9.373-24.568 9.373-33.941 0l-79.196-79.196c-15.119-15.119-4.411-40.971 16.971-40.97h51.162L228 284H127.196v51.162c0 21.382-25.851 32.09-40.971 16.971L7.029 272.937c-9.373-9.373-9.373-24.569 0-33.941L86.225 159.8c15.119-15.119 40.971-4.411 40.971 16.971V228H228V127.196h-51.23c-21.382 0-32.09-25.851-16.971-40.971l79.196-79.196c9.373-9.373 24.568-9.373 33.941 0l79.196 79.196c15.119 15.119 4.411 40.971-16.971 40.971h-51.162V228h100.804v-51.162c0-21.382 25.851-32.09 40.97-16.971l79.196 79.196c9.373 9.373 9.373 24.569 0 33.941L425.773 352.2c-15.119 15.119-40.971 4.411-40.97-16.971V284H284v100.804h51.23c21.382 0 32.09 25.851 16.971 40.971z\"></path></svg>`\n\nvar svgEdit = `<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"edit\" class=\"svg-inline--fa fa-edit fa-w-18\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 576 512\"><path fill=\"currentColor\" d=\"M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z\"></path></svg>`\n\nvar svgClone = `<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"clone\" class=\"svg-inline--fa fa-clone fa-w-16\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\"><path fill=\"currentColor\" d=\"M464 0H144c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h320c26.51 0 48-21.49 48-48v-48h48c26.51 0 48-21.49 48-48V48c0-26.51-21.49-48-48-48zM362 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h42v224c0 26.51 21.49 48 48 48h224v42a6 6 0 0 1-6 6zm96-96H150a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h308a6 6 0 0 1 6 6v308a6 6 0 0 1-6 6z\"></path></svg>`\n\nvar svgRemove = `<svg aria-hidden=\"true\" focusable=\"false\" data-prefix=\"far\" data-icon=\"trash-alt\" class=\"svg-inline--fa fa-trash-alt fa-w-14\" role=\"img\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 448 512\"><path fill=\"currentColor\" d=\"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z\"></path></svg>`\n\nexport class NodeToolbar extends RXComponent{\n  constructor(){\n    super()\n    this.cssClass('node-toolbar')\n    this.hide()\n\n    this.duplicateBtn = new SvgButton($t('duplicate'), svgClone, 'click', ()=>{\n      if(rxEditor.focusedNode){\n        rxEditor.focusedNode.duplicate(event)\n      }\n    })\n\n    this.pushChild(new SvgButton($t('focus-parent'), svgArrowUp, 'click' , ()=>{\n      if(rxEditor.focusedNode){\n        rxEditor.focusedNode.up(event)\n      }\n    }))\n    this.pushChild(new SvgButton($t('move'), svgMove,'mousedown', (event)=>{\n        if(rxEditor.focusedNode){\n          rxEditor.focusedNode.begindragIcon(event)\n        }\n      })\n      //.cssStyle('cursor', 'move')\n    )\n    this.editButton = new SvgButton($t('edit'), svgEdit,'mousedown', (event)=>{\n      rxEditor.focusedNode.changeToState('editState')\n    })\n\n    this.editButton.domOn('mouseup',(event)=>{\n      //move cusor to end\n      let el = rxEditor.focusedNode.view.$dom\n      let sel = window.getSelection();\n      sel.collapse(el, 1);\n      el.focus();      \n    })\n    this.pushChild(this.editButton)\n    this.pushChild(this.duplicateBtn)\n    this.pushChild(new SvgButton($t('delete'), svgRemove, 'click', ()=>{\n      if(rxEditor.focusedNode){\n        rxEditor.focusedNode.delete(event)\n      }\n    }))\n\n    document.addEventListener('scroll', (event)=>{\n      this.refreshPosition()\n    })\n    window.addEventListener('resize', (event)=>{\n      this.refreshPosition()\n    })\n  }\n\n  refreshPosition(){\n    this.followElement(this.node)\n  }\n\n  show(node){\n    this.node = node\n    if(!node || !node.view.$dom) return\n    this.followElement(node)\n    if(this.node.rule.editable){\n      this.editButton.show()\n    }\n    else{\n      this.editButton.hide()\n    }\n    //if(this.node.forbidDuplicate){\n    //  this.duplicateBtn.hide()\n    //}\n    //else{\n    //  this.duplicateBtn.show()\n    //}\n    return super.show()\n  }\n\n  followElement(node){\n    if(!node || !node.view || !node.view.$dom) return\n    let domElement = node.view.$dom\n    let rect = domElement.getBoundingClientRect()\n    let offsetX = this.node.rule.editable ? 0 : 25\n    if(this.$dom){\n      let x = (rect.x + rect.width - 120)\n      x = x < 0 ? 0 : x\n      this.$dom.style.left = x + offsetX + 'px'\n      if(rect.y < 26){\n        this.$dom.style.top = (rect.y + rect.height) + 'px'\n      }\n      else{\n        this.$dom.style.top = (rect.y - 26) + 'px'\n      }\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/node-toolbar.js","import {RXComponent} from \"../basic/rxcomponent\"\r\n\r\nexport class RxCursor extends RXComponent{\r\n  constructor(){\r\n    super()\r\n    this.cssClass('rx-cursor')\r\n    this.cssClass('out')\r\n    this.hide()\r\n  }\r\n\r\n  hide(){\r\n    this.position = ''\r\n    this.node = null\r\n    super.hide()\r\n  }\r\n  \r\n  show(position, node){\r\n    this.position = position\r\n    this.node = node\r\n    if(!node || !node.view.$dom) return\r\n    this.classClasses()\r\n    this.cssClass('rx-cursor')\r\n    this.cssClass(position)\r\n    this.node = node\r\n    if(position === 'in-top'){\r\n      this.inTop(node)\r\n    }\r\n\r\n    if(position === 'in-right'){\r\n      this.inRight(node)\r\n    }\r\n\r\n    if(position === 'in-bottom'){\r\n      this.inBottom(node)\r\n    }\r\n\r\n    if(position === 'in-left'){\r\n      this.inLeft(node)\r\n    }\r\n\r\n    if(position === 'out-top'){\r\n      this.outTop(node)\r\n    }\r\n\r\n    if(position === 'out-right'){\r\n      this.outRight(node)\r\n    }\r\n\r\n    if(position === 'out-bottom'){\r\n      this.outBottom(node)\r\n    }\r\n\r\n    if(position === 'out-left'){\r\n      this.outLeft(node)\r\n    }\r\n\r\n    if(position === 'char-left'){\r\n      this.charLeft(node)\r\n    }\r\n\r\n    if(position === 'char-right'){\r\n      this.charRight(node)\r\n    }\r\n\r\n    return super.show()\r\n  }\r\n\r\n  outTop(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = rect.left + 'px'\r\n      this.$dom.style.top = (rect.top - 2) + 'px'\r\n      this.$dom.style.width = rect.width + 'px'\r\n      this.$dom.style.height = '4px'\r\n    }\r\n  }\r\n\r\n  outRight(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = (rect.right -2) + 'px'\r\n      this.$dom.style.right = \"auto\"\r\n      this.$dom.style.top = rect.top + 'px'\r\n      this.$dom.style.width = '4px'\r\n      this.$dom.style.height = rect.height + 'px'\r\n    }\r\n  }\r\n\r\n  outBottom(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = rect.x + 'px'\r\n      this.$dom.style.top = (rect.bottom - 2) + 'px'\r\n      this.$dom.style.bottom = 'auto'\r\n      this.$dom.style.width = rect.width + 'px'\r\n      this.$dom.style.height = '4px'\r\n    }\r\n  }\r\n\r\n  outLeft(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = (rect.left - 2) + 'px'\r\n      this.$dom.style.right = 'auto'\r\n      this.$dom.style.top = rect.top + 'px'\r\n      this.$dom.style.width = '4px'\r\n      this.$dom.style.height = rect.height + 'px'\r\n    }\r\n  }\r\n\r\n  charRight(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = (rect.right -2) + 'px'\r\n      this.$dom.style.right = \"auto\"\r\n      this.$dom.style.top = rect.top + 'px'\r\n      this.$dom.style.width = '4px'\r\n      this.$dom.style.height = rect.height + 'px'\r\n    }\r\n  }\r\n\r\n  charLeft(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = (rect.left - 2) + 'px'\r\n      this.$dom.style.right = 'auto'\r\n      this.$dom.style.top = rect.top + 'px'\r\n      this.$dom.style.width = '4px'\r\n      this.$dom.style.height = rect.height + 'px'\r\n    }\r\n  }\r\n\r\n/**/\r\n  inTop(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = rect.left + 'px'\r\n      this.$dom.style.top = (rect.top + 1) + 'px'\r\n      this.$dom.style.width = rect.width + 'px'\r\n      this.$dom.style.height = '4px'\r\n    }\r\n  }\r\n\r\n  inRight(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = (rect.right -4) + 'px'\r\n      this.$dom.style.right = \"auto\"\r\n      this.$dom.style.top = rect.top + 'px'\r\n      this.$dom.style.width = '4px'\r\n      this.$dom.style.height = rect.height + 'px'\r\n    }\r\n  }\r\n\r\n  inBottom(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = rect.x + 'px'\r\n      this.$dom.style.top = (rect.bottom - 4) + 'px'\r\n      this.$dom.style.bottom = 'auto'\r\n      this.$dom.style.width = rect.width + 'px'\r\n      this.$dom.style.height = '4px'\r\n    }\r\n  }\r\n\r\n  inLeft(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = rect.left + 'px'\r\n      this.$dom.style.right = 'auto'\r\n      this.$dom.style.top = rect.top + 'px'\r\n      this.$dom.style.width = '4px'\r\n      this.$dom.style.height = rect.height + 'px'\r\n    }\r\n  }\r\n\r\n  followElement(node){\r\n    let domElement = node.view.$dom\r\n    let rect = domElement.getBoundingClientRect()\r\n    if(this.$dom){\r\n      this.$dom.style.left = rect.x + 'px'\r\n      this.$dom.style.top = rect.height/2 + 'px'\r\n      //if(rect.y < 20){\r\n      //  this.$dom.style.top = (rect.y + rect.height) + 'px'\r\n      //}\r\n      //else{\r\n      //  this.$dom.style.top = (rect.y - 15 - offset) + 'px'\r\n      //}\r\n\r\n      this.$dom.style.width = rect.width + 'px'\r\n    }\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rx-cursor.js","import {RXComponent} from \"../basic/rxcomponent\"\r\n\r\nexport class MouseFollower extends RXComponent{\r\n  constructor(){\r\n    super()\r\n    this.cssClass('mouse-follower')\r\n    this.hide()\r\n  }\r\n\r\n  active(text){\r\n    super.setInnerHTML(text)\r\n    this.isActived = true\r\n  }\r\n\r\n  hide(){\r\n    this.isActived = false\r\n    super.hide()\r\n  }\r\n\r\n  followMouse(event){\r\n    this.$dom.style.left =  event.clientX\r\n    this.$dom.style.top =  event.clientY\r\n    super.show()\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/mouse-follower.js","import {RXComponent} from \"../basic/rxcomponent\"\nimport {ObjectState} from \"../basic/object-state\"\n\nclass EditorState extends ObjectState{\n  constructor(){\n    super()\n    this.__bold = false\n    this.__italic = false\n    this.__underline = false\n    this.__strikeThrough = false\n    this.__isLink = false\n  }\n\n  get bold(){\n    return this.__bold\n  }\n\n  set bold(bold){\n    if(this.__bold == bold){return} \n    this.__bold = bold\n    this.distributeEvent('bold')\n  }\n\n  get italic(){\n    return this.__italic\n  }\n\n  set italic(italic){\n    if(this.__italic == italic){return} \n    this.__italic = italic\n    this.distributeEvent('italic')\n  }\n\n  get underline(){\n    return this.__underline\n  }\n\n  set underline(underline){\n    if(this.__underline == underline){return} \n    this.__underline = underline\n    this.distributeEvent('underline')\n  }\n  get strikeThrough(){\n    return this.__strikeThrough\n  }\n\n  set strikeThrough(strikeThrough){\n    if(this.__strikeThrough == strikeThrough){return} \n    this.__strikeThrough = strikeThrough\n    this.distributeEvent('strikeThrough')\n  }\n\n  get isLink(){\n    return this.__isLink\n  }\n\n  set isLink(isLink){\n    if(this.__isLink == isLink){return} \n    this.__isLink = isLink\n    this.distributeEvent('isLink')\n  }\n\n}\n\nclass BarButton extends RXComponent{\n  constructor(title, callback){\n    super()\n    this.cssClass('mini-button')\n    this.domAttr('title', title)  \n    this.domOn('click', callback)\n  }  \n}\n\nconst isLink = () => {\n  if (window.getSelection().toString !== '') {\n    let selection = window.getSelection()\n    selection = selection.rangeCount > 0 ? selection.getRangeAt(0) :''\n    if (selection) {\n      if (selection.startContainer.parentNode.tagName === 'A'\n      || selection.endContainer.parentNode.tagName === 'A') {\n        return true\n      } else { return false }\n    } else { return false }\n  }\n}\n\n\nexport class MiniEditbar extends RXComponent{\n  constructor(){\n    super()\n    this.cssClass('mini-editbar')\n    this.hide()\n    this.state = new EditorState\n\n    this.domOn('mousedown', (event)=>{\n      event.preventDefault()\n    })\n  \n    let boldBtn = new BarButton('Bold', ()=>{\n        document.execCommand('bold', false, null)\n        this.updateButtonsState()\n      })\n      .cssClass('icon-button')\n      .setInnerHTML('<b>B</b>')\n\n    this.pushChild(boldBtn)\n\n    let italicBtn = new BarButton('Italic', ()=>{\n        document.execCommand('italic', false, null)\n        this.state.italic = !this.state.italic\n      })\n      .cssClass('icon-button')\n      .setInnerHTML('<i>I</i>')\n    this.pushChild( italicBtn )\n\n    let underlineBtn = new BarButton('Underline', ()=>{\n        document.execCommand('underline', false, null)\n        this.updateButtonsState()\n      })\n      .cssClass('icon-button')\n      .setInnerHTML('<u>U</u>')\n    this.pushChild( underlineBtn )\n\n    let strikeBtn = new BarButton('Strike', ()=>{\n        document.execCommand('strikeThrough', false, null)\n        this.updateButtonsState()\n      })\n      .cssClass('icon-button')\n      .setInnerHTML('<strike>S</strike>')\n    this.pushChild( strikeBtn )\n\n    let linkBtn = new BarButton('Link', ()=>{\n        if(this.state.isLink){\n          document.execCommand('unlink', false, null)\n        }\n        else{\n          document.execCommand('createLink', false, '#')\n        }\n        this.updateButtonsState()\n      })\n      .cssClass('icon-button')\n      .setInnerHTML('<div style=\"transform:rotate(45deg)\">⫘</div>')\n    this.pushChild( linkBtn )\n\n    document.onpaste = (event)=>{\n      let plainText  =  event.clipboardData.getData('text/plain').replace(/[\\r\\n]/g,\"<br>\")\n      document.execCommand('insertHTML', false, plainText)\n      return false\n    }\n\n    document.addEventListener('keydown',(event)=>{\n      if (event.keyCode === 13) {\n        document.execCommand('insertHTML', false, '<br>')\n        event.preventDefault()\n        return false\n      }\n    })\n\n    /*let codeBtn = new BarButton('Switch Code Editor', ()=>{\n        this.updateButtonsState()\n      })\n      .cssClass('icon-button')\n      .setInnerHTML('<div\"><></div>')\n    this.pushChild( codeBtn )\n    let btnInsert = new BarButton('Bootstrap Styles', ()=>{\n      })\n      .cssClass('mini-styles')\n      .setInnerHTML('Insert <span>▾</span>')\n    this.pushChild( btnInsert )*/\n\n    this.watchOne('bold', boldBtn)\n    this.watchOne('italic', italicBtn)\n    this.watchOne('underline', underlineBtn)\n    this.watchOne('strikeThrough', strikeBtn)\n    this.watchOne('isLink', linkBtn)    \n    document.addEventListener('scroll', (event)=>{\n      this.followElement(this.domElement)\n    })\n    window.addEventListener('resize', (event)=>{\n      this.followElement(this.domElement)\n    })\n  }\n\n  watchOne(stateName, btn){\n    this.state.watch(stateName, ()=>{\n      if(this.state[stateName]){\n        btn.cssClass('active')\n      }\n      else{\n        btn.removeCssClass('active')\n      }\n    })\n  }\n\n  show(followElement){\n    if(!followElement) return\n    this.followElement(followElement)\n    this.updateButtonsState()\n    document.addEventListener(\"selectionchange\", (event)=>{\n      this.updateButtonsState()\n    })\n    return super.show()\n  }\n\n  hide(){\n    document.removeEventListener(\"selectionchange\", (event)=>{\n      this.updateButtonsState()\n    })\n    return super.hide()\n  }\n\n\n  updateButtonsState(){\n    if(!this.isShow()){\n      return\n    }\n    this.state.bold = document.queryCommandState('bold')\n    this.state.italic = document.queryCommandState('italic')\n    this.state.underline = document.queryCommandState('underline')\n    this.state.strikeThrough = document.queryCommandState('strikeThrough')\n    this.state.isLink = isLink()\n  }\n\n  followElement(domElement){\n    if(!domElement) return\n    this.domElement = domElement\n    let rect = domElement.getBoundingClientRect()\n    let height = 32\n    if(this.$dom){\n      this.$dom.style.left = (rect.x -1)  + 'px'\n      if(rect.y < height){\n        this.$dom.style.top = (rect.y + rect.height) + 'px'\n      }\n      else{\n        this.$dom.style.top = (rect.y - height) + 'px'\n      }\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/mini-editbar.js","import {ClassNode} from './nodes/class-node.js'\r\nimport {TagNode} from './nodes/tag-node.js'\r\nimport {TextNode} from './nodes/text-node.js'\r\nimport rules from './rules'\r\nimport commonRule from'./rules/common-rule'\r\n\r\nexport class NodeParser{\r\n  constructor() {\r\n    this.$dom = document.createElement('div')\r\n  }\r\n\r\n  parse(html){\r\n    this.$dom.innerHTML = html\r\n\r\n    //console.log(this.$dom.childNodes)\r\n    let nodes = []\r\n    for(var i = 0; i < this.$dom.childNodes.length; i++){\r\n        let node = this.paraseNode(this.$dom.childNodes[i])\r\n        if(node){\r\n          nodes.push(node)\r\n        }\r\n    }\r\n    return nodes\r\n  }\r\n\r\n  paraseNode(element, parent){\r\n    var node \r\n    if(element.nodeType === 3){\r\n      let text = element.textContent//.trim()\r\n      if(!text){\r\n        return ''\r\n      }\r\n      let node =  new TextNode(text)\r\n      node.parent = parent\r\n      return node \r\n    }\r\n\r\n    //暂不处理注释\r\n    if(element.nodeType === 8){\r\n      return ''\r\n    }\r\n\r\n    if(element.classList.contains('container')){\r\n      node = new ClassNode('container')\r\n    }\r\n\r\n    let clssNode = this.parseClassNode(element)\r\n    node = clssNode ? clssNode : this.parseTagNode(element)\r\n\r\n    this.copyClassList(element.classList, node.meta.classList)\r\n    for(var i = 0; i < element.childNodes.length; i++){\r\n      let child = element.childNodes[i]\r\n\r\n      let childNode = this.paraseNode(child, node)\r\n      if(childNode){\r\n        node.children.push(childNode)\r\n      }\r\n    }\r\n\r\n    this.parseAttributes(node, element)\r\n    node.markDefaultMeta()\r\n\r\n    node.parent = parent\r\n\r\n    return node\r\n  }\r\n\r\n  parseAttributes(node, element){\r\n    let attrs = element.attributes;\r\n     for(var i = 0; i < attrs.length; i++){\r\n      let attrName = attrs[i]['nodeName'];\r\n      let attrValue = attrs[i]['nodeValue'];\r\n      if(attrName.toLowerCase() !== \"class\"){\r\n        node.meta.attributes[attrName] = attrValue\r\n      }\r\n    }\r\n  }\r\n\r\n  parseClassNode(element){\r\n    for(var ruleName in rules.classRules){\r\n      let rule = rules.classRules[ruleName]\r\n      rule.classes = rule.classes ? rule.classes : [ruleName]\r\n\r\n      for(var i = 0; i < rule.classes.length; i++){\r\n        let cssClass = rule.classes[i].toLowerCase()\r\n        if(element.classList.contains(cssClass)){\r\n          let node = new ClassNode(cssClass)\r\n          node.meta.tag = element.tagName.toLowerCase()\r\n          node.setLabel(rule.label ? rule.label : ruleName)\r\n          node.ruleName = ruleName\r\n          node.rule = rule\r\n          return node\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  parseTagNode(element){\r\n    var node\r\n    let elTag = element.tagName.toLowerCase()\r\n    for(var ruleName in rules.tagRules){\r\n      let rule = rules.tagRules[ruleName]\r\n      rule.tags = rule.tags ? rule.tags : [ruleName]\r\n      for(var i = 0; i < rule.tags.length; i++){\r\n        let tag = rule.tags[i]\r\n        if(elTag === tag.toLowerCase()){\r\n          node = new TagNode(tag)\r\n          node.setLabel(rule.label ? rule.label : ruleName)\r\n          node.ruleName = ruleName\r\n          node.rule = rule\r\n          return node\r\n        }\r\n      }\r\n    }\r\n    node = new TagNode(elTag)\r\n    node.ruleName = elTag\r\n    node.rule = Object.assign({}, commonRule)\r\n    return node\r\n  }\r\n\r\n  copyClassList(from, to){\r\n    from.forEach(cssClass=>{\r\n      if(cssClass.indexOf('rx-_-') !== 0){\r\n        to.push(cssClass)\r\n      }\r\n    })\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/node-parser.js","import {RXNode} from './rxnode.js'\r\nimport {add, remove} from \"../../basic/rxarray\"\r\n\r\nexport class ClassNode extends RXNode{\r\n  constructor(cssClass) {\r\n    super()\r\n      //add(cssClass, this.meta.classList)\r\n      this.cssClass = cssClass\r\n  }\r\n\r\n\r\n  make(){\r\n    return new ClassNode(this.cssClass)\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/nodes/class-node.js","import {Node} from '../node.js'\r\nimport {add, remove} from \"../../basic/rxarray\"\r\n\r\nexport class CharNode extends Node{\r\n  constructor(char, parent) {\r\n    super()\r\n    this.parent = parent\r\n    this.char = char\r\n    this.isCharNode = true;\r\n    this.rule = {}\r\n    this.rule.acceptedChildren = []\r\n    this.rule.editMarginStyle = {}\r\n    this.rule.dropInMargin = 5;\r\n  }\r\n\r\n  make(){\r\n    return new CharNode\r\n  }\r\n\r\n  changeTextnodeToCharNode(){\r\n  }\r\n\r\n  toViewModel(){\r\n    return {\r\n      styles:{},\r\n      classList:['char-node'],\r\n      attributes:{},\r\n      innerHTML : this.char,\r\n      tag:'span',\r\n      on:{\r\n        onmousemove:this.mousemove,\r\n        onmouseover:this.mouseover,\r\n        onmouseout:this.mouseout,\r\n        //onclick:this.onclick,\r\n      }\r\n    }\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/nodes/char-node.js","import {RXNode} from './rxnode.js'\r\n\r\nexport class TagNode extends RXNode{\r\n  constructor(tag) {\r\n    super()\r\n    this.meta.tag = tag\r\n    this.label = tag\r\n    this.labelToCapitalize()\r\n\t}\r\n\r\n  make(){\r\n  \tlet node = new TagNode(this.meta.tag)\r\n  \tnode.label = this.label\r\n  \treturn node\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/nodes/tag-node.js","import container from \"./container\"\r\nimport row from \"./row\"\r\nimport col from \"./col\"\r\nimport heading from \"./heading\"\r\nimport commonRule from \"./common-rule\"\r\n\r\n//ruleName:\r\n// -container\r\n// -row\r\n// -col\r\n// -heading\r\n\r\n//用于判断的规则token， 全部小写，不接受大写\r\n//Label为空，表示label使用类名字\r\n//- label:''\r\n//空表示所有都接受，空数组表示都不接受\r\n//- acceptedChildren : '',\r\n//空和空数组都表示所有都不排除\r\n//- rejectChildren : '',\r\n//在这个边界内算是拖入内部\r\n//  '--responsive--' 需要根据屏幕大小被替换成 '','-sm', '-md', '-lg', '-xl'\r\n//classes 为空表示单一类命，跟ID一致\r\n//tags 为空表示tag，跟ID一致\r\n\r\nexport default{\r\n  classRules : {\r\n    \"container\": container,\r\n    \"row\": row,\r\n    \"col\": col,\r\n    \"w-100\": Object.assign({}, commonRule),\r\n    \"alert\" : Object.assign({}, commonRule),\r\n  },\r\n\r\n  tagRules : {\r\n    heading: heading\r\n  },\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rules/index.js","export default {\r\n  dropInMargin : 10,\r\n  editable: false,\r\n  editMarginStyle : {\r\n    paddingX:'30px',\r\n    paddingY:'30px',\r\n  },\r\n  //没有子元素，显示空白\r\n  empertyMargin:true,\r\n\r\n  rejectChildren : ['col','thead', 'tbody', \r\n                           'th', 'tr', 'td']\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rules/container.js","export default{\r\n  dropInMargin : 10,\r\n  editable: false,\r\n  editMarginStyle : {\r\n    paddingX:'20px',\r\n    paddingY:'20px',\r\n  },\r\n  //没有子元素，显示空白\r\n  empertyMargin:true,\r\n  acceptChildren : ['col','w-100']\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rules/row.js","export default{\r\n  label:'column',\r\n  dropInMargin : 10,\r\n  editable: true,\r\n  editMarginStyle : {\r\n    paddingX:'20px',\r\n    paddingY:'20px',\r\n  },\r\n  //没有子元素，显示空白\r\n  empertyMargin:true,\r\n  classes:[\r\n    'col', \r\n    'col-1','col-2','col-3', 'col-4', 'col-5', 'col-6', \r\n    'col-7', 'col-8','col-9','col-10','col-11','col-12',\r\n    'col-sm', \r\n    'col-sm-1','col-sm-2','col-sm-3', 'col-sm-4', 'col-sm-5', 'col-sm-6', \r\n    'col-sm-7', 'col-sm-8','col-sm-9','col-sm-10','col-sm-11','col-sm-12',\r\n    'col-md', \r\n    'col-md-1','col-md-2','col-md-3', 'col-md-4', 'col-md-5', 'col-md-6', \r\n    'col-md-7', 'col-md-8','col-md-9','col-md-10','col-md-11','col-md-12',\r\n    'col-lg', \r\n    'col-lg-1','col-lg-2','col-lg-3', 'col-lg-4', 'col-lg-5', 'col-lg-6', \r\n    'col-lg-7', 'col-lg-8','col-lg-9','col-lg-10','col-lg-11','col-lg-12',\r\n    'col-xl', \r\n    'col-xl-1','col-xl-2','col-xl-3', 'col-xl-4', 'col-xl-5', 'col-xl-6', \r\n    'col-xl-7', 'col-xl-8','col-xl-9','col-xl-10','col-xl-11','col-xl-12',\r\n  ],\r\n  rejectChildren : ['col','thead', 'tbody', \r\n                           'th', 'tr', 'td']\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rules/col.js","export default{\r\n  label:\"Heading\",\r\n  tags:['h1', 'h2', 'h3', 'h4', 'h5', 'h6'],\r\n  editable: true,\r\n  editMarginStyle : {\r\n    paddingX:'5px',\r\n    paddingY:'5px',\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rules/heading.js","export function first(array){\r\n  if(array.length > 0){\r\n    return array[0]\r\n  }\r\n}\r\n\r\nexport function last(array){\r\n  if(array.length > 0){\r\n    return array[array.length - 1]\r\n  }\r\n}\r\n\r\nexport function before(refence, array){\r\n  for(var i = 0; i < array.length; i++){\r\n    if(array[i] === refence && i > 0){\r\n      return array[i - 1];\r\n    }\r\n  }\r\n}\r\n\r\nexport function after(refence, array){\r\n  for(var i = 0; i < array.length; i++){\r\n    if(array[i] === refence && i < array.length){\r\n      return array[i + 1];\r\n    }\r\n  }\r\n}\r\n\r\n\r\nexport function insertBefore(child, refence, array){\r\n  for(var i = 0; i < array.length; i++){\r\n    if(array[i] === refence){\r\n      array.splice(i, 0, child)\r\n      return;\r\n    }\r\n  }\r\n\r\n  array.push(child)\r\n}\r\n\r\nexport function insertAfter(child, refence, array){\r\n  for(var i = 0; i < array.length; i++){\r\n    if(array[i] === refence){\r\n      array.splice(i + 1, 0, child)\r\n      return\r\n    }\r\n  }\r\n}\r\n\r\nexport function remove(node, array){\r\n  for (var i = 0; i < array.length; i++) {\r\n    if(array[i] === node){\r\n      array.splice(i, 1)\r\n      break\r\n    }\r\n  }\r\n}\r\n\r\nexport function add(node, array){\r\n  if(!contains(node, array)){\r\n    array.push(node)\r\n  }\r\n}\r\n\r\nexport function contains(node, array){\r\n  for (var i = 0; i < array.length; i++) {\r\n    if(array[i] === node){\r\n      return true\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nexport function tongleOnCondition(condition, node, array){\r\n  if(condition){\r\n    add(node, array)\r\n  }\r\n  else{\r\n    remove(node, array)\r\n  }\r\n}\r\n\r\nexport function clear(array){\r\n  array.length = 0\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/basic/rxarray.js","import {contains, remove} from \"./rxarray\"\r\n\r\nexport class ObjectState{\r\n  constructor(){\r\n    this.envetHandlers = {}\r\n  }\r\n\r\n  watch(attribute, callbackFunction){\r\n    if(!this.envetHandlers[attribute]){\r\n      this.envetHandlers[attribute] = []\r\n    }\r\n    if(!contains(callbackFunction, this.envetHandlers[attribute])){\r\n      this.envetHandlers[attribute].push(callbackFunction)\r\n    }\r\n  }\r\n\r\n  cancelWatch(attribute, callbackFunction){\r\n    console.assert(this.envetHandlers[attribute], 'EditorState: did not register this event handler')\r\n    remove(callbackFunction, this.envetHandlers[attribute])\r\n  }\r\n\r\n  distributeEvent(attribute){\r\n    this.distributeEventWithoutGlobal(attribute)\r\n    this.distributeEventWithoutGlobal('changed')//全局事件\r\n  }\r\n\r\n  distributeEventWithoutGlobal(attribute){\r\n    let handlers = this.envetHandlers[attribute];\r\n    if(handlers){\r\n      handlers.forEach((handler)=>{\r\n        handler(this)\r\n      })\r\n    }\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/basic/object-state.js","export class RXEditorCommandProxy{\n  constructor(pageId){\n    this.pageId = pageId\n    window.addEventListener(\"message\", (event)=>{\n      if(this.pageId === event.data.pageId){\n        this.handleMessage(event.data)\n      }\n    });\n\n    this.focusNode = (node, pageId)=>{\n      this.sendMessage({\n        name: 'focusNode',\n        pageId: pageId,\n        node:{\n          id:node.id,\n          ruleName:node.ruleName,\n          meta:node.meta,\n          defaultMeta:node.defaultMeta,\n          optionsSchema:node.rule.optionsSchema,\n          htmlCode:node.htmlCode,\n        }\n      })\n    }\n\n    this.unFocusNode = (node)=>{\n      this.sendMessage({\n        name: 'unFocusNode',\n        id: node.id,\n      })\n    }\n\n    document.addEventListener('mouseup', (event)=>{\n      this.sendMessage({\n        name: 'canvasMouseup',\n      })\n    })\n\n    document.addEventListener('mousemove', (event)=>{\n      this.canvasMouseMove(event)\n    })\n\n  }\n\n  canvasMouseMove(event){\n    this.sendMessage({\n      name: 'canvasMouseMove',\n      event: {\n        screenX: event.screenX,\n        screenY: event.screenY,\n      },\n    })\n  }\n\n  rxeditorReady(){\n    this.sendMessage({\n      name: 'rxeditorReady'\n    })\n  }\n\n  commandExcuted(canUndo, canRedo, commandSchema){\n    this.sendMessage({\n      name: 'commandExcuted',\n      canUndo: canUndo,\n      canRedo:canRedo,\n      commandSchema: commandSchema,\n    })\n  }\n\n  takeOverDraggingByWorkspace(){\n    this.sendMessage({\n      name: 'takeOverDraggingByWorkspace'\n    })\n  }\n\n  saveCodeFiles(innerHTML, json){\n    this.sendMessage({\n      name: 'saveCodeFiles',\n      innerHTML:innerHTML,\n      json:json,\n    })\n  }\n\n\n  handleMessage(message){\n    //console.log('received:' + message.name + \":\" + message.rxNameId)\n    switch (message.name) {\n      case 'requestAssemble':\n        let loadedData = this.serveForRXEditor.assembleWithTheme(message.theme)\n        this.sendMessage({\n          name: 'replyAssemble',\n          toolbox: loadedData.toolbox,\n          treeViewNodes: loadedData.treeViewNodes,\n        })\n        break;\n      case 'draggingFromToolbox':\n        this.serveForRXEditor.dragFromToolbox(message.item)\n        break;\n      case 'endDragFromToolbox':\n        this.serveForRXEditor.endDragFromToolbox(message.rxNameId)\n        break;\n      case 'changeCanvasState':\n        this.serveForRXEditor.changeCanvasState(message.state)\n        break;\n      case 'nodeChanged':\n        this.serveForRXEditor.nodeChanged(message.node)\n        break;\n      case 'undo':\n        this.serveForRXEditor.undo()\n        break;\n      case 'redo':\n        this.serveForRXEditor.redo()\n        break;\n      //case 'download':\n      //  this.serveForRXEditor.download()\n      //  break;\n      case 'clearCanvas':\n        this.serveForRXEditor.clearCanvas()\n        break;\n      case 'changeTheme':\n        this.serveForRXEditor.changeTheme(message.theme)\n        break;\n      case 'focusNodeFromShell':\n        this.serveForRXEditor.focusNodeFromShell(message.node)\n        break;\n      case 'duplicateNodeFromShell':\n        this.serveForRXEditor.duplicateNodeFromShell(message.id)\n        break;\n      case 'removeNodeFromShell':\n        this.serveForRXEditor.removeNodeFromShell(message.id)\n        break;\n      case 'requestHtmlCode':\n        let htmlCode = this.serveForRXEditor.requestHtmlCode()\n        this.sendMessage({\n          name: 'replyHtmlCode',\n          htmlCode: htmlCode,\n        })\n        break;\n      case 'loadHtml':\n        this.serveForRXEditor.loadHtml(message.html, message.id)\n        break;\n      case 'setInlineFile':\n        this.serveForRXEditor.setInlineFile(message.file)\n        break;\n    }\n  }\n\n\n  sendMessage(message){\n    message.pageId = this.pageId\n    message.canvasHeight = document.body.scrollHeight\n    window.parent.postMessage(message, '/');    \n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/rxeditor-command-proxy.js","import {Node} from \"../node\"\r\nimport {TextNode} from \"./text-node\"\r\n\r\nexport class RXNode extends Node{\r\n  constructor() {\r\n    super()\r\n\r\n  }\r\n\r\n\r\n  clone(){\r\n    let copy = super.clone()\r\n    copy.meta = JSON.parse(JSON.stringify(this.meta))\r\n    copy.defaultMeta = JSON.parse(JSON.stringify(this.defaultMeta))\r\n    copy.label = this.label\r\n\r\n    return copy\r\n  }\r\n\r\n  setLabel(label){\r\n    this.label = label\r\n    this.labelToCapitalize()\r\n    return this\r\n  }\r\n\r\n  labelToCapitalize(){\r\n    let label = this.label\r\n    this.label = label.replace(label[0], label[0].toUpperCase())\r\n  }\r\n\r\n\r\n  toViewModel(){\r\n    let model = super.toViewModel()\r\n    this.baseMetaToModel(model)\r\n\r\n\r\n    if(this.meta.innerHTML){\r\n      model.innerHTML = this.meta.innerHTML\r\n    }\r\n\r\n    return model\r\n  }\r\n\r\n  toHtmlModel(){\r\n    let model = super.toHtmlModel()\r\n    this.baseMetaToModel(model)\r\n    return model\r\n  }\r\n\r\n  baseMetaToModel(model){\r\n    let meta = this.meta\r\n    model.tag = meta.tag\r\n    model.innerHTML = meta.innerHTML\r\n    model.classList.push.apply(model.classList, meta.classList)\r\n    Object.assign(model.styles, meta.styles)\r\n    Object.assign(model.attributes, meta.attributes)\r\n  }\r\n\r\n  setTag(tag){\r\n    return this.setField('tag', tag)\r\n  }\r\n\r\n  addClass(className){\r\n    if(!className){\r\n      return this\r\n    }\r\n    this.meta.classList.push(className)\r\n    return this\r\n  }\r\n\r\n  setAttribute(attrName, value){\r\n    this.meta.attributes[attrName] = value\r\n    return this\r\n  }\r\n\r\n  changeTextnodeToCharNode(){\r\n    let children = []\r\n    this.children.forEach(child=>{\r\n      if(child.isTextNode){\r\n        children.push.apply(children, child.charNodes())\r\n        this.isCharState = true\r\n      }\r\n      else{\r\n        children.push(child)\r\n      }\r\n    })\r\n\r\n    this.children = children\r\n    this.render()\r\n  }\r\n\r\n  changeCharNodeToTextNode(){\r\n    let children = []\r\n    var textNode = null\r\n    this.children.forEach(child=>{\r\n      if(child.isCharNode){\r\n        let prev = child.previousSbiling()\r\n        if(!prev || !prev.isCharNode){\r\n          textNode = new TextNode('')\r\n          textNode.parent = this\r\n          children.push(textNode)\r\n        }\r\n\r\n        textNode.text += child.char\r\n      }\r\n      else{\r\n        children.push(child)\r\n      }\r\n    })    \r\n    this.children = children\r\n    this.render()\r\n    this.isCharState = false\r\n  }\r\n\r\n  clearCharNodes(){\r\n    if(this.isCharState){\r\n      this.changeCharNodeToTextNode()\r\n    }\r\n    super.clearCharNodes()\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/nodes/rxnode.js","import {CharNode} from \"./char-node\"\r\n\r\nexport class TextNode{\r\n  constructor(text) {\r\n  \tthis.text = text\r\n    this.seedId()\r\n    this.isTextNode = true\r\n\t}\r\n  seedId(){\r\n    if(!TextNode.idSeed) TextNode.idSeed = 1\r\n    TextNode.idSeed ++\r\n    this.id = \"text\" + TextNode.idSeed\r\n  }\r\n\r\n  make(){\r\n    return new TextNode(this.text)\r\n  }\r\n\r\n  clone(){\r\n    let copy = this.make()\r\n    return copy\r\n  }\r\n\r\n  getParentViewDomElement(){\r\n    return this.parent.view.$dom\r\n  }\r\n\r\n  render(){\r\n    //this.view.render(this.toViewModel(), this.getParentViewDomElement())\r\n    let parentDom = this.getParentViewDomElement()\r\n    if(parentDom){\r\n    \tparentDom.appendChild(document.createTextNode(this.text))\r\n    }\r\n  }\r\n\r\n  renderHtml(parentDomElement){\r\n    if(parentDomElement){\r\n      parentDomElement.appendChild(document.createTextNode(this.text))\r\n    }\r\n  }\r\n\r\n\r\n  renderMouseFollower(parentDomElement){\r\n    let mouseFollower = document.createTextNode(this.text)\r\n    parentDomElement.appendChild(mouseFollower)\r\n    return mouseFollower\r\n  }\r\n\r\n  preview(){}\r\n\r\n  nodeChanged(){}\r\n\r\n  refreshState(){}\r\n\r\n  clearDraggedoverStates(){}\r\n\r\n  clearActiveStates(){}\r\n\r\n  clearFocusAndEditStates(){}\r\n\r\n  clearCharNodes(){}\r\n  \r\n  draggedToFoused(){}\r\n\r\n  focusNode(){}\r\n\r\n  allToNormalState(){}\r\n\r\n  toTreeViewNode(){\r\n    return null\r\n  }\r\n\r\n  getNodeById(){}\r\n\r\n  charNodes(){\r\n    let nodes = []\r\n    for(var i = 0; i < this.text.length; i++){\r\n      nodes.push(new CharNode(this.text[i], this.parent))\r\n    }\r\n    return nodes\r\n  }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/nodes/text-node.js","import {add, contains, remove, insertBefore} from \"./rxarray\"\r\n\r\nexport class RXComponent{\r\n  constructor(elementName = 'div'){\r\n    this.children = []\r\n    this.classList = []\r\n    this.style = {}\r\n    this.attrs = {}\r\n    this.domOns = {}\r\n    this.elementName = elementName\r\n  }\r\n\r\n  on(eventName, callback){\r\n    this[eventName] = callback\r\n    return this\r\n  }\r\n\r\n  off(eventName){\r\n    delete this[eventName]\r\n    return this\r\n  }\r\n\r\n  domOn(name, callback){\r\n    if(this.$dom){\r\n      this.$dom.addEventListener(name, callback)\r\n    }\r\n    this.domOns[name] = callback\r\n    return this\r\n  }\r\n\r\n  domOff(name, callback){\r\n    if(this.$dom){\r\n      this.$dom.removeEventListener(name, callback)\r\n    }\r\n    delete this.domOns[name]\r\n    return this\r\n  }\r\n\r\n  pushChild(child){\r\n    this.children.push(child)\r\n    return this\r\n  }\r\n\r\n  unshiftChild(child){\r\n    this.children.unshift(child)\r\n    return this\r\n  }\r\n\r\n  cssClass(className){\r\n    add(className, this.classList)\r\n    if(this.$dom){\r\n      this.$dom.classList.add(className)\r\n    }\r\n    return this\r\n  }\r\n\r\n  removeCssClass(className){\r\n    if(contains(className, this.classList)){\r\n     remove(className, this.classList)\r\n      if(this.$dom && this.$dom.classList.contains(className)){\r\n        this.$dom.classList.remove(className)\r\n      }\r\n    }\r\n    return this\r\n  }\r\n\r\n  cssStyle(name, value){\r\n    this.style[name] = value\r\n    return this\r\n  }\r\n\r\n  removeCssStyle(name){\r\n    delete this.style[name]\r\n  }\r\n\r\n  domAttr(name, value){\r\n    this.attrs[name] = value\r\n    return this\r\n  }\r\n\r\n  removeDomAttr(name){\r\n    delete this.attrs[name]\r\n    return this\r\n  }\r\n\r\n  tongle(cssClass){\r\n    if(contains(cssClass, this.classList)){\r\n     remove(cssClass, this.classList)\r\n      if(this.$dom){\r\n        remove(cssClass, this.$dom.classList)\r\n      }\r\n    }\r\n    else{\r\n     add(cssClass, this.classList)\r\n      if(this.$dom){\r\n        add(cssClass, this.$dom.classList)\r\n      }\r\n    }\r\n  }\r\n  //setInnerHTML(innerHTML){\r\n  //  this.innerHTML = innerHTML\r\n  //  return this\r\n  //}\r\n\r\n  render(parentElement){\r\n    this.$dom =  document.createElement(this.elementName)\r\n    parentElement.appendChild(this.$dom)\r\n\r\n    if(this.innerHTML){\r\n      this.$dom.innerHTML = this.innerHTML\r\n    }\r\n\r\n    for(var styleName in this.style){\r\n      this.$dom.style[styleName] = this.style[styleName]\r\n    }\r\n\r\n    this.classList.forEach((className)=>{\r\n      this.$dom.classList.add(className)\r\n    })\r\n\r\n    for(var attrName in this.attrs){\r\n      this.$dom[attrName] = this.attrs[attrName]\r\n    }\r\n\r\n    for(var eventName in this.domOns){\r\n      this.$dom.addEventListener(eventName, this.domOns[eventName])\r\n    }\r\n\r\n    this.children.forEach((child)=>{\r\n      child.render(this.$dom)\r\n    })\r\n    return this\r\n  }\r\n\r\n  refresh(){\r\n    if(this.$dom){\r\n      let parentDomElement = this.$dom.parentNode\r\n      this.destory()\r\n      this.render(parentDomElement)\r\n    }\r\n  }\r\n\r\n  setInnerHTML(innerHTML){\r\n    this.innerHTML = innerHTML\r\n    if(this.$dom){\r\n      this.$dom.innerHTML = innerHTML\r\n    }\r\n    return this\r\n  }\r\n\r\n  destory(){\r\n    this.$dom.parentNode.removeChild(this.$dom)\r\n    this.$dom = ''\r\n  }\r\n\r\n  removeChild(node){\r\n    remove(node, this.children)\r\n    if(this.$dom && node.$dom && this.$dom.contains(node.$dom)){\r\n      this.$dom.removeChild(node.$dom)\r\n    }\r\n  }\r\n\r\n  clearChild(){\r\n    this.children = new RXArray()\r\n  }\r\n\r\n  classClasses(){\r\n    let dom = this.$dom\r\n    if(dom){\r\n      this.classList.forEach(cssClass=>{\r\n        //console.log(cssClass)\r\n        dom.classList.remove(cssClass)\r\n      })\r\n    }\r\n    this.classList.length = 0\r\n  }\r\n\r\n  show(){\r\n    this.style.display = 'flex'\r\n    if(this.$dom){\r\n      this.$dom.style.display = 'flex'\r\n    }\r\n    return this\r\n  }\r\n\r\n  isShow(){\r\n    return this.style.display !== 'none'\r\n  }\r\n\r\n  hide(){\r\n    this.style.display = 'none'\r\n    if(this.$dom){\r\n      this.$dom.style.display = 'none'\r\n    }\r\n    return this\r\n  }\r\n\r\n\r\n  insertBefore(child, refence){\r\n    insertBefore(child, refence, this.children)\r\n  }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/basic/rxcomponent.js","export default {\r\n  dropInMargin : 10,\r\n  editable: true,\r\n  editMarginStyle : {\r\n    paddingX:'10px',\r\n    paddingY:'10px',\r\n  },\r\n  //没有子元素，显示空白\r\n  empertyMargin:false,\r\n  rejectChildren : ['col','thead', 'tbody', \r\n                           'th', 'tr', 'td']\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/rules/common-rule.js"],"sourceRoot":""}